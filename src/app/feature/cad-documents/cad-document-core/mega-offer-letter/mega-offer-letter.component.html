<nb-accordion>
    <nb-accordion-item *ngFor="let list of offerLetterList">
        <nb-accordion-item-header>
            <div class="row col-md-12">
                <div class="col-md-8">
                    <span>{{list.name}}</span>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                                      <span style="color:black">
                                      <a (click)="showFullScreen(list.name)" title="full screen">
                                        <i class="fa fa-expand px-2"></i>
                                   </a>
                                    </span>
                    <span *ngIf="list.isPresent && !loanDataHolder?.customerOfferLetter?.isOfferLetterApproved" style="color:darkgreen">
                                    <!-- <input (change)="onFileChange($event)" class="hide-type"
                                            id="uploadOfferLetterInput"
                                            type="file">-->
                                     <a (click)="uploadOfferLetter(list.id,uploadModel)" title="upload {{list.name}}">
                                        <i class="fa fa-upload"></i>
                                   </a>
                                   </span>
                    <span *ngIf="list.isPresent && list.uploadedUrl !==null" style="color:#007bff"
                          nbTooltipStatus="primary" nbTooltip="draft document">
                                      <a (click)="previewClick(list.uploadedUrl)" title="view {{list.name}}">
                                        <i class="fa fa-eye px-2"></i>
                                   </a>
                                    </span>
                    <span *ngIf="list.isPresent && list.pathSigned !==null" style="color:#007bff"
                          nbTooltipStatus="primary" nbTooltip="signed document">
                                      <a (click)="previewClick(list.pathSigned)" title="view {{list.name}}">
                                       <i class="fas fa-file-signature px-2"></i>
                                   </a>
                                    </span>
                    <span *ngIf="list.isPresent" class="px-2" title="Print {{list.name}}">
                                    <button [useExistingCss]="true"
                                            class="btn btn-flat btn-sm btn-outline-info"
                                            ngxPrint printSectionId="{{offerLetterConst.keysEnum(list.name)}}Print">
                                        <i class="fas fa-print"></i>
                                    </button>
                                    </span>
                    <span *ngIf="list.isPresent" style="color:green" title="Status : Saved">
                                    <i class="fas fa-check-circle px-2"></i>
                                  </span>

                    <span *ngIf="!list.isPresent" style="color:red" title="Status :Not Saved">
                                    <i class="fas fa-times-circle px-2"></i>
                                  </span>


                </div>
            </div>
        </nb-accordion-item-header>
        <nb-accordion-item-body>
            <!-- CAD DOC FOR MAW --->
            <app-retail-educational-loan
                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.RETAIL_EDUCATIONAL)"
                    [customerId]="customerId"
                    [loanDataHolder]="loanDataHolder"
                    [offerLetterTypeId]="list.id"></app-retail-educational-loan>

            <app-retail-mortgage
                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.RETAIL_MORTGAGE_OVERDRAFT)"
                    [customerId]="customerId"
                    [loanDataHolder]="loanDataHolder"
                    [offerLetterTypeId]="list.id">
            </app-retail-mortgage>

            <app-hayer-purchase
                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.HAYER_PURCHASE)"
                    [customerId]="customerId"
                    [loanDataHolder]="loanDataHolder"
                    [offerLetterTypeId]="list.id"></app-hayer-purchase>
            <!-- CAD DOC FOR MAW --->
            <app-retail-housing-loan
                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.RETAIL_HOUSING)"
                    [customerId]="customerId"
                    [loanDataHolder]="loanDataHolder"
                    [offerLetterTypeId]="list.id">

            </app-retail-housing-loan>
            <app-retail-professional-loan
                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.RETAIL_PROFESSIONAL_LOAN)"
                    [customerId]="customerId"
                    [loanDataHolder]="loanDataHolder"
                    [offerLetterTypeId]="list.id">
            </app-retail-professional-loan>
            <app-sme
                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.SME)"
                    [customerId]="customerId"
                    [loanDataHolder]="loanDataHolder"
                    [offerLetterTypeId]="list.id">

            </app-sme>
            <app-retail-educational-loan-english
                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.RETAIL_EDUCATIONAL_ENGLISH)"
                    [customerId]="customerId"
                    [loanDataHolder]="loanDataHolder"
                    [offerLetterTypeId]="list.id">

            </app-retail-educational-loan-english>

            <app-retail-mortgage-loan *ngIf="loanDataHolder && list.name ===
                                offerLetterConst.value(offerLetterConst.RETAIL_MORTGAGE_LOAN)"
                                      [customerId]="customerId"
                                      [loanDataHolder]="loanDataHolder"
                                      [offerLetterTypeId]="list.id">
            </app-retail-mortgage-loan>
        </nb-accordion-item-body>

        <nb-accordion-item>
            <nb-accordion-item-header>
                Upload Offer Letter Documents
            </nb-accordion-item-header>
            <nb-accordion-item-body>
                <app-offer-letter-upload *ngIf="loanDataHolder"
                                         [customerId]="loanDataHolder.id"
                                         [customerOfferLetter]="loanDataHolder?.customerOfferLetter"></app-offer-letter-upload>
            </nb-accordion-item-body>
        </nb-accordion-item>
    </nb-accordion-item>

</nb-accordion>
<ng-template #uploadModel>
    <nb-card accent="primary">
            <nb-card-header>
                <div style="display:block">
                    <a (click)="onClose()" aria-label="Close"
                       class="close cursor" data-dismiss="modal">
                        <span aria-hidden="true">Ã—</span></a>
                    <h4 class="nav  navbar-right pull-left">Upload Offer Letter</h4>
                </div>
            </nb-card-header>

            <nb-card-body>
                <div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-12 form-group">
                                    <label for="type">Select Offer Type</label>
                                    <select [(ngModel)]="docType" class="form-control" id="type">
                                        <option *ngFor="let type of offerLetterType" [value]="type">{{type |titlecase}}
                                            Document
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group files">
                                <label>Upload Your File </label>
                                <input (change)="onFileChange($event)" class="form-control" multiple=""
                                       type="file">
                            </div>
                            <div (click)="previewClick(null)" *ngIf="preview"
                                 class="d-flex justify-content-center">
                                <button class="btn btn-primary btn-sm btn-flat"><span class="px-2">Preview</span>
                                </button>
                            </div>

                        </div>


                    </div>
                </div>
            </nb-card-body>

            <nb-card-footer>
                <div class="d-flex justify-content-end">
                    <button (click)="onClose()" class="btn btn-danger  btn-flat fa-pull-left" type="submit">
                        NO
                    </button>
                    <button (click)="submitOfferLetter()" class="btn btn-success float-right" type="submit"
                    >YES
                    </button>


                </div>
            </nb-card-footer>

    </nb-card>
</ng-template>