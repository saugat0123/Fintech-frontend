<nb-card accent="primary">
  <nb-card-header>
    Customer Loan Information
  </nb-card-header>

  <nb-card-body>
    <div class="row">

      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemSiteVisit>
            <a class="cursor info-label" (click)="openModel(itemSiteVisitTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    SITE VISIT
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.siteVisit" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.siteVisit" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemSiteVisitTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              Site Visit
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-site-visit #siteVisitComponent
                              (siteVisitDataEmitter)="saveSiteVisit($event);"
                              [formValue]="customerInfo?.siteVisit"
                              [customerInfo]="customerInfo"
                              [fromProfile]="true"></app-site-visit>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #ciclComponent>
            <a class="cursor info-label" (click)="openModel(ciclComponentTemplate)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">CICL</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.cicl" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.cicl" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>

        <ng-template #ciclComponentTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              CICL
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-cicl #ciclComponent [ciclValue]="ciclResponse" [fromProfile]="true"
                        (ciclDataEmitter)="saveCICL($event)"></app-cicl>

            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="!isMicroCustomer">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemFinancial>
            <a class="cursor info-label" (click)="openModel(itemFinancialTemplate)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">
                    <span *ngIf="customerInfo?.customerType == customerType.INDIVIDUAL">INCOME & EXPENSES</span>
                    <span *ngIf="customerInfo?.customerType == customerType.INSTITUTION">FINANCIAL</span>
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.financial" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.financial" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemFinancialTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
                <span
                        *ngIf="customerInfo?.customerType == customerType.INDIVIDUAL">INCOME & EXPENSES</span>
                          <span *ngIf="customerInfo?.customerType == customerType.INSTITUTION">FINANCIAL</span>
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-financial #financialComponent
                             (financialDataEmitter)="saveFinancial($event)"
                             [formData]="customerInfo?.financial"
                             [fromProfile]="true"></app-financial>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo?.customerType == customerType.INSTITUTION && isMicroCustomer && isMicroInDirectCustomer">
        <div class="row">
          <nb-card class="col-md-11 py-2" #loanPortfolio >
            <a class="cursor info-label" (click)="openModel(itemLoanPortfolioTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    LOAN PORTFOLIO OF BORROWERS
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.siteVisit" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.siteVisit" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemLoanPortfolioTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              LOAN PORTFOLIO OF BORROWERS
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-borrower-loan-portofolio #borrowerLoanPortfolioComponent
                                            (dataEmitter)="saveBorrowerPortFolio($event)"
                                            [fromProfile]="true"
                                            [borrowerPortfolioData]="customerInfo?.borrowerPortFolio"
              ></app-borrower-loan-portofolio>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo?.customerType == customerType.INSTITUTION && isMicroCustomer && isMicroInDirectCustomer">
        <div class="row">
          <nb-card class="col-md-11 py-2" #borrowerFinancialHighlight >
            <a class="cursor info-label" (click)="openModel(itemBorrowerFinancialHighlightTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    FINANCIAL HIGHLIGHTS OF BORROWERS
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.siteVisit" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.siteVisit" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemBorrowerFinancialHighlightTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              FINANCIAL HIGHLIGHTS OF BORROWERS
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-borrower-financial #borrowerFinancialHighlight
                                      (dataEmitter)="saveBorrowerFinancial($event)"
                                      [fromProfile]="true"
                                      [microBorrowerFinancial]="customerInfo?.microBorrowerFinancial"
              ></app-borrower-financial>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo?.customerType == customerType.INSTITUTION && isMicroCustomer && isMicroInDirectCustomer">
        <div class="row">
          <nb-card class="col-md-11 py-2" #marketingActivities >
            <a class="cursor info-label" (click)="openModel(marketingActivitiesTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    MARKETING ACTIVITIES
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.siteVisit" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.siteVisit" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #marketingActivitiesTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              MARKETING ACTIVITIES
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-marketing-activities
                      (dataEmitter)="saveMarketingActivities($event)"
                      [fromProfile]="true"
                      [marketingActivitiesData]="customerInfo?.marketingActivities"
              ></app-marketing-activities>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4"  *ngIf="customerInfo?.customerType === 'INSTITUTION' && companyInfo.isMicroCustomer && isMicroInDirectCustomer">
        <div class="row">
          <nb-card class="col-md-11 py-2" #baselRisk>
            <a class="cursor info-label" (click)="openModel(baselRiskTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    BASEL wise Risk Weighted Exposure
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.siteVisit" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.siteVisit" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #baselRiskTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              BASEL wise Risk Weighted Exposure
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-basel-risk-exposure
                      [formData]="customerInfo?.microBaselRiskExposure"
                      (baselRiskExposureEmitter)="saveBaselRiskExposure($event)"></app-basel-risk-exposure>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemIncomeFromAccount>
            <a class="cursor info-label" (click)="openModel(inccomeFromAccountComponentTemplate)">
              <div class="row">
                <div class="col-md-10">
                  <p class="custom-font">INCOME FROM ACCOUNT</p>
                </div>
                <div class="col-md-2 d-flex justify-content-end">
              <span *ngIf="customerInfo?.incomeFromAccount" style="color:green"
                    title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.incomeFromAccount" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #inccomeFromAccountComponentTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>INCOME FROM ACCOUNT
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-income-from-account [incomeFromAccountDataResponse]="incomeFromAccountDataResponse"
                                       [customerInfo]="customerInfo"
                                       [fromProfile]="true"
                                       (incomeFromAccountDataEmitter)="saveIncomeFromAccount($event)">
              </app-income-from-account>

            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4"  *ngIf="customerInfo?.customerType === 'INSTITUTION' || isMicroCustomer">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemNetTradingAssets>
            <a class="cursor info-label" (click)="openModel(itemNetTradingAssetsTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    NET TRADING ASSETS (NTA)
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
            <span *ngIf="customerInfo?.netTradingAssets" style="color:green"
                  title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.netTradingAssets" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemNetTradingAssetsTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              NET TRADING ASSETS (NTA)
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-net-trading-assets (netTradingAssetsEventEmitter) = "saveNetTradingAssets($event)"
                                      [fromProfile]=true
                                      [netTradingAssetsData]="netTradingAssets">

              </app-net-trading-assets>
<!--              <app-nta-mega-->
<!--                      (netTradingAssetsEventEmitter) = "saveNetTradingAssets($event)"-->
<!--                      [fromProfile]=true-->
<!--                      [netTradingAssetsData]="netTradingAssets">-->
<!--              </app-nta-mega>-->
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemSecurity>
            <a class="cursor info-label" (click)="openModel(itemSecurityTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    SECURITY
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
            <span *ngIf="customerInfo?.security !== null" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span *ngIf="customerInfo?.security == null" style="color:red" title="Status :Not Saved">
                <em class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemSecurityTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              SECURITY
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-security
                      (securityDataEmitter)="saveSecurity($event)"
                      (submittedCheck)="submittedCheck1($event)"
                      [submittedCheckFromParent] = "submittedCheck"
                      [calendarType]="calendarType"
                      [fromProfile]="true"
                      [isMicroCustomer]="isMicroCustomer"
                      [securityValue]="customerInfo?.security"
                      [shareSecurity]="customerInfo?.shareSecurity"></app-security>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemGuarantor>
            <a class="cursor info-label" (click)="openModel(itemGuarantorTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    GUARANTOR
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                   <span *ngIf="customerInfo?.guarantors !== null" style="color:green"
                         title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span *ngIf="customerInfo?.guarantors == null" style="color:red"
                        title="Status :Not Saved">
                <em class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemGuarantorTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              GUARANTOR
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-guarantor #guarantorComponent
                             (guarantorDataEmitter)="saveGuarantor($event)"
                             [calendarType]="calendarType"
                             [fromProfile]="true"
                             [guarantorDetailValue]="customerInfo?.guarantors" [customerInfo]="customerInfo"></app-guarantor>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemInsurance>
            <a class="cursor info-label" (click)="openModel(itemInsuranceTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    INSURANCE
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="insurance?.length>0" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="insurance?.length == 0" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemInsuranceTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              INSURANCE
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-insurance
                      (insuranceDataEmitter)="saveInsurance($event)"
                      [insuranceDataFromModel]="customerInfo?.insurance"
                      [fromProfile]="true" [customerInfo]="customerInfo"></app-insurance>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemloanChecklist>
            <a class="cursor info-label" (click)="openModel(itemloanChecklistTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    CREDIT CHECKLIST
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <span *ngIf="creditChecklistGeneral" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!creditChecklistGeneral" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemloanChecklistTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              CREDIT CHECKLIST
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-credit-checklist-general
                      (creditChecklistGeneralEmitter)="saveCreditChecklist($event)"
                      [formData]="customerInfo?.creditChecklist"
                      [fromProfile]="true"
                      [calendarType]="calendarType"
                      [customerType]="customerInfo?.customerType"
              ></app-credit-checklist-general>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo?.customerType === 'INSTITUTION' && companyInfo.isMicroCustomer && isMicroInDirectCustomer">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemSynopsis>
            <a class="cursor info-label" (click)="openModel(itemSynopsisTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    Synopsis of Creditworthiness
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.siteVisit" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.siteVisit" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemSynopsisTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              Synopsis of Creditworthiness
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-micro-synopsis
                      (creditworthinessEmitter)="saveSynopsisCreditworthiness($event)"
                      [formData]="customerInfo?.synopsisCreditworthiness"></app-micro-synopsis>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemReportingInfoLevel>
            <a class="cursor info-label" (click)="openModel(itemReportingInfoLevelTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    Customer Reporting Information
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                <span style="color: green" title="Status : Saved">
                <em *ngIf="reportingInfoLevelCode && reportingInfoLevelDescription"
                    class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color: red" title="Status : Not Saved">
                <em *ngIf="!reportingInfoLevelCode && !reportingInfoLevelDescription"
                    class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemReportingInfoLevelTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              Customer Reporting Information
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-reporting-info-tagging #reportingInfoTagging
                                          (reportingInfoLevelsEmitter)="saveCustomerReportingInfo($event)"
                                          [type]="'c'"
                                          [reportingInfoLevels]="customerInfo?.reportingInfoLevels"></app-reporting-info-tagging>
              <div>
                <button class="btn float-right d-flex justify-content-end" (click)="reportingInfoTaggingComponent.onSubmit()" type="submit" nbButton>Save</button>
              </div>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemCommentsFromAccount>
            <a class="cursor info-label" (click)="openModel(itemCommentsFromAccountTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    NRB/STATUTORY AUDITORS/INTERNAL AUDITORS REMARKS AND THEIR STATUS
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                <span style="color: green" title="Status : Saved">
                <em *ngIf="checkedPreviousComments"
                    class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color: red" title="Status : Not Saved">
                <em *ngIf="!checkedPreviousComments"
                    class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemCommentsFromAccountTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              NRB/STATUTORY AUDITORS/INTERNAL AUDITORS REMARKS AND THEIR STATUS
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-comments
                      #commentsInfoTagging
                      [commentsDataResponse]="commentsDataResponse"
                      [commentData]="customerInfo?.data"
                      [fromProfile]="true"
                      (commentsDataEmitter)="saveDataFromComments($event)">
              </app-comments>
              <div>
                <button class="btn float-right d-flex justify-content-end" (click)="commentsComponent.submitForm()" type="submit" nbButton>Save</button>
              </div>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #dataFromPreviousSecurity>
            <a class="cursor info-label" (click)="openModel(dataFromPreviousSecurityTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    PREVIOUS SECURITY
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
     <span *ngIf="checkedPreviousSecurity" style="color:green" title="Status : Saved">
                       <em class="fas fa-check-circle px-2"></em>
                     </span>
                     <span style="color:red" title="Status :Not Saved">
                       <em *ngIf="!checkedPreviousSecurity" class="fas fa-times-circle px-2"></em>
                     </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #dataFromPreviousSecurityTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              PREVIOUS SECURITY
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-previous-security
                      #previousSecurityInfoTagging
                      [securityDataResponse]="securityDataResponse"
                      [securityData]="customerInfo?.data"
                      [commentData]="customerInfo?.data"
                      [fromProfile]="true"
                      (securityDataEmitter)="saveDataFromSecurity($event)">
              </app-previous-security>
              <div>
                <button class="btn float-right d-flex justify-content-end" (click)="previousSecurityComponent.submitForm()" type="submit" nbButton>Save</button>
              </div>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4"  >
        <div class="row">
          <nb-card class="col-md-11 py-2">
            <a class="cursor info-label" (click)="openModel(commonLoanDatas)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">Common Loan Data</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em *ngIf="customerInfo?.commonLoanData"
                    class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color: red" title="Status : Not Saved">
                <em *ngIf="!customerInfo?.commonLoanData"
                    class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
      </div>

      <div class="col-md-4" *ngIf="customerInfo?.customerType === customerType?.INSTITUTION">
        <div class="row">
          <nb-card class="col-md-11 py-2" #dataFromMultiBanking>
            <a class="cursor info-label" (click)="openModel(dataFromMultiBankingTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    BANKING ARRANGEMENT
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                <span *ngIf="multiBankingResponse" style="color:green"
                      title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!multiBankingResponse" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #dataFromMultiBankingTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              BANKING ARRANGEMENT
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-multiple-banking
                      #multipleBankingComponent
                      [fromProfile]="true"
                      [multiBankingData]="customerInfo?.multiBanking"
                      (multiBankingDataEmitter)="saveMultiBanking($event)">
              </app-multiple-banking>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo.customerType === customerType.INSTITUTION">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemCreditRiskGrading>
            <a class="cursor info-label" (click)="openModel(itemCreditRiskGradingTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    INSTITUTIONAL CRG
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
            <span *ngIf="checkCrgGamma" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!checkCrgGamma" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemCreditRiskGradingTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
                INSTITUTIONAL CRG
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-institutional-crg-gamma #institutionalCrgGamma
                                           [fromProfile]="true"
                                           [loanConfigId]="1"

                                           (crgDataEmitter)="saveCrgGamma($event)"></app-institutional-crg-gamma>
              <div>
                <button class="btn float-right d-flex justify-content-end" (click)="institutionalCrgGamma.onSubmit()" type="submit" nbButton>Save</button>
              </div>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo?.customerType === customerType?.INSTITUTION">
      <div class="row">
        <nb-card class="col-md-11 py-2" #dataFromRiskAnalysis>
          <a class="cursor info-label" (click)="openModel(dataRiskAnalysisTemplate)">
            <div class="row cursor">
              <div class="col-md-8">
                <p class="custom-font">
                  RISK ANALYSIS
                </p>
              </div>
              <div class="col-md-4 d-flex justify-content-end">
                  <span *ngIf="customerInfo?.riskAnalysis" style="color:green" title="Status : Saved">
                     <em class="fas fa-check-circle px-2"></em>
                  </span>
                <span style="color:red" title="Status :Not Saved">
                       <em *ngIf="!customerInfo?.riskAnalysis" class="fas fa-times-circle px-2"></em>
                     </span>
              </div>
            </div>
          </a>
        </nb-card>
      </div>
      <ng-template #dataRiskAnalysisTemplate let-data let-ref="dialogRef">
        <nb-card class="template-css">
          <nb-card-header>
            RISK ANALYSIS
            <a aria-label="Close" class="close cursor"
               data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
          </nb-card-header>
          <nb-card-body>
            <app-risk-analysis
                    #riskAnalysisComponent
                    [fromProfile]="true"
                    [riskData]="customerInfo?.riskAnalysis"
                    [customerInfo]="customerInfo"
                    (riskAnalysisDataEmitter)="saveRiskAnalysis($event)">
            </app-risk-analysis>
          </nb-card-body>
        </nb-card>
      </ng-template>
    </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemReviewDates>
            <a class="cursor info-label" (click)="openModel(itemReviewDatesTemplate)">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    REVIEW DATES
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="reviewDate" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!reviewDate" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemReviewDatesTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              REVIEW DATES
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-review-date [formValue]="companyInfo" [companyInfo]="reviewDate"
                               (reviewDataEmitter)="saveReviewDate($event)"></app-review-date>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
    </div>
    <nb-accordion>



    </nb-accordion>
  </nb-card-body>
</nb-card>
<ng-template #commonLoanDatas let-data let-ref="dialogRef">
  <nb-card class="template-css">
    <nb-card-header>
      Common Loan Data
      <a aria-label="Close" class="close cursor"
         data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
    </nb-card-header>
    <nb-card-body>
      <form [formGroup] = "commonLoanData" >
        <div class="row">
          <div class="col-md-12">
            <div class="form-group" style="max-height: 300px !important;height: 250px;">
              <strong>{{client === clientName?.LAXMIBANK ? 'Justification of limit' : 'Loan background' }}</strong>
              <ckeditor formControlName="borrowerInformation"
                        [style]="{height:'250px !important;'}"
                        placeholder="Background"
                        required
                        [config]="ckeConfig"
              >
              </ckeditor>
            </div>
          </div>
          <div class="clearfix"></div>

          <div class="col-md-12">
            <div class="form-group">
              <label class="title" for="disbursementCriteria"><strong>Disbursement Criteria</strong></label>
              <ckeditor
                      formControlName="disbursementCriteria" id="disbursementCriteria"
                      name="disbursementCriteria"
                      [config]="ckeConfig"></ckeditor>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label class="title" for="repayment"><strong>Repayment</strong></label>
              <ckeditor
                      formControlName="repayment" id="repayment"
                      name="repayment"
                      [config]="ckeConfig"></ckeditor>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label class="title" for="remark">
                <strong>{{client === clientName?.SHINE_RESUNGA ? 'Account Strategy' : 'Remarks'}}</strong></label>
              <ckeditor
                      formControlName="remark" id="remark"
                      [config]="ckeConfig"></ckeditor>
            </div>
          </div>


          <div class="col-md-12 mt-3">
            <div class="form-group">
              <label class="title"><strong>Summary & Recommendation</strong></label>
              <ckeditor formControlName="summeryRecommendation"
                        [style]="{height:'250px !important;'}"
                        placeholder="Summary & Recommendation"
                        [config]="ckeConfig">
              </ckeditor>
            </div>
          </div>

          <div class="col-md-12 form-group">
            <h6><strong>Additional Description</strong></h6>
            <nb-checkbox (change)="checkChecked($event.target.checked,'waiver')"
                         [checked]="waiverChecked">
              <b>Waiver</b>
            </nb-checkbox>
            <div *ngIf="waiverChecked">
              <ckeditor formControlName="waiverConclusionRecommendation"
                        [config]="ckeConfig"></ckeditor>
            </div>
          </div>

          <div class="col-md-12 form-group">
            <nb-checkbox (change)="checkChecked($event.target.checked,'deviation')"
                         [checked]="deviationChecked">
              <b>Deviation</b>
            </nb-checkbox>
            <div *ngIf="deviationChecked">
              <ckeditor formControlName="deviationConclusionRecommendation"
                        [config]="ckeConfig"></ckeditor>
            </div>
          </div>

          <div class="col-md-12 form-group">
            <nb-checkbox (change)="checkChecked($event.target.checked,'sol')"
                         [checked]="solChecked"><b>Single Obligor Limit</b>
            </nb-checkbox>
            <div *ngIf="solChecked">
              <ckeditor formControlName="solConclusionRecommendation"
                        [config]="ckeConfig"></ckeditor>
            </div>
          </div>
          <div class="col-md-12 form-group">

            <nb-checkbox (change)="checkChecked($event.target.checked,'risk')"
                         [checked]="riskChecked"><b>Risk & Mitigation</b>
            </nb-checkbox>
            <div *ngIf="riskChecked">
              <ckeditor formControlName="riskConclusionRecommendation"
                        [config]="ckeConfig"></ckeditor>
            </div>
          </div>
          <div class="col-md-12 form-group">

            <nb-checkbox (change)="checkChecked($event.target.checked,'debt')"
                         [checked]="debtChecked"><b>Debt Structure and Control</b>
            </nb-checkbox>
            <div *ngIf="debtChecked">
              <ckeditor formControlName="termsAndCondition"
                        [config]="ckeConfig"></ckeditor>
            </div>
          </div>
        </div>
      </form>
<!--      <div class="col-md-12 form-group">-->
<!--        <button nbButton (click)="openCadSetup(datax)"><b>Setup Security Schedule</b>-->
<!--        </button>-->
<!--      </div>-->
      <div>
        <button class="btn float-right d-flex justify-content-end"
                (click)="saveCommonLoanData()" type="submit" nbButton>Save
        </button>
      </div>
    </nb-card-body>
  </nb-card>
</ng-template>
