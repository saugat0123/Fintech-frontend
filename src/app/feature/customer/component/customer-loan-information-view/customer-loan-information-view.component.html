<nb-card accent="primary">
  <nb-card-header>
    Customer Loan Information
  </nb-card-header>
  <nb-card-body>
    <div class="row">
      <div class="col-md-4" *ngIf="customerInfo?.cicl">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemCicl>
            <a class="cursor info-label" (click)="openModel(ciclComponentTemplate)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">CICL</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #ciclComponentTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              CICL
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-cicl-view *ngIf="customerInfo?.cicl; else noCicl"
                      [ciclValue]="customerInfo?.cicl"></app-cicl-view>
              <ng-template #noCicl>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo?.insurance?.length>0">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemInsurance>
            <a class="cursor info-label" (click)="openModel(insuranceComponentTemplate)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">INSURANCE</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #insuranceComponentTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              INSURANCE
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-insurance-view *ngIf="customerInfo?.insurance; else noIns"
                      [insurance]="customerInfo?.insurance"></app-insurance-view>
              <ng-template #noIns></ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo?.guarantors?.guarantorList.length > 0">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemGuarantor>
            <a class="cursor info-label" (click)="openModel(guarantorComponentTemplate)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">GUARANTOR</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #guarantorComponentTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              GUARANTOR
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-guarantor-view *ngIf="customerInfo?.guarantors?.guarantorList; else noGntr"
                                  [guarantorData]="customerInfo?.guarantors?.guarantorList"></app-guarantor-view>
              <ng-template #noGntr>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4" *ngIf="customerInfo?.siteVisit">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemSiteVisit>
            <a class="cursor info-label" (click)="openModel(siteVisitComponentTemplate)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">SITE VISIT</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #siteVisitComponentTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              SITE VISIT
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-site-visit-view *ngIf="customerInfo?.siteVisit; else noSitVst"
                      [siteVisit]="customerInfo?.siteVisit">
              </app-site-visit-view>
              <ng-template #noSitVst>Not Avaialble</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemSecurity>
            <a class="cursor info-label" (click)="openModel(securityComponentTemplate)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">SECURITY</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em *ngIf="customerInfo?.security" class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                       <em *ngIf="!customerInfo?.security" class="fas fa-times-circle px-2"></em>
                     </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #securityComponentTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css" [style]="customerInfo?.security ? 'height: 100vh; overflow-y: scroll' : noSec">
            <nb-card-header>
              SECURITY
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-security-view *ngIf="customerInfo?.security; else noSec"
                      [security]="customerInfo?.security"
                      [shareSecurityData]="customerInfo?.shareSecurity">
              </app-security-view>
              <ng-template #noSec>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>

      <div class="col-md-4" *ngIf="customerInfo?.financialCcbl">
        <div class="row">
          <nb-card class="col-md-11 py-2" #financialCCbls>
            <a class="cursor info-label" (click)="openModel(financialCcbl)">
              <div class="row cursor">
                <div class="col-md-8">
                  <p class="custom-font">
                    Financial - CCBL
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <span style="color:green" title="Status : Saved">
                     <em *ngIf="customerInfo?.financialCcbl" class="fas fa-check-circle px-2"></em>
                  </span>
                  <span style="color:red" title="Status :Not Saved">
                       <em *ngIf="!customerInfo?.financialCcbl" class="fas fa-times-circle px-2"></em>
                     </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #financialCcbl let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              Financial-CCBL
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-financial-ccbl *ngIf="customerInfo?.financialCcbl; else noFinCcbl" [customerInfo]="customerInfo"  [fromProfile]="false" ></app-financial-ccbl>
              <ng-template #noFinCcbl>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>


      <div class="col-md-4" *ngIf="customerInfo?.crgCcbl">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemCrg>
            <a class="cursor info-label" (click)="openModel(crgCCBL)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">CRG CCBL</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #crgCCBL let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              CRG - CCBL
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-crg-ccbl *ngIf="customerInfo?.crgCcbl; else noCrgCcbl" [customerInfo]="customerInfo" [fromProfile]="false"></app-crg-ccbl>
              <ng-template #noCrgCcbl>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>

      </div>

      <div class="col-md-4" *ngIf="customerInfo?.creditRiskGrading">
        <div class="row">
          <nb-card class="col-md-11 py-2" #itemCrg>
            <a class="cursor info-label" (click)="openModel(crgComponentTemplate)">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">CREDIT SCORING</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #crgComponentTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css" [style]="customerInfo?.creditRiskGrading ? 'height: 100vh' : noCrg">
            <nb-card-header>
              CREDIT SCORING
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-credit-grading #CrgIndividualComponent *ngIf="customerInfo?.creditRiskGrading; else noCrg"
                                  [formData]="customerInfo?.creditRiskGrading"
                                  [fromProfile]="false"></app-credit-grading>
              <ng-template #noCrg>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card class="col-md-11 py-2">
            <a (click)="openModel(commonLoanDatas)" class="cursor info-label">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">COMMON DATA</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span style="color: green" title="Status : Saved">
                <em *ngIf="customerInfo?.commonLoanData"
                    class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color: red" title="Status : Not Saved">
                <em *ngIf="!customerInfo?.commonLoanData"
                    class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #commonLoanDatas let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              COMMON DATA
              <a aria-label="Close" class="close cursor"
                 data-dismiss="modal" (click)="ref.close()">
                      <span style="color: red" (click)="ref.close()">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <span *ngIf="customerInfo?.commonLoanData; else noCD">
              <p class="text-uppercase"><strong>The Bank's SOL</strong></p>
              <p>The Bank’s core capital stood at {{nrpValue ? (nrpValue | currencyFormatter) : 'NPR .......... billion'}} as on
                {{asOnDate ? (asOnDate | date) : '.............'}} ; {{(customerInfo?.commonLoanData | jsonParse)?.solText ? (customerInfo?.commonLoanData | jsonParse)?.solText : '______________'}}</p>
              <p><strong>APPROVING AUTHORITY:</strong> {{(customerInfo?.commonLoanData | jsonParse)?.approvingAuthority}}</p>
              <p class="text-uppercase"><strong>Special Covenants/Conditions, if any:</strong></p>
              <span [innerHTML]="(customerInfo?.commonLoanData | jsonParse)?.specialCovenant | safeHtml"></span>
              <p class="text-uppercase"><strong>WAIVERS, DEVIATIONS, DEFERRALS AND REBATES, IF ANY:</strong></p>
              <span [innerHTML]="(customerInfo?.commonLoanData | jsonParse)?.waiverConclusionRecommendation | safeHtml"></span>
                </span>
              <ng-template #noCD>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card #itemFinancial class="col-md-11 py-2">
            <a (click)="openModel(itemFinancialTemplate)" class="cursor info-label">
              <div class="row">
                <div class="col-md-8">
                  <p class="custom-font">
                    <span *ngIf="customerInfo?.customerType == customerType.INDIVIDUAL">INCOME & EXPENSES</span>
                    <span *ngIf="customerInfo?.customerType == customerType.INSTITUTION">INCOME TO THE BANK</span>
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="customerInfo?.financial" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.financial" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemFinancialTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
                <span
                        *ngIf="customerInfo?.customerType == customerType.INDIVIDUAL">INCOME & EXPENSES</span>
              <span *ngIf="customerInfo?.customerType == customerType.INSTITUTION">INCOME TO THE BANK</span>
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-financial-view *ngIf="customerInfo?.financial; else noIncExp" [formData]="customerInfo?.financial"
                                  [data]="customerInfo?.financial"
                                  [customerCategory]="customerInfo?.customerCategory"
                                  [customerType]="customerInfo?.customerType"></app-financial-view>
              <ng-template #noIncExp>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div *ngIf="customerInfo?.customerType === 'INSTITUTION'" class="col-md-4">
        <div class="row">
          <nb-card #itemNetTradingAssets class="col-md-11 py-2">
            <a (click)="openModel(itemNetTradingAssetsTemplate)" class="cursor info-label">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    NET TRADING ASSETS (NTA)
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
            <span *ngIf="customerInfo?.netTradingAssets" style="color:green"
                  title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.netTradingAssets" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemNetTradingAssetsTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              NET TRADING ASSETS (NTA)
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-nta-summary *ngIf="customerInfo?.netTradingAssets; else noNta" [fiscalYears]="fiscalYear"
                               [netTradingAssetsData]="customerInfo?.netTradingAssets">
              </app-nta-summary>
              <ng-template #noNta>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card #itemloanChecklist class="col-md-11 py-2">
            <a (click)="openModel(itemloanChecklistTemplate)" class="cursor info-label">
              <div class="row cursor">
                <div class="col-md-8">
                  <p class="custom-font">
                    CREDIT CHECKLIST</p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <span *ngIf="customerInfo?.creditChecklist" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.creditChecklist" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemloanChecklistTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css" [style]="customerInfo?.creditChecklist ? 'height: 100vh; overflow-y: scroll' : noChkLst">
            <nb-card-header>
              CREDIT CHECKLIST
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-credit-checklist-view
                      *ngIf="customerInfo?.creditChecklist; else noChkLst" [formData]="customerInfo?.creditChecklist"
                      [fromProfile]="false" [customerType]="customerInfo?.customerType"
              ></app-credit-checklist-view>
              <ng-template #noChkLst>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div *ngIf="customerInfo?.customerType === 'INDIVIDUAL' && customer?.isAgriculture" class="col-md-4">
        <div class="row">
          <nb-card #crgChecklist class="col-md-11 py-2">
            <a (click)="openModel(crgChecklistTemplate)" class="cursor info-label">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    CRG CHECKLIST <br><em class="sb-small"> CRG Checklist</em>
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <span *ngIf="customerInfo?.crgChecklist" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span *ngIf="!customerInfo?.crgChecklist" style="color:red" title="Status :Not Saved">
                <em class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #crgChecklistTemplate let-data let-ref="dialogRef">
          <nb-card class="container template-css" [style]="customerInfo?.crgChecklist ? 'height: 100vh; overflow-y: scroll' : noCrg">
            <nb-card-header>
              CRG CHECKLIST
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-crg
                      [formData]="customerInfo?.crgChecklist"
                      [fromProfile]="false"
                      [calendarType]="calendarType"
              ></app-crg>
              <ng-template #noCrg>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div *ngIf="customerInfo?.customerType === 'INSTITUTION' && isAgri" class="col-md-4">
        <div class="row">
          <nb-card #crgChecklist class="col-md-11 py-2">
            <a (click)="openModel(crgLongChecklistTemplate)" class="cursor info-label">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    CRG CHECKLIST <br><em class="sb-small"> CRG Checklist</em>
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <span *ngIf="customerInfo?.crgLongChecklist" style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span *ngIf="!customerInfo?.crgLongChecklist" style="color:red" title="Status :Not Saved">
                <em class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #crgLongChecklistTemplate let-data let-ref="dialogRef">
          <nb-card class="container template-css" [style]="customerInfo?.crgLongChecklist ? 'height: 100vh; overflow-y: scroll' : notPresent">
            <nb-card-header>
              CRG CHECKLIST
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body style="max-height: 90vh">
              <app-crg-long
                      [formData]="customerInfo?.crgLongChecklist"
                      [fromProfile]="false"
                      [calendarType]="calendarType"
              ></app-crg-long>
              <ng-template #notPresent>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card #itemReportingInfoLevel class="col-md-11 py-2">
            <a (click)="openModel(itemReportingInfoLevelTemplate)" class="cursor info-label">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    MIS/NRB REPORTING
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                <span style="color: green" title="Status : Saved">
                <em *ngIf="customerInfo?.reportingInfoLevels.length > 0"
                    class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color: red" title="Status : Not Saved">
                <em *ngIf="customerInfo?.reportingInfoLevels.length === 0"
                    class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemReportingInfoLevelTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              MIS/NRB REPORTING
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-report-summary *ngIf="customerInfo?.reportingInfoLevels.length > 0; else noMIS" [reportingInfoLevels]="customerInfo?.reportingInfoLevels">
              </app-report-summary>
              <ng-template #noMIS>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card #itemCommentsFromAccount class="col-md-11 py-2">
            <a (click)="openModel(itemCommentsFromAccountTemplate)" class="cursor info-label">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    NRB/STATUTORY AUDITORS/INTERNAL AUDITORS REMARKS AND THEIR STATUS
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                <span style="color: green" title="Status : Saved">
                <em *ngIf="((customerInfo?.data | jsonParse)?.data | jsonParse)?.previousComments"
                    class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color: red" title="Status : Not Saved">
                <em *ngIf="!((customerInfo?.data | jsonParse)?.data | jsonParse)?.previousComments"
                    class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemCommentsFromAccountTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              NRB/STATUTORY AUDITORS/INTERNAL AUDITORS REMARKS AND THEIR STATUS
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-nrb-statutory-remarks-status *ngIf="((customerInfo?.data | jsonParse)?.data | jsonParse)?.previousComments; else noNrb" [customerInfo]="customerInfo">
              </app-nrb-statutory-remarks-status>
              <ng-template #noNrb>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card #dataFromMultiBanking class="col-md-11 py-2">
            <a (click)="openModel(dataFromMultiBankingTemplate)" class="cursor info-label">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    BANKING ARRANGEMENT <br><em class="sb-small">
                  </em>
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                <span *ngIf="customerInfo?.multiBanking" style="color:green"
                      title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!customerInfo?.multiBanking" class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #dataFromMultiBankingTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css" [style]="customerInfo?.multiBanking ? 'height: 100vh; overflow-y: scroll' : noBanking">
            <nb-card-header>
              BANKING ARRANGEMENT
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-above-banking-arrangement-of-the-customer
                      *ngIf="customerInfo?.multiBanking else noBanking"
                      [multiBanking]="customerInfo?.multiBanking"
                      [isRetailCustomer]="isRetailCustomer"
                      [customerCategory]="customerInfo?.customerCategory"></app-above-banking-arrangement-of-the-customer>
              <ng-template #noBanking>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card #dataFromRiskAnalysis class="col-md-11 py-2">
            <a (click)="openModel(dataRiskAnalysisTemplate)" class="cursor info-label">
              <div class="row cursor">
                <div class="col-md-8">
                  <p class="custom-font">
                    RISK ANALYSIS
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <span *ngIf="customerInfo?.riskAnalysis" style="color:green"
                        title="Status : Saved">
                     <em class="fas fa-check-circle px-2"></em>
                  </span>
                  <span style="color:red" title="Status :Not Saved">
                       <em *ngIf="!customerInfo?.riskAnalysis"
                           class="fas fa-times-circle px-2"></em>
                     </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #dataRiskAnalysisTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css" [style]="customerInfo?.riskAnalysis ? 'height: 100vh; overflow-y: scroll' : noRskAnly">
            <nb-card-header>
              RISK ANALYSIS
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-above-risk-analysis *ngIf="customerInfo?.riskAnalysis; else noRskAnly"
                                       [customerInfo]="customerInfo"></app-above-risk-analysis>
              <ng-template #noRskAnly>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div class="col-md-4">
        <div class="row">
          <nb-card #itemReviewDates class="col-md-11 py-2">
            <a (click)="openModel(itemReviewDatesTemplate)" class="cursor info-label">
              <div class="row cursor">

                <div class="col-md-8">
                  <p class="custom-font">
                    REVIEW DATES
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
              <span *ngIf="(customerInfo?.data | jsonParse)?.reviewDate"
                    style="color:green" title="Status : Saved">
                <em class="fas fa-check-circle px-2"></em>
              </span>
                  <span style="color:red" title="Status :Not Saved">
                <em *ngIf="!(customerInfo?.data | jsonParse)?.reviewDate"
                    class="fas fa-times-circle px-2"></em>
              </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #itemReviewDatesTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              REVIEW DATES
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-above-review-of-credit-facilities *ngIf="(customerInfo?.data | jsonParse)?.reviewDate; else noReview"
                      [customerInfo]="customerInfo"></app-above-review-of-credit-facilities>
              <ng-template #noReview>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div *ngIf="customerInfo?.customerType === customerType?.INSTITUTION" class="col-md-4">
        <div class="row">
          <nb-card #dataFromSwot class="col-md-11 py-2">
            <a (click)="openModel(dataSwotTemplate)" class="cursor info-label">
              <div class="row cursor">
                <div class="col-md-8">
                  <p class="custom-font">
                    SWOT ANALYSIS
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <span style="color:green" title="Status : Saved">
                     <em *ngIf="customerInfo?.swotAnalysis" class="fas fa-check-circle px-2"></em>
                  </span>
                  <span style="color:red" title="Status :Not Saved">
                       <em *ngIf="!customerInfo?.swotAnalysis"
                           class="fas fa-times-circle px-2"></em>
                     </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #dataSwotTemplate let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              SWOT ANALYSIS
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-above-swot-analysis *ngIf="customerInfo?.swotAnalysis; else noSwot"
                                       [customerInfo]="customerInfo"></app-above-swot-analysis>
              <ng-template #noSwot>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
      <div *ngIf="customerInfo?.customerType === customerType?.INSTITUTION" class="col-md-4">
        <div class="row">
          <nb-card #crgCcbls class="col-md-11 py-2">
            <a (click)="openModel(crgCcbl)" class="cursor info-label">
              <div class="row cursor">
                <div class="col-md-8">
                  <p class="custom-font">
                    COUNTER PARTY RISK RATING <br><em class="sb-small"> CRG, ESRM</em>
                  </p>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <span style="color:green" title="Status : Saved">
                     <em *ngIf="customerInfo?.crgCcbl" class="fas fa-check-circle px-2"></em>
                  </span>
                  <span style="color:red" title="Status :Not Saved">
                       <em *ngIf="!customerInfo?.crgCcbl" class="fas fa-times-circle px-2"></em>
                     </span>
                </div>
              </div>
            </a>
          </nb-card>
        </div>
        <ng-template #crgCcbl let-data let-ref="dialogRef">
          <nb-card class="template-css">
            <nb-card-header>
              COUNTER PARTY RISK RATING
              <a (click)="ref.close()" aria-label="Close"
                 class="close cursor" data-dismiss="modal">
                      <span (click)="ref.close()" style="color: red">
                <em class="fas fa-times-circle px-2"></em>
              </span></a>
            </nb-card-header>
            <nb-card-body>
              <app-crg-ccbl *ngIf="customerInfo?.crgCcbl; else noCrgCcbl" [customerInfo]="customerInfo"
                            [fromProfile]="false"></app-crg-ccbl>
              <ng-template #noCrgCcbl>Not Available</ng-template>
            </nb-card-body>
          </nb-card>
        </ng-template>
      </div>
    </div>
  </nb-card-body>
</nb-card>
