<div class="card-body">
    <app-spinner *ngIf="spinner" class="d-flex justify-content-center"></app-spinner>
    <table class="table table-bordered table-hover"
           *ngIf="!spinner" style="max-height: 400px;overflow-y: auto">
        <thead>
        <tr>
            <th>S.N</th>
            <th>Name</th>
            <th>Branch</th>
            <th>Loan Facility</th>
            <th>Proposed Amount</th>
            <th>Type</th>
            <th>Status</th>
            <th>Created On</th>
        </tr>
        </thead>
        <tbody>
        <ng-container *ngFor="let model of loanHistories;let i=index">
            <tr (click)="model?.combinedLoans ? toggleArray[i].toggled = !toggleArray[i].toggled : onClick(model?.loanId, model.id)"
                class="cursor">
                <td>{{i + 1}}</td>
                <td>{{model?.customerInfoCustomerName}}</td>
                <td>{{model?.branchName}}</td>
                <td>{{model?.loanName}}</td>
                <td class="text-right">{{(model?.proposalProposedLimit | number) || 0}}</td>
                <td>{{loanType[model?.loanType] || model?.loanType}}</td>
                <td>{{model?.documentStatus}}</td>
                <td>{{model?.createdAt | date}}</td>
            </tr>
            <ng-container *ngIf="toggleArray[i].toggled">
                <tr (click)="onClick(single?.loanId, single.id)"
                    *ngFor="let single of model?.combinedLoans;let i=index"
                    class="cursor" style="background-color: #cccccc;">
                    <td>{{'abcdefghijklmnopqrstuvwxyz'.charAt(i)}}</td>
                    <td>{{single?.customerInfoCustomerName}}</td>
                    <td>{{single?.branchName}}</td>
                    <td>{{single?.loanName}}</td>
                    <td class="text-right">{{(single?.proposalProposedLimit | number) || 0}}</td>
                    <td>{{loanType[single?.loanType]}}</td>
                    <td>{{single?.documentStatus}}</td>
                    <td>{{single?.createdAt | date}}</td>
                </tr>
            </ng-container>

        </ng-container>
        </tbody>
    </table>
</div>
