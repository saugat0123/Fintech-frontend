<div [formGroup]="riskAnalysisForm">
    <table class="table table-condensed table-bordered table-responsive-md table-sm sb-small">
        <thead>
        <tr class="sb-bg-dark text-white">
            <th width="32%">Risk Types Perceived risks Mitigating factors</th>
            <th>Perceived risks</th>
            <th>Mitigating factors</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td style="vertical-align: middle;font-weight: bold; text-align: center">Industry Risks</td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="industryRisk"
                          placeholder="Industry Risks"></textarea>
            </td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="industryFactor"
                          placeholder="Industry Risk Factors"></textarea>
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle;font-weight: bold; text-align: center">Business Risks</td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="businessRisk"
                          placeholder="Business Risks"></textarea>
            </td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="businessFactor"
                          placeholder="Business Risk Factors"></textarea>
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle;font-weight: bold; text-align: center">Financial Risks</td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="financialRisk"
                          placeholder="Financial Risks"></textarea>
            </td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="financialFactor"
                          placeholder="Financial Risk Factors"></textarea>
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle;font-weight: bold; text-align: center">Management Risks</td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="managementRisk"
                          placeholder="Management Risks"></textarea>
            </td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="managementFactor"
                          placeholder="Management Risk Factors"></textarea>
            </td>
        </tr>
        <tr style="vertical-align: middle;font-weight: bold; text-align: center">
            <td>Succession Risks</td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="successionRisk"
                          placeholder="Succession Risks"></textarea>
            </td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="successionFactor"
                          placeholder="Succession Risk Factors"></textarea>
            </td>
        </tr>
        <tr style="vertical-align: middle;font-weight: bold; text-align: center">
            <td>Environmental/Climate Change/Safety issues</td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="environmentalIssues"
                          placeholder="Environmental/Climate Change/Safety issues"></textarea>
            </td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="environmentalIssuesFactor"
                          placeholder="Environmental/Climate Change/Safety issues"></textarea>
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle;font-weight: bold; text-align: center">Adverse features with other group concerns</td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="adverseFeatures"
                          placeholder="Adverse features with other group concerns"></textarea>
            </td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="adverseFeaturesFactor"
                          placeholder="Adverse features with other group concerns Factors"></textarea>
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle;font-weight: bold; text-align: center">Political Risk</td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="politicalRisk"
                          placeholder="Political Risks"></textarea>
            </td>
            <td>
                <textarea rows="4" class="form-control mt-1 mb-1"
                          formControlName="politicalFactor"
                          placeholder="Political Risk Factors"></textarea>
            </td>
        </tr>
        <ng-container *ngFor="let riskAnalysis of riskAnalysisForm?.get('riskAnalysisFreeText')['controls']; let i = index;"
                      formArrayName="riskAnalysisFreeText">
            <ng-container [formGroupName]="i">
                <tr>
                    <td style="vertical-align: middle;font-weight: bold; text-align: center">
                        <textarea rows="4" class="form-control mt-1 mb-1"
                                   formControlName="riskTypeName"
                                   placeholder="Risk Type"></textarea>
                    </td>
                    <td>
                        <textarea rows="4" class="form-control mt-1 mb-1"
                                  formControlName="perceiveRisk"
                                  placeholder="Perceive Risk"></textarea>
                    </td>
                    <td>
                        <textarea rows="4" class="form-control mt-1 mb-1"
                                  formControlName="mitigatingRisk"
                                  placeholder="Mitigating Factors"></textarea>
                    </td>
                    <td *ngIf="riskAnalysisForm.get('riskAnalysisFreeText') ['length'] > 0" width="2%"
                        style="vertical-align: middle;font-weight: bold; text-align: center">
                        <a nbButton status="primary" size="tiny" nbTooltip="Remove"
                           class="align-self-end btn btn-sm btn-danger btn-primary float-right cursor"
                           (click)="removeRiskAnalysis(i)">
                            <i class="fa fa-trash fa-1x"></i></a>
                    </td>
                </tr>
            </ng-container>
        </ng-container>
        </tbody>
    </table>
    <div class="py-2 d-flex justify-content-end">
        <input (click)="addRiskAnalysis()" class="btn btn-sm btn-flat float-right btn-primary"
               type="button" value="Add More Risk"/>
    </div>
    <div *ngIf="fromProfile" class="py-4 d-flex justify-content-end">
        <button (click)="onSubmit()" nbButton type="button">save</button>
    </div>
</div>
