<div class="row" *ngIf="formValue">
    <div class="col-md-12">
        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="12">Company Information</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Company Name</th>
                <th>Customer ID</th>
                <th>Establishment Date(AD/BS)</th>
                <th>Registration Number</th>
                <th>Issue Place</th>
                <th>PAN</th>
                <th>Business Type</th>
                <th *ngIf="client === clientName?.SHINE_RESUNGA">Address as per Legal Document</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="text-left pl-1">{{formValue?.companyName}}</td>
                <td class="text-right pr-1">{{customerInfo['customerCode'] || 'N/A'}}</td>
                <td class="text-left pl-1">{{formValue?.establishmentDate | date}} ({{formValue?.establishmentDate | engNepDate: false}})</td>
                <td class="text-right pr-1">{{formValue?.registrationNumber}}</td>
                <td class="text-left pl-1">{{formValue?.issuePlace}}</td>
                <td class="text-right pr1">{{formValue?.panNumber}}</td>
                <td class="text-left pl-1">{{formValue?.businessType}}</td>
                <td class="text-left pl-1" *ngIf="client === clientName?.SHINE_RESUNGA">{{companyJsonData?.addressLegalDocument}}</td>
            </tr>
            </tbody>
            <tr class="text-white sb-bg-dark">
                <th>Email</th>
                <th>Mobile Number</th>
                <th>LandLine Number</th>
                <th>Major products/Service</th>
                <th>Relationship Since(AD/BS)</th>
                <th>Client Type</th>
                <th>Sub Sector</th>
                <th *ngIf="client === clientName?.SHINE_RESUNGA">Obligor Code</th>
            </tr>
            <tr>
                <td class="text-left pl-1">{{formValue?.email}}</td>
                <td class="text-right pr-1">{{formValue?.contactNum}}</td>
                <td class="text-right pr-1">{{formValue?.landLineNumber}}</td>
                <td class="text-left pl-1">{{companyJsonData?.majorProductService}}</td>
                <td class="text-left pl-1">{{companyJsonData?.relationshipSince | date}} ({{companyJsonData?.relationshipSince | engNepDate: false}})</td>
                <td class="text-left pl-1">{{customerInfo['clientType']}}</td>
                <td class="text-left pl-1">{{customerInfo['subsectorDetail']}}</td>
                <td class="text-left pl-1" *ngIf="client === clientName?.SHINE_RESUNGA">{{customerInfo?.obligor}}</td>

            </tr>
        </table>
        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small" *ngIf="companyJsonData?.isAdditionalCompanyInfo">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="5">Additional registration/license information
                </th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <td>Type of Registration/License</td>
                <td>Name of license holder</td>
                <td>License Issued Date(AD/BS)</td>
                <td>License Expiry Date(AD/BS)</td>
                <td>License Issue Place</td>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="text-left pl-1">{{additionalInfoJsonData?.registrationType}}</td>
                <td class="text-left pl-1">{{additionalInfoJsonData?.licenseHolderName}}</td>
                <td class="text-left pl-1">{{additionalInfoJsonData?.licenseIssuedDate | date}} ({{additionalInfoJsonData?.licenseIssuedDate | engNepDate: false}})</td>
                <td class="text-left pl-1">{{additionalInfoJsonData?.licenseExpiryDate | date}} {{additionalInfoJsonData?.licenseExpiryDate | engNepDate: false}}</td>
                <td class="text-left pl-1">{{additionalInfoJsonData?.licenseIssuePlace}}</td>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Remarks</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="additionalInfoJsonData?.additionalInfoRemark | safeHtml"></td>
            </tr>
            </tbody>
        </table>
        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="7">Legal Status</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Corporate Structure</th>
                <th>Registered Office</th>
                <th>Registered Under Act</th>
                <th>Registration Date(AD/BS)</th>
                <th>PAN/VAT Registration Office</th>
                <th>PAN/VAT Registration Date(AD/BS)</th>
                <th>Registration Expiry Date(AD/BS)</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="text-left pl-1">{{formValue?.legalStatus?.corporateStructure?.name}}</td>
                <td class="text-left pl-1">{{registeredOffice[formValue?.legalStatus?.registeredOffice]}}</td>
                <td class="text-left pl-1">{{formValue?.legalStatus?.registeredUnderAct}}</td>
                <td class="text-right pr-1">{{formValue?.legalStatus?.registrationDate | date}} ({{formValue?.legalStatus?.registrationDate | engNepDate: false}})</td>
                <td class="text-left pl-1">{{formValue?.legalStatus?.panRegistrationOffice}}</td>
                <td class="text-left pl-1">{{formValue?.legalStatus?.panRegistrationDate | date}} ({{formValue?.legalStatus?.panRegistrationDate |engNepDate: false}})</td>
                <td class="text-left pl-1">{{formValue?.legalStatus?.registrationExpiryDate | date}} ({{formValue?.legalStatus?.registrationExpiryDate | engNepDate: false}})</td>
            </tr>
            </tbody>
        </table>
        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="7">Capital Information</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Authorized Capital</th>
                <th>Issued Capital</th>
                <th>Paid Up Capital</th>
                <ng-container *ngIf="client === clientName?.ICFC">
                    <th *ngIf="formValue?.capital?.totalCapital > 0">Total Capital</th>
                    <th *ngIf="formValue?.capital?.fixedCapital > 0">Fixed Capital</th>
                    <th *ngIf="formValue?.capital?.workingCapital > 0">Working Capital</th>
                </ng-container>
                <th>Number Of Shareholder</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="text-right pr-1">Rs. {{formValue?.capital?.authorizedCapital | currencyFormatter}}</td>
                <td class="text-right pr-1">Rs. {{formValue?.capital?.issuedCapital | currencyFormatter}}</td>
                <td class="text-right pr-1">Rs. {{formValue?.capital?.paidUpCapital | currencyFormatter}}</td>
                <ng-container *ngIf="client === clientName?.ICFC">
                    <td class="text-right pr-1" *ngIf="formValue?.capital?.totalCapital > 0">Rs. {{formValue?.capital?.totalCapital}}</td>
                    <td class="text-right pr-1" *ngIf="formValue?.capital?.fixedCapital > 0">Rs. {{formValue?.capital?.fixedCapital}}</td>
                    <td class="text-right pr-1" *ngIf="formValue?.capital?.workingCapital > 0">Rs. {{formValue?.capital?.workingCapital}}</td>
                </ng-container>
                <td class="text-right pr-1">{{formValue?.capital?.numberOfShareholder}}</td>
            </tr>
            </tbody>
        </table>
        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="6">Contact Person Details</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th class="sn">S.N</th>
                <th>Name</th>
                <th>Contact Number</th>
                <th>Email</th>
                <th>Functional Position</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let contactPerson of contactPersonJsonData; let i=index;">
                <td>{{i + 1}}</td>
                <td class="text-left pl-1">{{contactPerson?.contactName}}</td>
                <td class="text-right pr-1">{{contactPerson?.contactNumber}}</td>
                <td class="text-left pl-1">{{contactPerson?.contactEmail || '-'}}</td>
                <td class="text-left pl-1">{{contactPerson?.functionalPosition}}</td>
            </tr>
            </tbody>
        </table>
        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="5">Company Location Detail</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Address</th>
                <th>Ward</th>
                <th>Address Line 1</th>
                <th>Address Line 2</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="text-left pl-1">
                    ({{companyLocationData?.province?.name}},{{companyLocationData?.district?.name}}
                    , {{companyLocationData?.municipalityVdc?.name}})
                </td>
                <td class="text-right pr-1"> {{companyLocationData?.ward}}</td>
                <td class="text-left pl-1"> {{companyLocationData?.address1}}</td>
                <td class="text-left pl-1"> {{companyLocationData?.address2}}</td>
            </tr>
            </tbody>
        </table>
        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="8">Other Details</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Tax Clearance Till</th>
                <th>Tax Clearance Remark</th>
                <th *ngIf="client !== clientName?.SHINE_RESUNGA">Customer Negative List Checked</th>
                <th *ngIf="client !== clientName?.SHINE_RESUNGA">Negative List Remark</th>
                <th>Classification as per NRB directive</th>
                <th></th>
                <th></th>

            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="text-left pl-1">{{companyJsonData?.otherCompanyDetail?.taxClearanceTill}}</td>
                <td class="text-left pl-1">{{companyJsonData?.otherCompanyDetail?.taxClearanceRemark}}</td>
                <td class="text-left pl-1" *ngIf="client !== clientName?.SHINE_RESUNGA">{{companyJsonData?.otherCompanyDetail?.negativeList}}</td>
                <td class="text-left pl-1" *ngIf="client !== clientName?.SHINE_RESUNGA">{{companyJsonData?.otherCompanyDetail?.negativeListRemark}}</td>
                <td class="text-left pl-1">{{companyJsonData?.otherCompanyDetail?.ClassificationByNRB}}</td>

            </tr>
            </tbody>
        </table>

        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Loan Background</th>
            </tr>
            <tr>
                <td class="text-left pl-1"><span
                        [innerHTML]="proposalAllData?.borrowerInformation || 'N/A' | safeHtml"></span></td>
            </tr>
            <tr class="text-white sb-bg-dark" *ngIf="client !== clientName?.MEGA">
                <th>Purpose of Loan</th>
            </tr>
            <tr>
                <td class="text-left pl-1" *ngIf="client !== clientName?.MEGA" [innerHTML]="proposalAllData?.purposeOfLoan || 'N/A' | safeHtml"></td>
            </tr>
        </table>

<!--        Proposal Details-->
        <div class="row mt-1">
            <div class="col-md-12 sb-small">
                <p><strong>{{(summaryType === summaryTypeName.GAMMA && loanCategory === 'INDIVIDUAL') ? '3. Proposal Details' :
                    (summaryType === summaryTypeName.GAMMA && loanCategory === 'INSTITUTION') ? '2. Proposal Details' : 'Proposal Details'}}</strong> <em class="text-danger sb-small"> &nbsp;Bold row indicates
                    current loan proposal</em></p>
                <ul>
                    <li class="sb-medium"><i class="fas fa-check-circle"></i> = Approved
                        <i class="fas fa-times-circle"></i> = Not Approved,
                        <i class="text-round">N</i>ew Loan
                        <i class="text-round">R</i>enewed Loan
                        <i class="text-round">E</i>nhanced Loan
                        <i class="text-round">C</i>losure Loan
                        <i class="text-round">P</i>artial Settlement Loan
                        <i class="text-round">F</i>ull Settlement Loan
                        <i class="text-round">R/E</i>new With Enhancement
                    </li>
                    <li class="sb-medium"><span><sup>*</sup>  IR : Interest Rate ,<sup>*</sup> BR : Base Rate ,<sup>*</sup> PR : Premium Rate ,<sup>*</sup> COM : Commission ,<sup>*</sup> CM : Cash margin</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-12">
            <div class="row">

            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <table
                        class="table table-bordered table-responsive-md table-sm sb-small text-center">
                    <thead>
                    <tr class="sb-bg-dark text-white">
                        <th>Loan Facility(Created Date(AD/BS))</th>
                        <th>Existing Limit</th>
                        <th>Outstanding</th>
                        <th>Enhance</th>
                        <th>Settlement</th>
                        <th>Proposed Limit</th>
                        <!--        for non funded commision and cash margin combination to be view-->
                        <th>Existing Proposed INT/COM/CM/Existing Service Charge</th>
                        <th>Proposed INT/COM/CM</th>
                        <th>Service Charge</th>
                        <th>Limit Expiry/Tenure(AD/BS)</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let loan of customerAllLoanList"
                        [class.font-weight-bold]="proposalData?.id === loan?.proposal?.id">
                        <td class="text-left pl-1">
                            <ng-container
                                    *ngTemplateOutlet="tickCross; context: { $implicit: loan?.documentStatus}"></ng-container>
                            &nbsp;|&nbsp;
                            <ng-container
                                    *ngTemplateOutlet="loanTypeLetter; context: { $implicit: loan?.loanType }"></ng-container>
                            &nbsp;|&nbsp;
                            {{ loan?.loan?.name }} ({{ loan?.createdAt | date}}
                            ({{ loan?.createdAt | engNepDate: false }}))
                        </td>
                        <td class="text-right pr-1">
          <span *ngIf="(loan?.proposal?.data | jsonParse)?.existingLimit">
            Rs. {{(loan?.proposal?.data | jsonParse)?.existingLimit | currencyFormatter}}
          </span>
                            <span *ngIf="!(loan?.proposal?.data | jsonParse)?.existingLimit">-</span></td>
                        <td class="text-right pr-1">
          <span *ngIf="(loan?.proposal?.data | jsonParse)?.outStandingLimit">
            Rs. {{(loan?.proposal?.data | jsonParse)?.outStandingLimit | currencyFormatter}}</span>
                            <span *ngIf="!(loan?.proposal?.data | jsonParse)?.outStandingLimit">-</span>
                        </td>
                        <td class="text-right pr-1">
          <span *ngIf="(loan?.proposal?.data | jsonParse)?.enhanceLimitAmount">
            Rs. {{(loan?.proposal?.data | jsonParse)?.enhanceLimitAmount | currencyFormatter}}
          </span>
                            <span *ngIf="!(loan?.proposal?.data | jsonParse)?.enhanceLimitAmount">-</span>
                        </td>
                        <td class="text-right pr-1">
          <span *ngIf="(loan?.proposal?.data | jsonParse)?.settlementAmount">
            Rs. {{(loan?.proposal?.data | jsonParse)?.settlementAmount | currencyFormatter}}
          </span>
                            <span *ngIf="!(loan?.proposal?.data | jsonParse)?.settlementAmount">-</span></td>

                        <td class="text-right pr-1">Rs. {{loan?.proposal?.proposedLimit | currencyFormatter}}</td>
                        <td class="text-right pr-1">
          <span *ngIf="(loan?.loan?.isFundable) && ((loan?.proposal?.data | jsonParse)?.existInterestRate) > 0 ">
            IR: {{(loan?.proposal?.data | jsonParse)?.existInterestRate}} %
          </span>
                            <span *ngIf="!loan?.loan?.isFundable">
            <span *ngIf="((loan?.proposal?.data | jsonParse)?.existCashMarginMethod == 'FLAT') && ((loan?.proposal?.data | jsonParse)?.existCashMargin > 0)">
              CM: Rs. {{(loan?.proposal?.data | jsonParse)?.existCashMargin || 0 | currencyFormatter}} ,</span>
            <span *ngIf="((loan?.proposal?.data | jsonParse)?.existCashMarginMethod == 'PERCENT') && ((loan?.proposal?.data | jsonParse)?.existCashMargin > 0)">
              CM: {{ ((loan?.proposal?.data | jsonParse)?.existCashMargin || 0)}} %,</span>
            <span *ngIf="(loan?.proposal?.data | jsonParse)?.existCommissionPercentage > 0">
              COM:{{(loan?.proposal?.data | jsonParse)?.existCommissionPercentage || '0'}} %
            </span>
          </span>
                            <span *ngIf="(loan?.proposal?.data | jsonParse)?.serviceChargeMethod === 'FLAT' && (loan?.proposal?.data | jsonParse)?.existingServiceCharge !== null">
            SC: {{client === clientName?.SHINE_RESUNGA ? '' : 'Rs. '}} {{(loan?.proposal?.data | jsonParse)?.existingServiceCharge}}</span>
                            <span *ngIf="(loan?.proposal?.data | jsonParse)?.serviceChargeMethod === 'PERCENT' && (loan?.proposal?.data | jsonParse)?.existingServiceCharge !== null">
            SC: {{(loan?.proposal?.data | jsonParse)?.existingServiceCharge}} {{client === clientName?.SHINE_RESUNGA ? '' : ' %'}}</span>
                            <span *ngIf="((loan?.proposal?.data | jsonParse)?.existInterestRate === null)
          && ((loan?.proposal?.data | jsonParse)?.existCashMargin === null)
          && ((loan?.proposal?.data | jsonParse)?.existingServiceCharge === null)
          && ((loan?.proposal?.data | jsonParse)?.existCommissionPercentage === null)">-</span>
                        </td>
                        <td>
          <span *ngIf="loan?.loan?.isFundable">
            BR : {{ (loan?.proposal?.data | jsonParse)?.baseRate}} %,
            PR : {{ (loan?.proposal?.data | jsonParse)?.premiumRateOnBaseRate}} %,
            IR : {{(loan?.proposal?.data | jsonParse)?.interestRate}} %
          </span>
                            <span *ngIf="!loan?.loan?.isFundable">
            <span *ngIf="(loan?.proposal?.data | jsonParse)?.cashMarginMethod == 'FLAT'">
              CM: Rs.  {{ ((loan?.proposal?.data | jsonParse)?.cashMargin || 0) | currencyFormatter}} ,</span>
            <span *ngIf="(loan?.proposal?.data | jsonParse)?.cashMarginMethod == 'PERCENT'">
              CM: {{ ((loan?.proposal?.data | jsonParse)?.cashMargin)}} %,</span>
            COM:{{(loan?.proposal?.data | jsonParse)?.commissionPercentage}} %</span>
                        </td>
                        <td class="text-right pr-1">
          <span *ngIf="(loan?.proposal?.data | jsonParse)?.serviceChargeMethod === 'FLAT' && (loan?.proposal?.data | jsonParse)?.serviceCharge !== ''">
            SC: {{client === clientName?.SHINE_RESUNGA ? '' : 'Rs. '}}{{(loan?.proposal?.data | jsonParse)?.serviceCharge}}</span>
                            <span *ngIf="(loan?.proposal?.data | jsonParse)?.serviceChargeMethod === 'PERCENT' && (loan?.proposal?.data | jsonParse)?.serviceCharge !== ''">
            SC: {{(loan?.proposal?.data | jsonParse)?.serviceCharge}} {{client === clientName?.SHINE_RESUNGA ? '' : ' %'}}</span>
                            <span *ngIf="(loan?.proposal?.data | jsonParse)?.serviceCharge === ''">-</span>
                        </td>
                        <td width="150px" class="text-left pl-1">
                            <span *ngIf="!loan.proposal.limitExpiryMethod">-</span>
                            <span *ngIf="loan.proposal.limitExpiryMethod === 'ABSOLUTE'">{{loan.proposal?.dateOfExpiry | date}}
                                ({{loan.proposal?.dateOfExpiry | engNepDate: false}})</span>
                            <span *ngIf="loan.proposal.limitExpiryMethod === 'CUSTOM'">{{loan.proposal?.duration}} {{loan.proposal?.frequency}} {{loan.proposal?.condition}}</span>
                        </td>
                    </tr>
                    <tr *ngFor="let loanDto of customerLoanDtoList"
                        [class.font-weight-bold]="proposalData?.id === loanDto?.proposal?.id">
                        <td class="text-left pl-1">
                            <ng-container
                                    *ngTemplateOutlet="tickCross; context: { $implicit: loanDto?.documentStatus}"></ng-container>
                            &nbsp;|&nbsp;
                            <ng-container
                                    *ngTemplateOutlet="loanTypeLetter; context: { $implicit: loanDto?.loanType }"></ng-container>
                            &nbsp;|&nbsp;
                            {{ loanDto?.name }} ({{ loanDto?.createdAt | date}}
                            ({{ loanDto?.createdAt | engNepDate: false }}))
                        </td>
                        <td class="text-right pr-1">
                    <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.existingLimit">
                        Rs. {{(loanDto?.proposal?.data | jsonParse)?.existingLimit | currencyFormatter}}
                    </span>
                            <span *ngIf="!(loanDto?.proposal?.data | jsonParse)?.existingLimit">-</span></td>
                        <td class="text-right pr-1">
                    <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.outStandingLimit">
                        Rs. {{(loanDto?.proposal?.data | jsonParse)?.outStandingLimit | currencyFormatter}}
                    </span>
                            <span *ngIf="!(loanDto?.proposal?.data | jsonParse)?.outStandingLimit">-</span>
                        </td>
                        <td class="text-right pr-1">
                    <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.enhanceLimitAmount">
                        Rs. {{(loanDto?.proposal?.data | jsonParse)?.enhanceLimitAmount | currencyFormatter}}
                    </span>
                            <span *ngIf="!(loanDto?.proposal?.data | jsonParse)?.enhanceLimitAmount">-</span>
                        </td>
                        <td class="text-right pr-1">
                    <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.settlementAmount">
                        Rs. {{(loanDto?.proposal?.data | jsonParse)?.settlementAmount | currencyFormatter}}
                    </span>
                            <span *ngIf="!(loanDto?.proposal?.data | jsonParse)?.settlementAmount">-</span>
                        </td>

                        <td class="text-right pr-1">Rs. {{loanDto?.proposal?.proposedLimit | currencyFormatter}}</td>

                        <td class="text-right pr-1">
                    <span *ngIf="(loanDto.isFundable) && ((loanDto?.proposal?.data | jsonParse)?.existInterestRate) > 0 ">
                        IR: {{(loanDto?.proposal?.data | jsonParse)?.existInterestRate}} %
                    </span>
                            <span *ngIf="!loanDto.isFundable">
                        <span *ngIf="((loanDto?.proposal?.data | jsonParse)?.existCashMarginMethod == 'FLAT') && ((loanDto?.proposal?.data | jsonParse)?.existCashMargin > 0)">
                            CM: Rs. {{(loanDto?.proposal?.data | jsonParse)?.existCashMargin || 0 | currencyFormatter}}
                            ,</span>
                        <span *ngIf="((loanDto?.proposal?.data | jsonParse)?.existCashMarginMethod == 'PERCENT') && ((loanDto?.proposal?.data | jsonParse)?.existCashMargin > 0)">
                            CM: {{ ((loanDto?.proposal?.data | jsonParse)?.existCashMargin || 0)}} %,</span>
                        <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.existCommissionPercentage > 0">
                            COM:{{(loanDto?.proposal?.data | jsonParse)?.existCommissionPercentage || '0'}} %
                        </span>
                    </span>
                            <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.serviceChargeMethod === 'FLAT' && (loanDto?.proposal?.data | jsonParse)?.existingServiceCharge !== null">
                       SC: {{client === clientName?.SHINE_RESUNGA ? '' : 'Rs. '}} {{(loanDto?.proposal?.data | jsonParse)?.existingServiceCharge}}</span>
                            <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.serviceChargeMethod === 'PERCENT' && (loanDto?.proposal?.data | jsonParse)?.existingServiceCharge !== null">
                            SC: {{(loanDto?.proposal?.data | jsonParse)?.existingServiceCharge}} {{client === clientName?.SHINE_RESUNGA ? '' : ' %'}}</span>
                            <span *ngIf="((loanDto?.proposal?.data | jsonParse)?.existInterestRate === null)
                    && ((loanDto?.proposal?.data | jsonParse)?.existCashMargin === null)
                    && ((loanDto?.proposal?.data | jsonParse)?.existingServiceCharge === null)
                    && ((loanDto?.proposal?.data | jsonParse)?.existCommissionPercentage === null)">-</span>
                        </td>

                        <td>
                    <span *ngIf="loanDto.isFundable">
                        BR : {{ (loanDto?.proposal?.data | jsonParse)?.baseRate}} %,
                        PR : {{ (loanDto?.proposal?.data | jsonParse)?.premiumRateOnBaseRate}} %,
                        IR : {{(loanDto?.proposal?.data | jsonParse)?.interestRate}} %
                    </span>
                            <span *ngIf="!loanDto.isFundable">
                        <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.cashMarginMethod == 'FLAT'">
                            CM: Rs.  {{ ((loanDto?.proposal?.data | jsonParse)?.cashMargin || 0) | currencyFormatter}}
                            ,</span>
                        <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.cashMarginMethod == 'PERCENT'">
                            CM: {{ ((loanDto?.proposal?.data | jsonParse)?.cashMargin)}} %,</span>
                        COM:{{(loanDto?.proposal?.data | jsonParse)?.commissionPercentage}} %</span>
                        </td>

                        <td class="text-right pr-1">
                    <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.serviceChargeMethod === 'FLAT' && (loanDto?.proposal?.data | jsonParse)?.serviceCharge !== ''">
                        SC: {{client === clientName?.SHINE_RESUNGA ? '' : 'Rs. '}}{{(loanDto?.proposal?.data | jsonParse)?.serviceCharge}}</span>
                            <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.serviceChargeMethod === 'PERCENT' && (loanDto?.proposal?.data | jsonParse)?.serviceCharge !== ''">
                        SC: {{(loanDto?.proposal?.data | jsonParse)?.serviceCharge}} {{client === clientName?.SHINE_RESUNGA ? '' : ' %'}}</span>
                            <span *ngIf="(loanDto?.proposal?.data | jsonParse)?.serviceCharge === '' || (loanDto?.proposal?.data | jsonParse)?.serviceCharge === null">-</span>
                        </td>

                        <!--        <td>{{(loan?.proposal?.data | jsonParse)?.tenureDurationInMonths}} month</td>-->
                        <!--        <td>{{(loan?.proposal?.data | jsonParse)?.repaymentMode}}</td>-->
                        <!--        <td>Rs. {{(loan?.proposal?.data | jsonParse)?.installmentAmount | currencyFormatter}}</td>-->
                        <!--        <td>Rs. {{(loan?.proposal?.data | jsonParse)?.interestAmount | currencyFormatter}}</td>-->
                        <!--        <td>{{(loan?.proposal?.data | jsonParse)?.moratoriumPeriod }} months</td>-->
                        <!--        <td>Rs. {{(loan?.proposal?.data | jsonParse)?.prepaymentCharge | currencyFormatter}}</td>-->
                        <td width="150px" class="text-left pl-1">
                            <span *ngIf="!loanDto.proposal.limitExpiryMethod">-</span>
                            <span *ngIf="loanDto.proposal.limitExpiryMethod === 'ABSOLUTE'">{{loanDto.proposal?.dateOfExpiry | date}}
                                ({{loanDto.proposal?.dateOfExpiry | engNepDate: false}})</span>
                            <span *ngIf="loanDto.proposal.limitExpiryMethod === 'CUSTOM'">{{loanDto.proposal?.duration}} {{loanDto.proposal?.frequency}} {{loanDto.proposal?.condition}}</span>
                        </td>
                    </tr>
                    <tr class="sb-bg-secondary text-white">
                        <td class="text-left pl-1"><strong>Funded</strong></td>
                        <td class="text-right pr-1">
                            Rs. {{ (getTotalFundable('existingLimit', true, customerAllLoanList)) | currencyFormatter }}</td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotalFundable('outStandingLimit', true, customerAllLoanList) | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotalFundable('enhanceLimitAmount', true, customerAllLoanList) | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotalFundable('settlementAmount', true, customerAllLoanList) | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">
                            Rs. {{ getTotalFundable('proposedLimit', true, customerAllLoanList) | currencyFormatter }}</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr class="sb-bg-secondary text-white">
                        <td class="text-left pl-1"><strong>Non-Funded</strong></td>
                        <td class="text-right pr-1">
                            Rs. {{ (getTotalFundable('existingLimit', false, customerAllLoanList) | currencyFormatter)}}</td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotalFundable('outStandingLimit', false, customerAllLoanList) | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotalFundable('enhanceLimitAmount', false, customerAllLoanList) | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotalFundable('settlementAmount', false, customerAllLoanList) | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">
                            Rs. {{ getTotalFundable('proposedLimit', false, customerAllLoanList) | currencyFormatter }}</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr class="sb-bg-secondary text-white">
                        <td class="text-left pl-1"><strong>Total</strong></td>

                        <td class="text-right pr-1">Rs. {{ getTotal('existingLimit') | currencyFormatter }}</td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotal('outStandingLimit') | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotal('enhanceLimitAmount') | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">
          <span>
            Rs. {{ getTotal('settlementAmount') | currencyFormatter }}
          </span>
                        </td>
                        <td class="text-right pr-1">Rs. {{ getTotal('proposedLimit') | currencyFormatter }}</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <ng-template #tickCross let-status>
            <i *ngIf="status === DocStatus[DocStatus.APPROVED]" class="fas fa-check-circle"></i>
            <i *ngIf="status !== DocStatus[DocStatus.APPROVED]" class="fas fa-times-circle"></i>
        </ng-template>
        <ng-template #loanTypeLetter let-loanType>
            <i *ngIf="loanType === EnumUtils.getEnum(LoanType, LoanType.NEW_LOAN)" class="text-round">N</i>
            <i *ngIf="loanType === EnumUtils.getEnum(LoanType, LoanType.RENEWED_LOAN)"
               class="text-round">R</i>
            <i *ngIf="loanType === EnumUtils.getEnum(LoanType, LoanType.ENHANCED_LOAN)"
               class="text-round">E</i>
            <i *ngIf="loanType === EnumUtils.getEnum(LoanType, LoanType.CLOSURE_LOAN)"
               class="text-round">C</i>
            <i *ngIf="loanType === EnumUtils.getEnum(LoanType, LoanType.PARTIAL_SETTLEMENT_LOAN)"
               class="text-round">P</i>
            <i *ngIf="loanType === EnumUtils.getEnum(LoanType, LoanType.FULL_SETTLEMENT_LOAN)"
               class="text-round">F</i>
            <i *ngIf="loanType === EnumUtils.getEnum(LoanType, LoanType.RENEW_WITH_ENHANCEMENT)"
               class="text-round">R/E</i>
        </ng-template>

        <div class="row mb-2">
            <div class="col-md-12 sb-medium">
                <strong>Total Proposed Limit (in words):</strong>
                {{ getTotal('proposedLimit') | currencyFormatter}}
                (Rs. {{ getTotal('proposedLimit') | inWords | titlecase }} Only /-)
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <table class="table table-sm table-condensed table-bordered table-responsive-md text-center table-sm sb-small ">
                    <tr class="text-white sb-bg-dark">
                        <th *ngIf="client === clientName?.SHINE_RESUNGA && isRevolving">Interest and Principal Repayment
                            Frequency
                        </th>
                        <th *ngIf="isFixedDeposit">Coupon Rate</th>
                        <th *ngIf="isFixedDeposit">Premium On Coupon Rate</th>
                        <th *ngIf="loanNatureSelected && fundableNonFundableSelcted && isFundable && isRevolving && client !== clientName?.SHINE_RESUNGA">
                            Tenure of each deal
                        </th>
                        <th *ngIf="((client === clientName?.ICFC) && (proposalAllData?.prepaymentCharge > 0)) && ((loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isShare || isGeneral)">
                            Prepayment Charge
                        </th>
                        <th *ngIf="((client !== clientName?.SHINE_RESUNGA) && (client !== clientName?.ICFC)) && ((loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isShare || isGeneral)">
                            Prepayment Charge
                        </th>
                        <th>Collateral requirement (in%)</th>
                    </tr>
                    <tr>
                        <td *ngIf="client === clientName?.SHINE_RESUNGA && isRevolving"
                            class="text-left pl-1">{{proposalAllData?.interestPrincipalRepayment}}</td>
                        <th *ngIf="isFixedDeposit" class="text-right pr-1">{{proposalAllData?.couponRate}}</th>
                        <th *ngIf="isFixedDeposit" class="text-right pr-1">{{proposalAllData?.premiumOnCouponRate}}</th>
                        <td *ngIf="loanNatureSelected && fundableNonFundableSelcted && isFundable && isRevolving && client !== clientName?.SHINE_RESUNGA"
                            class="text-right pr-1">{{proposalAllData?.tenorOfEachDeal || 'N/A'}}</td>
                        <td *ngIf="((client === clientName?.ICFC) && (proposalAllData?.prepaymentCharge > 0)) && ((loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isShare || isGeneral)"
                            class="text-right pr-1">{{proposalAllData?.prepaymentCharge}}%
                        </td>
                        <td *ngIf="((client !== clientName?.SHINE_RESUNGA) && (client !== clientName?.ICFC)) && ((loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isShare || isGeneral)"
                            class="text-right pr-1">{{proposalAllData?.prepaymentCharge}}%
                        </td>
                        <td class="text-right pr-1">{{proposalAllData?.collateralRequirement}}%</td>
                    </tr>
                </table>
                <table class="table table-sm table-condensed table-bordered table-responsive-md text-center table-sm sb-small ">
                    <tr class="text-white sb-bg-dark">
                        <th *ngIf="(loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isShare || isGeneral">
                            Tenure Duration in Month
                        </th>
                        <th *ngIf="(client !== clientName?.ICFC || !showInterestAmount) && ((loanNatureSelected && fundableNonFundableSelcted &&  isFundable &&  isTerminating) || isVehicle || isShare || isGeneral)">
                            Repayment Mode
                        </th>
                        <th *ngIf="showInstallmentAmount  && ((loanNatureSelected && fundableNonFundableSelcted &&  isFundable &&  isTerminating) || isVehicle || isShare || isGeneral)">
                            Installment Amount
                        </th>
                        <th *ngIf="!showInstallmentAmount && (client !== clientName?.ICFC || !showInterestAmount) && ((loanNatureSelected && isFundable && fundableNonFundableSelcted
            && isTerminating) || (isVehicle || isShare || isGeneral))">Interest Amount
                        </th>
                        <th *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))">
                            Interest Payment
                        </th>
                        <th *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))">
                            Principal Payment
                        </th>
                        <th *ngIf="showRepaymentMode && (client !== clientName?.ICFC || !showInterestAmount) && ((loanNatureSelected && isFundable && fundableNonFundableSelcted &&
            isTerminating) || (isVehicle || isShare || isGeneral))">Principal Amount
                        </th>
                        <th *ngIf="showPrincipalAmount && (client !== clientName?.ICFC || !showInterestAmount) && ((loanNatureSelected && isFundable && fundableNonFundableSelcted &&
            isTerminating) || (isVehicle || isShare || isGeneral))">Principal Amount
                        </th>
                        <th *ngIf="(loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isGeneral">
                            Moratorium Period (Month)
                        </th>
                        <th *ngIf="(client !== clientName?.SHINE_RESUNGA) && ((loanNatureSelected && fundableNonFundableSelcted && isFundable && (isTerminating || isRevolving)) || isVehicle || isShare || isGeneral)">
                            Commitment Fee
                        </th>
                        <th *ngIf="(client !== clientName?.SHINE_RESUNGA) && (client !== clientName?.MEGA) &&(checkedData?.swapChargeChecked)">
                            Swap Charge
                        </th>
                        <th *ngIf="(client !== clientName?.MEGA) && checkedData?.subsidizedLoanChecked">Subsidy
                            Rate(%)
                        </th>
                        <th *ngIf="checkedData?.subsidizedLoanChecked && (client !== clientName?.MEGA)">Subsidized Loan
                            Type
                        </th>
                        <th *ngIf="checkedData?.subsidizedLoanChecked && (client !== clientName?.MEGA) && proposalAllData?.others !== null">
                            Others
                        </th>
                    </tr>
                    <tr>
                        <td *ngIf="(loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isShare || isGeneral"
                            class="text-right pr-1">{{proposalAllData?.tenureDurationInMonths || 'N/A'}}</td>
                        <td *ngIf="(client !== clientName?.ICFC || !showInterestAmount) && ((loanNatureSelected && fundableNonFundableSelcted &&  isFundable &&  isTerminating) || isVehicle || isShare || isGeneral)"
                            class="text-left pl-1">{{proposalAllData?.repaymentMode || 'N/A'}}</td>
                        <td *ngIf="showInstallmentAmount  && ((loanNatureSelected && fundableNonFundableSelcted && isTerminating  && isFundable) || ( isVehicle || isShare || isGeneral))"
                            class="text-right pr-1">Rs. {{proposalAllData?.installmentAmount | currencyFormatter}}</td>
                        <td *ngIf="!showInstallmentAmount && (client !== clientName?.ICFC || !showInterestAmount) && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"
                            class="text-right pr-1">Rs. {{proposalAllData?.interestAmount | currencyFormatter}}</td>
                        <td *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"
                            class="text-left pl-1">{{proposalAllData?.repaymentModeInterest}}</td>
                        <td *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"
                            class="text-left pl-1">{{proposalAllData?.repaymentModePrincipal}}</td>
                        <td *ngIf="showRepaymentMode && (client !== clientName?.ICFC || !showInterestAmount) && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"
                            class="text-right pr-1">Rs.{{proposalAllData?.principalAmount}}</td>
                        <td *ngIf="showPrincipalAmount && (client !== clientName?.ICFC || !showInterestAmount) && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"
                            class="text-right pr-1">Rs.{{proposalAllData?.principalAmount}}</td>
                        <td *ngIf="(loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isGeneral"
                            class="text-right pr-1">{{proposalAllData?.moratoriumPeriod}}</td>
                        <td *ngIf="(client !== clientName?.SHINE_RESUNGA) && ((loanNatureSelected && fundableNonFundableSelcted && isFundable && (isTerminating || isRevolving)) || isVehicle || isShare || isGeneral)"
                            class="text-right pr-1">{{proposalAllData?.commitmentFee || 0}} %
                        </td>
                        <td *ngIf="(client !== clientName?.SHINE_RESUNGA) && (client !== clientName?.MEGA) &&(checkedData?.swapChargeChecked)">
                            <div *ngIf="proposalAllData.swapChargeMethod === 'FLAT'; else percentage"
                                 class="text-right pr-1">Rs. {{proposalAllData.swapCharge | currencyFormatter}}</div>
                            <ng-template #percentage>
                                <div class="text-right pr-1">{{proposalAllData.swapCharge}} %</div>
                            </ng-template>
                        </td>
                        <td *ngIf="checkedData?.subsidizedLoanChecked">
                            <div class="text-right pr-1"
                                 *ngIf="client === clientName?.ICFC; else otherBank">{{calculateInterestRate()}} %
                            </div>
                            <ng-template #otherBank>
                                <div class="text-right pr-1"
                                     *ngIf="((client !== clientName?.ICFC) && (client !== clientName?.MEGA))">{{proposalAllData?.subsidizedLoan}}
                                    %
                                </div>
                            </ng-template>
                        </td>
                        <td class="text-left pl-1"
                            *ngIf="checkedData?.subsidizedLoanChecked && (client !== clientName?.MEGA)">{{proposalAllData?.subsidyLoanType}}</td>
                        <td class="text-left pl-1"
                            *ngIf="checkedData?.subsidizedLoanChecked && (client !== clientName?.MEGA) && proposalAllData?.others !== null">{{proposalAllData?.others}}</td>
                    </tr>
                </table>
            </div>
        </div>

        <table class="table table-sm table-condensed table-bordered table-responsive-md text-center table-sm sb-small" >
            <tr class="text-white sb-bg-dark">
                <th>
                    <div *ngIf="(loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isShare || isGeneral; else commitmentDescription">
                        Prepayment/Commitment/Swap Charge Description</div>
                    <ng-template #commitmentDescription>
                        <div *ngIf="(loanNatureSelected && fundableNonFundableSelcted && isFundable && (isTerminating || isRevolving)) || isVehicle || isShare || isGeneral; else swapChargeDescription">
                            Commitment/Swap Charge Description</div>
                    </ng-template>
                    <ng-template #swapChargeDescription>
                        Swap Charge Description
                    </ng-template>
                </th>
            </tr>
            <tr *ngIf="client !== clientName?.MEGA">
                <td class="text-left pl-1"><span [innerHTML]="proposalAllData?.prepaymentSwapCommitment || 'N/A' | safeHtml"></span> </td>
            </tr>
        </table>

        <table *ngIf="productUtils.CBS_ENABLE"
               class="table table-sm table-condensed table-bordered table-responsive-md text-center table-sm sb-small ">
            <tr class="text-white sb-bg-dark">
                <th>Disbursement Criteria </th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="proposalAllData?.disbursementCriteria | safeHtml"></td>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Repayment</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="proposalAllData?.repayment || 'N/A' | safeHtml"></td>
            </tr>
        </table>

        <div *ngIf="productUtils.CBS_ENABLE">
            <div class="row mt-5">
                <div class="col-md-12">
                    <p><strong>Group Details</strong>
                    </p>
                </div>
                <div class="col-md-12">
                    <app-cbs-table [customerInfo]="loanDataHolder.loanHolder"
                                   *ngIf="loanDataHolder"></app-cbs-table>
                </div>
            </div>
        </div>
        <div class="mt-2">
        <app-security-view *ngIf="loanDataHolder?.loanHolder?.security" [security]="loanDataHolder?.loanHolder?.security"
                           [shareSecurityData]="loanDataHolder?.loanHolder?.shareSecurity"
                           [securityId]="securityId"
                           (downloadSiteVisitDocument)="checkSiteVisitDocument($event)"></app-security-view>
        </div>

        <table class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Company Background</th>
            </tr>
            <tr>
                <td class="text-left pl-1"><span [innerHTML]="companyJsonData?.companyBackground | safeHtml"></span></td>
            </tr>
        </table>

        <table class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Business Objective</th>
            </tr>
            <tr class="text-left pl-1" [innerHTML]="companyJsonData?.businessObjective"></tr>
        </table>

        <table *ngIf="(summaryType === summaryTypeName?.GENERAL) || (summaryType === summaryTypeName?.ALPHA)"
               class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Groups background</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.groupsBackGround | safeHtml"></td>
            </tr>
        </table>

        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th>Sister Concern</th>
            </tr>
            <tr>
                <td class="text-left pl-1">{{companyJsonData?.sisterConcern}}</td>
            </tr>
            </thead>
        </table>

        <table class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="100%">Information of Proprietor/Shareholder/Partner with holder %</th>
            </tr>
            </thead>
            <ng-container *ngFor="let holder of companyJsonData.proprietorList;let i =index">
                <tr class="text-white sb-bg-dark">
                    <th class="sn">S.N</th>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Contact No</th>
                    <th>Share %</th>
                    <th>Address</th>
                    <th>Ward No.</th>
                    <th>Address Line 1</th>
                    <th>Address Line 2</th>
                    <th>Net Worth</th>
                </tr>
                <tr>
                    <td>{{i+1}}</td>
                    <td class="text-left pl-1"><strong>{{holder?.name}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.type}}</strong></td>
                    <td class="text-right pr-1"><strong>{{holder?.contactNo}}</strong></td>
                    <td class="text-right pr-1"><strong>{{holder?.share}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.province?.name}}, {{holder?.district?.name}}, {{holder?.municipalityVdc?.name}}</strong></td>
                    <td class="text-right pr-1"><strong>{{holder?.holderPercentWardNumber}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.addressLine1}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.addressLine2}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.netWorth}}</strong></td>
                </tr>
                <tr class="text-white sb-bg-dark" *ngIf="client !== clientName.MEGA">
                    <th></th>
                    <th>Father's Name</th>
                    <th>Grandfather's Name</th>
                    <th>Citizenship Number</th>
                    <th>Issued date(AD/BS)</th>
                    <th>Issued place</th>
                    <th>Date of birth(AD/BS)</th>
                </tr>
                <tr *ngIf="client !== clientName.MEGA">
                    <td></td>
                    <td class="text-left pl-1"><strong>{{holder?.fatherName}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.grandFatherName}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.citizenshipNum}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.issuedDate | date}} ({{holder?.issuedDate|engNepDate: false}})</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.issuedPlace}}</strong></td>
                    <td class="text-left pl-1"><strong>{{holder?.dateOfBirth | date}} ({{holder?.dateOfBirth|engNepDate: false}})</strong></td>
                </tr>

                <tr *ngIf="client != clientName.MEGA">
                    <td colspan="9">
                        <br>
                        <table class="table border-dark">
                            <thead class="sb-bg-dark text-white">
                            <tr class="sb-bg-secondary text-white">
                                <th colspan="10">Family details of {{holder?.name}}</th>
                            </tr>
                            <tr>
                                <th class="sn">S.N</th>
                                <th>Owner Relationship</th>
                                <th>Relation Name</th>
                                <th *ngIf="client === clientName.SHINE_RESUNGA">Age</th>
                                <th>Citizenship Number</th>
                                <th>Issued Location</th>
                                <th>Issued Date(AD/BS)</th>
                                <th>Mobile Number</th>
                                <th>Address</th>
                                <th>Remarks</th>
                            </tr>
                            </thead>
                            <tbody>
                            <ng-container *ngFor="let d of holder?.kycInfo?.ownerKycDetails; let j = index">
                                <tr>
                                    <td>{{j+1}}</td>
                                    <td class="text-left pl-1">{{d?.ownerRelationship ? d?.ownerRelationship : 'N/A' }}</td>
                                    <td class="text-left pl-1">{{d?.relationName ? d?.relationName : 'N/A' }}</td>
                                    <td *ngIf="client === clientName.SHINE_RESUNGA" class="text-right pr-1">{{d?.age || 'N/A' }}</td>
                                    <td class="text-right pr-1">{{d?.citizenshipNumber ? d?.citizenshipNumber : 'N/A' }}</td>
                                    <td class="text-left pl-1">{{d?.issuedLocation ? d?.issuedLocation : 'N/A' }}</td>
                                    <td class="text-left pl-1">{{d?.issuedDate ? (d?.issuedDate | date) : 'N/A'}} ({{d?.issuedDate ? (d?.issuedDate | engNepDate: false) : 'N/A'}})</td>
                                    <td class="text-right pr-1">{{d?.mobileNumber ? d?.mobileNumber : 'N/A' }}</td>
                                    <td class="text-left pl-1">{{d?.address ? d?.address : 'N/A'}}</td>
                                    <td class="text-left pl-1">{{d?.remark ? d?.remark : 'N/A'}}</td>
                                </tr>
                            </ng-container>
                            </tbody>
                        </table>
                </tr>
            </ng-container>
        </table>

        <app-guarantor-view *ngIf="loanDataHolder?.taggedGuarantors?.length > 0"
                            [guarantorData]="loanDataHolder?.taggedGuarantors"></app-guarantor-view>
        <!-- todo uncomment it and verify-->
       <!-- <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="8">Shareholder KYC Details</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>S.N</th>
                <th>Relation</th>
                <th>Name</th>
                <th>Citizenship No</th>
                <th>Issued District</th>
                <th>Issued Date</th>
                <th>Contact No</th>
                <th>Address</th>
            </tr>
            </thead>
            <tbody *ngFor="let shareholderKyc of formValue?.shareholderKycList; let i=index;">
            <tr>
                <td>{{i + 1}}</td>
                <td>{{shareholderKyc?.shareholderRelationship}}</td>
                <td>{{shareholderKyc?.relationName}}</td>
                <td>{{shareholderKyc?.citizenshipNumber}}</td>
                <td>{{shareholderKyc?.district?.name}}</td>
                <td>{{shareholderKyc?.citizenshipIssuedDate | date}}</td>
                <td>{{shareholderKyc?.mobileNumber}}</td>
                <td>{{shareholderKyc?.shareholderKycAddress}}</td>
            </tr>
            </tbody>
        </table>-->
        <table class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="8">Management Team</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th class="sn">S.N</th>
                <th>Name</th>
                <th>Designation</th>
                <th>Address as per Legal Document</th>
            </tr>
            </thead>
            <tbody *ngFor="let management of companyJsonData.managementTeamList; let i=index">
            <tr>
                <td>{{i + 1}}</td>
                <td class="text-left pl-1">{{management?.name}}</td>
                <td class="text-left pl-1">{{management?.designation}}</td>
                <td class="text-left pl-1">{{management?.companyLegalDocumentAddress}}</td>
            </tr>

            </tbody>
            <tr class="text-white sb-bg-dark">
                <th colspan="4">Note</th>
            </tr>
            <tr>
                <td colspan="4" class="text-left pl-1" [innerHTML]="companyJsonData?.managementTeamNote | safeHtml"></td>
            </tr>
        </table>

        <table class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Market Scenario</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Market demand of product/service</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['marketDemandService']"></td>
            </tr>
        </table>
        <table class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Competitors Overview</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['competitorsOverview']"></td>
            </tr>
        </table>

        <table class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Creditor Information</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['keySupplier']"></td>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Debtors information</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['KeyBuyers']"></td>
            </tr>
        </table>

        <app-financial-view *ngIf="loanDataHolder?.loanHolder?.financial"
                            [customerType]="loanDataHolder?.loanHolder?.customerType"
                            [formData]="loanDataHolder?.loanHolder?.financial"></app-financial-view>

        <ng-container *ngIf="(client === clientName?.ICFC) || (client === clientName?.MEGA); else otherBank">
            <app-nta-mega-summary *ngIf="loanDataHolder?.loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                                  [fiscalYears]="fiscalYearArray"
                                  [netTradingAssetsData]="loanDataHolder?.loanHolder?.netTradingAssets"></app-nta-mega-summary>
        </ng-container>

        <ng-template #otherBank>
            <app-nta-summary *ngIf="loanDataHolder?.loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                             [fiscalYears]="fiscalYearArray"
                             [netTradingAssetsData]="loanDataHolder?.loanHolder?.netTradingAssets"></app-nta-summary>
        </ng-template>

        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <ng-container *ngIf="summaryType === summaryTypeName?.GENERAL">
                <tr class="text-white sb-bg-dark">
                    <th>Industry/Market Risk & Mitigation</th>
                </tr>
                <tr>
                    <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['BusinessIndustryOutlook']"></td>
                </tr>
                <tr class="text-white sb-bg-dark">
                    <th>Business/Management Risk & Mitigation</th>
                </tr>
                <tr>
                    <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['technicalAspect']"></td>
                </tr>
                <tr class="text-white sb-bg-dark">
                    <th>Security Risk & Mitigation</th>
                </tr>
                <tr>
                    <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['securityRisk']"></td>
                </tr>
                <tr class="text-white sb-bg-dark">
                    <th>Financial and Cash Flow Risk & Mitigation</th>
                </tr>
                <tr>
                    <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['financialAndCashFlowRisk']"></td>
                </tr>
                <tr class="text-white sb-bg-dark">
                    <th>Marketing Strategies</th>
                </tr>
                <tr>
                    <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['marketingStrategies']"></td>
                </tr>
            </ng-container>
        </table>

        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="text-white sb-bg-dark">
                <th colspan="4">SWOT Analysis</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Strength</th>
                <th>Weakness</th>
                <th>Opportunity</th>
                <th>Threats</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.swot?.strength | safeHtml"></td>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.swot?.weakness | safeHtml"></td>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.swot?.opportunity | safeHtml"></td>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.swot?.threats | safeHtml"></td>
            </tr>
            </tbody>
        </table>

        <table class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Analysis of 5Cs</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['analysisOfFiveC']"></td>
            </tr>
        </table>

        <table *ngIf="summaryType === summaryTypeName.GENERAL"
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Succession Risk & Mitigation</th>
            </tr>
            <tr>
                <td class="text-left pl-1"><span [innerHTML]="formValue?.successionPlanning | safeHtml"></span></td>
            </tr>
        </table>

        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th colspan="2">Raw Materials</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Raw Material Sourcing</th>
                <th>Raw Materials Availability</th>
            </tr>
            <tr>
                <td class="text-left pl-1">{{companyJsonData?.rawMaterialSourcing}}</td>
                <td class="text-left pl-1">{{companyJsonData?.rawMaterialAvailability}}</td>
            </tr>
        </table>

        <table
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th>Legal review Remarks</th>
            </tr>
            <tr>
                <td class="text-left pl-1" [innerHTML]="companyJsonData?.legalReviewRemark"></td>
            </tr>
        </table>

        <table *ngIf="!srdbAffiliatedId && (summaryType === summaryTypeName?.GENERAL || summaryType === summaryTypeName?.GAMMA)"
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr>
                <th colspan="2">Business given</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Particular</th>
                <th *ngIf="client === clientName?.MEGA">Amount(Rs/value)</th>
                <th *ngIf="client !== clientName?.MEGA">Amount(Rs)</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Interest Income</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.interestIncomeDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Loan Processing Fee</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.loanProcessingFeeDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">LC Commission</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.lcCommissionDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Guarantee Commission</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.guaranteeCommissionDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Other Commission</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.otherCommissionDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Saving Account</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.savingAccountDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Payroll Account</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.payrollAccountDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Debit Cards</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.debitCardsDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Credit Cards</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.creditCardsDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Mobile Bank / Internet Banking</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.mobileBankingDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <td class="text-left pl-1">Locker</td>
                <th class="text-right pr-1">Rs. {{businessGiven?.lockerDuringReview | currencyFormatter}}</th>
            </tr>
            <tr>
                <th class="text-left pl-1">Total</th>
                <th class="text-right pr-1">Rs. {{businessGiven?.total | currencyFormatter}}</th>
            </tr>
            <tr>
                <th class="text-left pl-1">Total</th>
                <th class="text-right pr-1">Rs. {{businessGiven?.total | currencyFormatter}}</th>
            </tr>
        </table>
        <table *ngIf="!disableCrgAlpha"
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th colspan="2">Company Relationship with Bank</th>
            </tr>
            <tr>
                <th class="text-white sb-bg-dark">Banking Relationship</th>
                <td class="text-left pl-1">{{bankingRelation?.bankingRelationship}}</td>
            </tr>
            <tr>
                <th class="text-white sb-bg-dark">Account Turnover
                </th>
                <td class="text-left pl-1">{{bankingRelation?.accountTurnover}}</td>
            </tr>
            <tr>
                <th class="text-white sb-bg-dark">Repayment History</th>
                <td class="text-left pl-1">{{bankingRelation?.repaymentHistory}}</td>
            </tr>
        </table>

        <table *ngIf="!disableCrgAlpha"
                class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <tr class="text-white sb-bg-dark">
                <th colspan="5">Business & Industry</th>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Regulatory Concern</th>
                <th>Supplier</th>
                <th>Buyer</th>
                <th>Industry Growth</th>
                <th>Market Competition</th>
            </tr>
            <tr>
                <td class="text-left pl-1">{{businessAndIndustry?.regulatoryConcern}}</td>
                <td class="text-left pl-1">{{businessAndIndustry?.supplier}}</td>
                <td class="text-left pl-1">{{businessAndIndustry?.buyer}}</td>
                <td class="text-left pl-1">{{formValue?.industryGrowth}}</td>
                <td class="text-left pl-1">{{formValue?.marketCompetition}}</td>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th>Experience</th>
                <th>Succession</th>
            </tr>
            <tr>
                <td class="text-left pl-1">{{formValue?.experience}}</td>
                <td class="text-left pl-1">{{formValue?.succession}}</td>
            </tr>
        </table>
    </div>
</div>


<div *ngIf="!formValue" class="col-md-12">
    <app-customer-info-search-form [customerType]="customerType.INSTITUTION"
                                   [calendarType]="calendarType"
                                   [loanId]="loanId"></app-customer-info-search-form>
</div>

