<nb-card class="modal-dialog-scrollable">
    <nb-card-header>
          <span>
            <b>All Documents</b>
            <button class="float-right sb-small sb-bg-dark text-white disable-print"
                    *ngIf="!hidePreviewButton || !loanDataHolder?.zipPath"
                    (click)="getDocPath()"> Download All Document</button>
            <button class="float-right sb-small sb-bg-dark text-white disable-print"
                    *ngIf="hidePreviewButton || loanDataHolder?.zipPath"
                    (click)="downloadCustomerDocument(loanDataHolder?.zipPath, loanDataHolder?.id + documentName)"> Download All Document</button>
          </span>
    </nb-card-header>
    <nb-card-body>
        <div *ngIf="loanDataHolder?.customerDocument?.length > 0" class="row">
            <div class="col-md-12">
                <p><strong>Loan Documents</strong></p>
            </div>
            <div class="col-md-12">
                <table class="table table-condensed table-bordered table-sm sb-small text-center">
                    <thead>
                    <tr class="text-white sb-bg-dark">
                        <th class="sn">S.N</th>
                        <th>Document</th>
                        <th>Preview</th>
                        <th>Download
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let singleDoc of loanDataHolder?.customerDocument; let i = index">
                        <td>{{i + 1}}</td>
                        <td class="text-left pl-1">{{singleDoc?.document?.name}}</td>
                        <td>
                            <i (click)="previewOfferLetterDocument(singleDoc?.documentPath,singleDoc?.document?.displayName)"
                               class="fas fa-eye"></i></td>
                        <td>
                            <i (click)="downloadCustomerDocument(singleDoc?.documentPath, singleDoc?.document?.name)"
                               aria-hidden="true" class="fa fa-download"
                               style="cursor: pointer"></i>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div *ngIf="loanDataHolder?.loanHolder?.customerGeneralDocuments?.length > 0 " class="row">
            <div class="col-md-12">
                <table class="table table-condensed table-bordered table-sm sb-small text-center">

                    <tr class="text-white sb-bg-dark">
                        <th colspan="4"> Customer General Document
                        </th>
                    </tr>
                    <tr class="text-white sb-bg-dark">
                        <th class="sn">SN</th>
                        <th>Document</th>
                        <th *ngIf="!hidePreviewButton">Preview</th>
                        <th *ngIf="!hidePreviewButton">Download</th>
                    </tr>
                    <ng-container *ngFor="let generalDoc of customerGeneralDocument; let i = index">
                        <tr>
                            <th>{{i+1}}</th>
                            <th>{{generalDoc[0]?.document?.name}}</th>
                            <td *ngIf="!hidePreviewButton"></td>
                            <td *ngIf="!hidePreviewButton"></td>
                        </tr>
                        <tr *ngFor="let gDoc of generalDoc; let j = index">
                            <td>{{i+1}}.{{j+1}}</td>
                            <td class="text-left pl-1">{{gDoc?.docPath.substring(gDoc?.docPath.lastIndexOf('/') + 1, gDoc.docPath.length)}}</td>
                            <td *ngIf="!hidePreviewButton">
                                <i (click)="previewOfferLetterDocument(gDoc?.docPath, gDoc?.document?.displayName)"
                                   class="fas fa-eye"></i>
                            </td>
                            <td *ngIf="!hidePreviewButton">
                                <i (click)="downloadCustomerDocument(gDoc?.docPath, gDoc?.document?.displayName)"
                                   class="fas fa-download" style="cursor: pointer"></i>
                            </td>
                        </tr>
                    </ng-container>
<!--                    <tr *ngFor="let generalDoc of loanDataHolder?.loanHolder?.customerGeneralDocuments; let i=index">-->
<!--                        <td>{{i + 1}}</td>-->
<!--                        <td class="text-left pl-1">{{generalDoc?.docPath.substring(generalDoc?.docPath.lastIndexOf('/') + 1, generalDoc.docPath.length)}}</td>-->
<!--                        <td *ngIf="!hidePreviewButton">-->
<!--                            <i (click)="previewOfferLetterDocument(generalDoc?.docPath,generalDoc?.document?.displayName)"-->
<!--                               class="fas fa-eye"></i>-->
<!--                        </td>-->
<!--                        <td *ngIf="!hidePreviewButton">-->
<!--                            <i (click)="downloadCustomerDocument(generalDoc?.docPath,generalDoc?.document?.displayName)"-->
<!--                               class="fas fa-download" style="cursor: pointer"></i>-->
<!--                        </td>-->
<!--                    </tr>-->
                </table>
            </div>
        </div>

        <div *ngIf="minOneGuarantorDoc" class="row">
            <div class="col-md-12">
                <p><strong>Guarantor Documents</strong></p>
                <table class="table table-condensed table-bordered table-sm sb-small text-center">
                    <thead>
                    <tr class="text-white sb-bg-dark">
                        <th class="sn">S.N</th>
                        <th>Guarantor</th>
                        <th>Document</th>
                        <th *ngIf="!hidePreviewButton">Preview</th>
                        <th *ngIf="!hidePreviewButton">Download</th>
                    </tr>
                    </thead>
                    <ng-container *ngFor="let singleGuarantor of taggedGuarantorWithDoc; let i = index">
                        <tbody *ngFor="let singleDoc of singleGuarantor.docPath.split(','); let j =  index">
                        <tr *ngIf="singleDoc">
                            <td>{{i + 1}}.{{j + 1}}</td>
                            <td class="text-left pl-1">{{singleGuarantor?.name}}</td>
                            <td>{{singleDoc.substring(singleDoc.lastIndexOf('/') + 1, singleDoc.length)}}</td>
                            <td *ngIf="!hidePreviewButton"><i
                                    (click)="previewOfferLetterDocument(singleDoc,singleGuarantor?.name + 'Net Worth Doc')"
                                    class="fas fa-eye"></i>
                            </td>
                            <td *ngIf="!hidePreviewButton">
                                <i (click)="downloadCustomerDocument(singleDoc, singleGuarantor?.name+' Net Worth Doc')"
                                   aria-hidden="true" class="fa fa-download"
                                   style="cursor: pointer"></i>
                            </td>
                        </tr>
                        </tbody>
                    </ng-container>
                </table>
            </div>
        </div>
        <div *ngIf="minOneInsuranceDoc" class="row">
            <div class="col-md-12">
                <p><strong>Insurance Documents</strong></p>
                <table class="table table-condensed table-bordered table-sm sb-small text-center">
                    <thead>
                    <tr class="text-white sb-bg-dark">
                        <th class="sn">S.N</th>
                        <th>Policy Number</th>
                        <th>Company</th>
                        <th>Document</th>
                        <th *ngIf="!hidePreviewButton">Preview</th>
                        <th *ngIf="!hidePreviewButton">Download</th>
                    </tr>
                    </thead>
                    <ng-container *ngFor="let singleInsurance of insuranceWithDoc; let i = index">
                        <tbody *ngFor="let singleDoc of singleInsurance.policyDocumentPath.split(','); let j = index">
                        <tr *ngIf="singleDoc">
                            <td>{{i + 1}}.{{j + 1}}</td>
                            <td class="text-left pr-1">{{singleInsurance?.policyNumber}}</td>
                            <td class="text-left pl-1">{{singleInsurance?.company}}</td>
                            <td class="text-left pl-1">{{singleDoc.substring(singleDoc.lastIndexOf('/') + 1, singleDoc.length)}}</td>
                            <td *ngIf="!hidePreviewButton"><i
                                    (click)="previewOfferLetterDocument(singleDoc,singleInsurance?.policyNumber+' Insurance Policy Document')"
                                    class="fas fa-eye"></i></td>
                            <td *ngIf="!hidePreviewButton">
                                <i (click)="downloadCustomerDocument(singleDoc, singleInsurance?.policyNumber+' Insurance Policy Document')"
                                   aria-hidden="true" class="fa fa-download"
                                   style="cursor: pointer"></i>
                            </td>
                        </tr>
                        </tbody>
                    </ng-container>
                </table>
            </div>
        </div>

        <div class="row" *ngIf="colSiteVisitDocument?.length > 0">
            <div class="col-md-12">
                <p><strong>Collateral Documents</strong></p>
                <table class="table table-condensed table-bordered table-sm sb-small text-center">
                    <thead>
                    <tr class="sb-bg-dark">
                        <th>SN</th>
                        <th>Security Name</th>
                        <th>Document Name</th>
                        <th *ngIf="!hidePreviewButton">Preview</th>
                        <th *ngIf="!hidePreviewButton">Download</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let sd of colSiteVisitDocument; let si = index">
                        <td class="sn">{{si}}</td>
                        <td class="text-left pl-1">{{sd?.securityName}}</td>
                        <td class="text-left pl-1">{{sd?.docName}}</td>

                        <td *ngIf="!hidePreviewButton">
                            <i (click)="previewOfferLetterDocument(sd?.docPath?.concat(sd?.docName)?.concat(fileType), sd?.docName)"
                               class="fas fa-eye"></i>
                        </td>
                        <td *ngIf="!hidePreviewButton">
                            <i (click)="downloadCustomerDocument(sd?.docPath?.concat(sd?.docName)?.concat(fileType), sd?.docName)"
                               class="fas fa-download" style="cursor: pointer"></i>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div *ngIf="loanDataHolder?.cadDocument?.length > 0  && showCadDoc" class="row">
            <div class="col-md-12">
                <p><strong>Cad Documents</strong></p>
                <table class="table table-condensed table-bordered table-sm sb-small text-center">
                    <thead class="text-white sb-bg-dark">
                    <tr>
                        <th class="sn">S.N</th>
                        <th>Document</th>
                        <th>Preview</th>
                        <th>Download</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let singleDoc of loanDataHolder?.cadDocument; let i = index">
                        <td>{{i + 1}}</td>
                        <td class="text-left pl-1">{{singleDoc?.document?.name}}</td>
                        <td>
                            <i (click)="previewOfferLetterDocument(singleDoc?.documentPath, singleDoc?.document?.name)"
                               class="fas fa-eye"></i></td>
                        <td>
                            <i (click)="downloadCustomerDocument(singleDoc?.documentPath, singleDoc?.document?.name)"
                               aria-hidden="true" class="fa fa-download"
                               style="cursor: pointer"></i>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </nb-card-body>

</nb-card>
