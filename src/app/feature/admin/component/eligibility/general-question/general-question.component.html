<form [formGroup]="generalQuestionForm">
    <nb-card>
        <nb-card-header>
            <div formArrayName="questions">
                <div *ngFor="let qsn of generalQuestionForm.get('questions')['controls']; let i = index;" class="form-group">
                    <fieldset class="border border-primary rounded p-2">
                        <legend class="w-auto"><h3>Question Q<small>{{i + 1}}</small>:</h3></legend>
                        <div [formGroupName]="i">
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Question Description:</label>
                                    <input class="form-control" formControlName="description"
                                           placeholder="Question description"
                                           type="text">
                                </div>
                                <div class="col-md-3">
                                    <label>Question Identifier:</label>
                                    <input class="form-control" type="text" maxlength="1" placeholder="variable(x,y,z etc.)" formControlName="questionIdentifier">
                                </div>
                                <div class="col-md-3">
                                    <label>Appearance order:</label>
                                    <div class="input-group">
                                        <input class="form-control" formControlName="appearanceOrder"
                                               placeholder="Appearance order"
                                               type="number">
                                        <div class="input-group-append">
                                            <button (click)="deleteQuestionField(i)" class="btn btn-danger btn-sm">
                                                <i class="fa fa-trash" style="color:white;"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-12 float-right">
                    <button (click)="addQuestionField()" class="btn btn-info float-right">
                        Add Question field
                    </button>
                </div>
            </div>
        </nb-card-header>
        <nb-card-body>
            <div class="col-md-12">

                <div class="col-xs-6">
                    <p class="lead">Rules</p>

                    <div class="table-responsive">
                        <table class="table">
                            <tbody>
                            <tr>
                                <th style="width:50%">Formula:</th>
                                <td>Q1</td>
                            </tr>
                            <tr>
                                <th>Set Formula:</th>
                                <td>
                                    <div class="d-inline m-1" *ngFor="let field of generalQuestionForm.get('questions')['controls']; let i = index">
                                        <select>
                                            <option *ngFor="let qsnIdfr of generalQuestionForm.get('questions')['controls']" [ngValue]="qsnIdfr.value.questionIdentifier">{{qsnIdfr.value.questionIdentifier}}</option>
                                        </select>
                                        <select *ngIf="(i+1) !== generalQuestionForm.get('questions')['controls'].length">
                                                <option>+</option>
                                                <option>-</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th>Set eligibility (in percent):</th>
                                <td>
                                    <div class="input-group mb-3">
                                        <input placeholder="Eligibility in %" size="1"
                                               type="number">
                                        <div class="input-group-append">
                                            <a class="btn btn-info btn-sm"
                                               data-placement="top"
                                               data-toggle="tooltip"
                                               style="margin-left:10px">
                                                <i class="fa fa-save" style="color:white;"></i>
                                            </a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </nb-card-body>
    </nb-card>
</form>
<pre>{{generalQuestionForm.value | json}}</pre>