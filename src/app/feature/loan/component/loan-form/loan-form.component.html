<nb-card>

    <nb-card-header>
        <h2 class="d-flex justify-content-center">{{loanTitle}}</h2>
        <span class="d-flex justify-content-end">{{currentNepDate}}</span>
    </nb-card-header>
    <nb-card-body>
        <section *ngIf="loanDocument && templateList">
            <ngb-tabset #tabSet="ngbTabset" (tabChange)="tabChange($event)">
                <ngb-tab *ngFor="let allList of templateList; let i = index" [title]="allList.name"
                         [id]="i.toString(10)">
                    <ng-template ngbTabContent *ngIf="allList.name == 'Customer Info'">
                        <app-basic-info [formValue]="loanDocument?.customerInfo" #basicInfo>
                        </app-basic-info>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'Kyc Info'">
                        <app-kyc-info [formValue]="loanDocument?.customerInfo" #kycInfo>
                        </app-kyc-info>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'General'">
                        <app-dms-loan [loanDataHolder]="loanDocument" #dmsLoanFile></app-dms-loan>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'Company Info'">
                        <app-company-info [formValue]="loanDocument?.companyInfo" #companyInfo></app-company-info>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'Proposal'">
                        <app-proposal [formValue]="loadProposal()" (dmsDisableButton)="submitButton($event)"
                                      #proposalInfo></app-proposal>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'CICL'">
                        <app-cicl #cicl
                                  [ciclRemark]="loanDocument?.ciclRemarks"
                                  [ciclValue]="loanDocument?.ciclList"
                                  [insuranceValue]="loanDocument?.insurance"></app-cicl>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'Credit Risk Grading'">
                        <app-credit-grading #creditGrading></app-credit-grading>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'Financial'">
                        <app-financial [formData]="loanDocument?.financial" #financial></app-financial>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'Site Visit'">
                        <app-site-visit #siteVisit [formValue]="loanDocument?.siteVisit"></app-site-visit>
                    </ng-template>
                    <ng-template ngbTabContent *ngIf="allList.name === 'Security'">
                    <app-security #security></app-security>
                    </ng-template>
                </ngb-tab>
            </ngb-tabset>

            <div class="justify-content-center" style="padding-bottom: 20px">
                <div class="col-md-12">
                    <div class="row text-center">
                        <div class="col-md-6 d-flex justify-content-start">
                            <button nbButton status="primary"
                                    *ngIf="nextTabId > 1"
                                    (click)="tabSet.select(previousTabId.toString(10))">Previous
                            </button>
                        </div>
                        <div class="col-md-6 d-flex justify-content-end">
                            <button nbButton status="primary"
                                    (click)="tabSet.select(nextTabId.toString(10))"
                                    *ngIf="nextTabId !== totalTabCount">Next
                            </button>

                            <button nbButton status="info"
                                    (click)="save()" *ngIf="nextTabId === totalTabCount" [disabled]="submitDisable">
                                Save
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </nb-card-body>
</nb-card>
<app-overlay-spinner></app-overlay-spinner>
