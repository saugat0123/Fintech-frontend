<div class="row mt-1">
    <div class="col-md-12 sb-small">
        <strong>I am on Approve Loan</strong>
        <p><strong>{{(summaryType === summaryTypeName.GAMMA && loanCategory === 'INDIVIDUAL') ? '3. Proposal Details' :
            (summaryType === summaryTypeName.GAMMA && loanCategory === 'INSTITUTION') ? '2. Proposal Details' : 'Proposal Details'}}</strong>
            <em class="text-danger sb-small"> &nbsp;Bold row indicates current loan proposal</em></p>
        <ul>
            <li class="sb-medium"><i class="fas fa-check-circle"></i> = Approved
                <i class="fas fa-times-circle"></i> = Not Approved,
                <i class="text-round">N</i>ew Loan
                <i class="text-round">R</i>enewed Loan
                <i class="text-round">E</i>nhanced Loan
                <i class="text-round">C</i>losure Loan
                <i class="text-round">P</i>artial Settlement Loan
                <i class="text-round">F</i>ull Settlement Loan
                <i class="text-round">R/E</i>new With Enhancement
            </li>
            <li class="sb-medium"><span><sup>*</sup>  IR : Interest Rate ,<sup>*</sup> BR : Base Rate ,<sup>*</sup> PR : Premium Rate ,<sup>*</sup> COM : Commission ,<sup>*</sup> CM : Cash margin</span>,<sup>*</sup>  SC : Service Charge ,
            </li>
        </ul>
    </div>
</div>
<div class="col-md-12">
    <div class="row">

    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <table
                class="table table-bordered table-responsive-md table-sm sb-small text-center">
            <thead>
            <tr class="sb-bg-dark text-white">
                <th>Loan Facility(Created Date)</th>
                <th>Existing Limit</th>
                <th>Outstanding</th>
                <th>Enhance</th>
                <th>Settlement</th>
                <th>Proposed Limit</th>
                <!--        for non funded commision and cash margin combination to be view-->
                <th>Existing Proposed INT/COM/CM/Existing Service Charge</th>
                <th>Proposed INT/COM/CM</th>
                <th>Service Charge</th>
                <th>Limit Expiry/Tenure (AD/BS)</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let loan of proposalAllData">
                <td class="text-left pl-1">
                    <ng-container
                            *ngTemplateOutlet="tickCross; context: { $implicit: loan?.documentStatus}"></ng-container>
                    &nbsp;|&nbsp;
                    <ng-container
                            *ngTemplateOutlet="loanTypeLetter; context: { $implicit: loan?.loanType }"></ng-container>
                    &nbsp;|&nbsp;
                    {{ loan?.name }} ({{ loan?.createdAt | date}} ({{ loan?.createdAt | engNepDate: false }}))
                </td>

<!--                <ng-container >-->
                <td class="text-right pr-1">
                    <span *ngIf="loan?.existingLimit">
                        Rs. {{loan?.existingLimit | currencyFormatter}}
                    </span>
                    <span *ngIf="!loan?.existingLimit">-</span></td>

                <td class="text-right pr-1">
                    <span *ngIf="loan?.outStandingLimit">
                        Rs. {{loan?.outStandingLimit | currencyFormatter}}
                    </span>
                    <span *ngIf="!loan?.outStandingLimit">-</span>
                </td>
                <td class="text-right pr-1">
                    <span *ngIf="loan?.enhanceLimitAmount">
                        Rs. {{loan?.enhanceLimitAmount | currencyFormatter}}
                    </span>
                    <span *ngIf="!loan?.enhanceLimitAmount">-</span>
                </td>
                <td class="text-right pr-1">
                    <span *ngIf="loan?.settlementAmount">
                        Rs. {{loan?.settlementAmount | currencyFormatter}}
                    </span>
                    <span *ngIf="!loan?.settlementAmount">-</span>
                </td>

                <td class="text-right pr-1">Rs. {{loan?.proposedLimit | currencyFormatter}}</td>

                <td class="text-right pr-1">
<!--                    <span *ngIf="(loan?.loan?.isFundable) && (loan?.existInterestRate) > 0 ">-->
                    <span *ngIf="loan?.existInterestRate > 0 ">
                        IR: {{loan?.existInterestRate}} %
                    </span>
<!--                    <span *ngIf="!loan?.loan?.isFundable">-->
                    <span>
                        <span *ngIf="(loan?.existCashMarginMethod == 'FLAT') && (loan?.existCashMargin > 0)">
                            CM: Rs. {{loan?.existCashMargin || 0 | currencyFormatter}} ,</span>
                        <span *ngIf="loan?.existCashMarginMethod == 'PERCENT' && loan?.existCashMargin > 0">
                            CM: {{loan?.existCashMargin || 0}} %,</span>
                        <span *ngIf="loan?.existCommissionPercentage > 0">
                            COM:{{loan?.existCommissionPercentage || '0'}} %
                        </span>
                    </span>
                    <span *ngIf="loan?.serviceChargeMethod === 'FLAT' && loan?.existingServiceCharge !== null">
                       SC: {{client === clientName?.SHINE_RESUNGA ? '' : 'Rs. '}} {{loan?.existingServiceCharge}}</span>
                    <span *ngIf="loan?.serviceChargeMethod === 'PERCENT' && loan?.existingServiceCharge !== null">
                            SC: {{loan?.existingServiceCharge}} {{client === clientName?.SHINE_RESUNGA ? '' : ' %'}}</span>
                    <span *ngIf="(loan?.existInterestRate === null)
                    && (loan?.existCashMargin === null)
                    && (loan?.existingServiceCharge === null)
                    && (loan?.existCommissionPercentage === null)">-</span>
                </td>

                <td>
<!--                    <span *ngIf="loan?.loan?.isFundable">-->
                    <span>
                        BR : {{ loan?.baseRate}} %,
                        PR : {{ loan?.premiumRateOnBaseRate}} %,
                        IR : {{loan?.interestRate}} %
                    </span>
<!--                    <span *ngIf="!loan?.loan?.isFundable">-->
<!--                        <span *ngIf="(loan?.proposal?.data | jsonParse)?.cashMarginMethod == 'FLAT'">-->
<!--                            CM: Rs.  {{ ((loan?.proposal?.data | jsonParse)?.cashMargin || 0) | currencyFormatter}}-->
<!--                            ,</span>-->
<!--                        <span *ngIf="(loan?.proposal?.data | jsonParse)?.cashMarginMethod == 'PERCENT'">-->
<!--                            CM: {{ ((loan?.proposal?.data | jsonParse)?.cashMargin)}} %,</span>-->
<!--                        COM:{{(loan?.proposal?.data | jsonParse)?.commissionPercentage}} %</span>-->
                </td>

                <td class="text-right pr-1">
                    <span *ngIf="loan?.serviceChargeMethod === 'FLAT' && loan?.serviceCharge !== ''">
                        SC: {{client === clientName?.SHINE_RESUNGA ? '' : 'Rs. '}}{{loan?.serviceCharge}}</span>
                    <span *ngIf="loan?.serviceChargeMethod === 'PERCENT' && loan?.serviceCharge !== ''">
                        SC: {{loan?.serviceCharge}} {{client === clientName?.SHINE_RESUNGA ? '' : ' %'}}</span>
                    <span *ngIf="loan?.serviceCharge === '' || loan?.serviceCharge === null">-</span>
                </td>

                <!--        <td>{{(loan?.proposal?.data | jsonParse)?.tenureDurationInMonths}} month</td>-->
                <!--        <td>{{(loan?.proposal?.data | jsonParse)?.repaymentMode}}</td>-->
                <!--        <td>Rs. {{(loan?.proposal?.data | jsonParse)?.installmentAmount | currencyFormatter}}</td>-->
                <!--        <td>Rs. {{(loan?.proposal?.data | jsonParse)?.interestAmount | currencyFormatter}}</td>-->
                <!--        <td>{{(loan?.proposal?.data | jsonParse)?.moratoriumPeriod }} months</td>-->
                <!--        <td>Rs. {{(loan?.proposal?.data | jsonParse)?.prepaymentCharge | currencyFormatter}}</td>-->
                <td width="150px" class="text-left pl-1">
                    <span *ngIf="!loan?.limitExpiryMethod">-</span>
                    <span *ngIf="loan?.limitExpiryMethod === 'ABSOLUTE'">{{loan?.dateOfExpiry | date}}
                        ({{loan?.dateOfExpiry | engNepDate: false}})</span>
                    <span *ngIf="loan?.limitExpiryMethod === 'CUSTOM'">{{loan?.duration}} {{loan?.frequency}} {{loan?.condition}}</span>
                </td>
<!--                </ng-container>-->

            </tr>
<!--            <tr class="sb-bg-secondary text-white">-->
<!--                <td class="text-left pl-1"><strong>Funded</strong></td>-->
<!--                <td class="text-right pr-1">-->
<!--                    Rs. {{ (getTotalFundable('existingLimit', true, proposalAllData)) | currencyFormatter }}</td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>-->
<!--                        Rs. {{ getTotalFundable('outStandingLimit', true, proposalAllData) | currencyFormatter }}-->
<!--                    </span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>-->
<!--                        Rs. {{ getTotalFundable('enhanceLimitAmount', true, proposalAllData) | currencyFormatter }}-->
<!--                    </span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>-->
<!--                        Rs. {{ getTotalFundable('settlementAmount', true, proposalAllData) | currencyFormatter }}-->
<!--                    </span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">-->
<!--                    Rs. {{ getTotalFundable('proposedLimit', true, proposalAllData) | currencyFormatter }}</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--            </tr>-->
<!--            <tr class="sb-bg-secondary text-white">-->
<!--                <td class="text-left pl-1"><strong>Non-Funded</strong></td>-->
<!--                <td class="text-right pr-1">-->
<!--                    Rs. {{ (getTotalFundable('existingLimit', false, proposalAllData) | currencyFormatter)}}</td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>-->
<!--                        Rs. {{ getTotalFundable('outStandingLimit', false, proposalAllData) | currencyFormatter }}-->
<!--                    </span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>Rs. {{ getTotalFundable('enhanceLimitAmount', false, proposalAllData) | currencyFormatter }}</span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>-->
<!--                        Rs. {{ getTotalFundable('settlementAmount', false, proposalAllData) | currencyFormatter }}-->
<!--                    </span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">-->
<!--                    Rs. {{ getTotalFundable('proposedLimit', false, proposalAllData) | currencyFormatter }}</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--            </tr>-->
<!--            <tr class="sb-bg-secondary text-white">-->
<!--                <td class="text-left pl-1"><strong>Total</strong></td>-->

<!--                <td class="text-right pr-1">Rs. {{ getTotal('existingLimit') | currencyFormatter }}</td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>Rs. {{ getTotal('outStandingLimit') | currencyFormatter }}</span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>Rs. {{ getTotal('enhanceLimitAmount') | currencyFormatter }}</span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">-->
<!--                    <span>Rs. {{ getTotal('settlementAmount') | currencyFormatter }}</span>-->
<!--                </td>-->
<!--                <td class="text-right pr-1">Rs. {{ getTotal('proposedLimit') | currencyFormatter }}</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--                <td>-</td>-->
<!--            </tr>-->
            </tbody>
        </table>
    </div>
</div>

<ng-template #tickCross let-status>
    <i *ngIf="status === DocStatus[DocStatus.APPROVED]" class="fas fa-check-circle"></i>
    <i *ngIf="status !== DocStatus[DocStatus.APPROVED]" class="fas fa-times-circle"></i>
</ng-template>
<ng-template #loanTypeLetter let-loanType>
    <i *ngIf="loanType === 'New Loan'" class="text-round">N</i>
    <i *ngIf="loanType === 'Renewed Loan'" class="text-round">R</i>
    <i *ngIf="loanType === 'Enhanced Loan'" class="text-round">E</i>
    <i *ngIf="loanType === 'Closure Loan'" class="text-round">C</i>
    <i *ngIf="loanType === 'Partial Settlement Loan'" class="text-round">P</i>
    <i *ngIf="loanType === 'Full Settlement Loan'" class="text-round">F</i>
    <i *ngIf="loanType === 'Renew with Enhancement'" class="text-round">R/E</i>
</ng-template>

<!--<div class="row">-->
<!--    <div class="col-md-12 sb-medium">-->
<!--        <strong>Total Proposed Limit (in words):</strong>-->
<!--        {{ getTotal('proposedLimit') | currencyFormatter}}-->
<!--        (Rs. {{ getTotal('proposedLimit') | inWords | titlecase }}-->
<!--        Only /-)-->
<!--    </div>-->
<!--</div>-->

<!--<div class="row" *ngIf="client === clientName?.ICFC">-->
<!--    <div class="col-md-12">-->
<!--        <table class="table table-condensed table-bordered table-responsive-md text-center table-sm sb-small">-->
<!--            <thead>-->
<!--            <tr class="text-white sb-bg-dark">-->
<!--                <th colspan="7" *ngIf="checkedData?.subsidizedLoanChecked">Information of Subsidized Loan</th>-->
<!--            </tr>-->
<!--            <tr class="text-white sb-bg-dark">-->
<!--                <th *ngIf="checkedData?.subsidizedLoanChecked">Subsidy Rate(%)</th>-->
<!--                <th *ngIf="checkedData?.subsidizedLoanChecked">Subsidized Loan Type</th>-->
<!--                <th *ngIf="checkedData?.subsidizedLoanChecked && proposalAllData?.others !== null">Others</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tr>-->
<!--                <td class="text-right pr-1" *ngIf="checkedData?.subsidizedLoanChecked">{{calculateInterestRate()}}%-->
<!--                </td>-->
<!--                <td class="text-left pl-1"-->
<!--                    *ngIf="checkedData?.subsidizedLoanChecked">{{proposalAllData?.subsidyLoanType}}</td>-->
<!--                <td class="text-left pl-1"-->
<!--                    *ngIf="checkedData?.subsidizedLoanChecked && proposalAllData?.others !== null">{{proposalAllData?.others}}</td>-->
<!--            </tr>-->
<!--        </table>-->
<!--    </div>-->
<!--</div>-->

<!--<div class="row" *ngIf="client === clientName?.SHINE_RESUNGA">-->
<!--    <div class="col md-12">-->
<!--        <table class="table table-condensed table-bordered table-responsive-md text-center table-sm sb-small">-->
<!--            <thead>-->
<!--            <tr class="text-white sb-bg-dark">-->
<!--                <th *ngIf="isRevolving">Interest and Principal Repayment Frequency</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--            <tr>-->
<!--                <td class="text-left pl-1">{{proposalAllData?.interestPrincipalRepayment}}</td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->
<!--    </div>-->
<!--</div>-->

<!--<div class="row" *ngIf="client === clientName?.SHINE_RESUNGA">-->
<!--    <div *ngIf="approveSheet === 'approveSheet'" class="col-md-12">-->
<!--        <table class="table table-sm table-condensed table-bordered table-responsive-md text-center table-sm sb-small ">-->
<!--            <thead>-->
<!--            <tr class="text-white sb-bg-dark">-->
<!--                <th>-->
<!--                    <div *ngIf="(loanNatureSelected && fundableNonFundableSelcted && isFundable && isTerminating) || isVehicle || isShare || isGeneral; else commitmentDescription">-->
<!--                        Prepayment/Commitment/Swap Charge Description-->
<!--                    </div>-->
<!--                    <ng-template #commitmentDescription>-->
<!--                        <div *ngIf="(loanNatureSelected && fundableNonFundableSelcted && isFundable && (isTerminating || isRevolving)) || isVehicle || isShare || isGeneral; else swapChargeDescription">-->
<!--                            Commitment/Swap Charge Description-->
<!--                        </div>-->
<!--                    </ng-template>-->
<!--                    <ng-template #swapChargeDescription>-->
<!--                        Swap Charge Description-->
<!--                    </ng-template>-->
<!--                </th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--            <tr>-->
<!--                <td class="text-left pl-1"><span-->
<!--                        [innerHTML]="proposalAllData?.prepaymentSwapCommitment || 'N/A' | safeHtml"></span></td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->

<!--        <table class="table table-sm table-condensed table-bordered table-responsive-md text-center table-sm sb-small ">-->
<!--            <thead>-->
<!--            <tr class="text-white sb-bg-dark">-->
<!--                <th *ngIf="(loanNatureSelected && fundableNonFundableSelcted &&  isFundable &&  isTerminating) || isVehicle || isShare || isGeneral">-->
<!--                    Repayment Mode-->
<!--                </th>-->
<!--                <th *ngIf="showInstallmentAmount  && ((loanNatureSelected && fundableNonFundableSelcted &&  isFundable &&  isTerminating) || isVehicle || isShare || isGeneral)">-->
<!--                    Installment Amount-->
<!--                </th>-->
<!--                <th *ngIf="!showInstallmentAmount &&  ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))">-->
<!--                    Interest Amount-->
<!--                </th>-->
<!--                <th *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))">-->
<!--                    Interest Payment-->
<!--                </th>-->
<!--                <th *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))">-->
<!--                    Principal Payment-->
<!--                </th>-->
<!--                <th *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))">-->
<!--                    Principal Amount-->
<!--                </th>-->
<!--                <th *ngIf="showPrincipalAmount && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))">-->
<!--                    Principal Amount-->
<!--                </th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--            <tr>-->
<!--                <td *ngIf="(loanNatureSelected && fundableNonFundableSelcted &&  isFundable &&  isTerminating) || isVehicle || isShare || isGeneral"-->
<!--                    class="text-left pl-1">{{proposalAllData?.repaymentMode}}</td>-->
<!--                <td *ngIf="showInstallmentAmount  && ((loanNatureSelected && fundableNonFundableSelcted && isTerminating  && isFundable) || ( isVehicle || isShare || isGeneral))"-->
<!--                    class="text-right pr-1">Rs. {{proposalAllData?.installmentAmount | currencyFormatter}}</td>-->
<!--                <td *ngIf="!showInstallmentAmount &&  ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"-->
<!--                    class="text-right pr-1">Rs. {{proposalAllData?.interestAmount | currencyFormatter}}</td>-->
<!--                <td *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"-->
<!--                    class="text-left pl-1">{{proposalAllData?.repaymentModeInterest}}</td>-->
<!--                <td *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"-->
<!--                    class="text-left pl-1">{{proposalAllData?.repaymentModePrincipal}}</td>-->
<!--                <td *ngIf="showRepaymentMode && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"-->
<!--                    class="text-right pr-1">Rs.{{proposalAllData?.principalAmount}}</td>-->
<!--                <td *ngIf="showPrincipalAmount && ((loanNatureSelected && isFundable && fundableNonFundableSelcted && isTerminating) || (isVehicle || isShare || isGeneral))"-->
<!--                    class="text-right pr-1">Rs.{{proposalAllData?.principalAmount}}</td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->
<!--    </div>-->
<!--</div>-->
