<section class="enable-print">
    <nb-card>
        <nb-card-body>
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-responsive-md table-bordered table-responsive-sm table-condensed table-sm text-center sb-small">
                        <tr class="sb-bg-dark text-white">
                            <td>Originating Branch</td>
                            <td>Date</td>
                            <td>Next Review</td>
                            <td>CFR/CA Ref.:</td>
                        </tr>
                        <tr>
                            <td class="text-left pl-1">test1</td>
                            <td class="text-left pl-1">test2</td>
                            <td class="text-left pl-1">test3</td>
                            <td class="text-left pl-1">test4</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-responsive-md table-bordered table-condensed table-sm text-left sb-small">
                        <tr>
                            <td>Customer & Address:</td>
                            <td>Obligor Group & Location</td>
                            <td>Risk Grade: </td>
                        </tr>
                        <tr>
                            <td>Name: Mr. {{loanDataHolder?.loanHolder.name}}</td>
                            <td rowspan="7">Name: to be Created</td>
                            <td>Basel Risk</td>
                        </tr>
                        <tr>
                            <td>Permanent Address:
                                {{loanDataHolder?.customerInfo?.province?.name}}, {{loanDataHolder?.customerInfo?.district?.name}},
                                {{loanDataHolder?.customerInfo?.municipalities?.name}}, {{loanDataHolder?.customerInfo?.wardNumber}}</td>
                            <td>NRB Sector Code: </td>
                        </tr>
                        <tr>
                            <td>Current Address:
                                {{loanDataHolder?.customerInfo?.temporaryProvince?.name}}, {{loanDataHolder?.customerInfo?.temporaryDistrict?.name}},
                                {{loanDataHolder?.customerInfo?.temporaryMunicipalities?.name}}, {{loanDataHolder?.customerInfo?.temporaryWardNumber}}</td>
                            <td>NRB Security Code: </td>
                        </tr>
                        <tr>
                            <td>Contact No.: {{loanDataHolder?.customerInfo?.contactNumber}}</td>
                            <td>NRB Product Code</td>
                        </tr>
                        <tr>
                            <td rowspan="3">Contact Person:</td>
                            <td>Risk Type</td>
                        </tr>
                        <tr>
                            <td> SIS Sector/Sub-Sector Code:</td>
                        </tr>
                        <tr>
                            <td>SIS Collateral Code:</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-responsive-md table-bordered table-condensed table-sm text-center sb-small">
                        <tr class="sb-bg-dark text-white">
                            <td rowspan="2" colspan="1">Facilities</td>
                            <td colspan="2">Existing</td>
                            <td colspan="2">Proposed Limit</td>
                            <td colspan="1" rowspan="2">Pricing</td>
                            <td colspan="1" rowspan="2">Tenure</td>
                            <td colspan="1" rowspan="2">Security</td>
                        </tr>
                        <tr class="sb-bg-dark text-white">
                            <td colspan="1">Funded</td>
                            <td colspan="1">Non-Funded</td>
                            <td colspan="1">Funded</td>
                            <td colspan="1">Non-Funded</td>
                        </tr>
                        <tr *ngFor="let data of customerAllLoanList">
                            <td colspan="1" class="text-left pl-1">{{data?.loan?.name}}</td>
                            <td colspan="1" class="text-right pr-1">
                                <span *ngIf="data?.loan?.isFundable">
                                    <span *ngIf="(data?.proposal?.data | jsonParse)?.existingLimit">
                                        {{(data?.proposal?.data | jsonParse)?.existingLimit | currencyFormatter}}
                                    </span>
                                </span>
                                <span *ngIf="(!data?.loan?.isFundable) || !(data?.proposal?.data | jsonParse)?.existingLimit">-</span>
                            </td>
                            <td colspan="1" class="text-right pr-1">
                                <span *ngIf="!data?.loan?.isFundable">
                                    <span *ngIf="(data?.proposal?.data | jsonParse)?.existingLimit">
                                        {{(data?.proposal?.data | jsonParse)?.existingLimit | currencyFormatter}}
                                    </span>
                                </span>
                                <span *ngIf="(data?.loan?.isFundable) || !(data?.proposal?.data | jsonParse)?.existingLimit">-</span>
                            </td>
                            <td colspan="1" class="text-right pr-1">
                                <span *ngIf="data?.loan?.isFundable">
                                    {{data?.proposal?.proposedLimit | currencyFormatter}}
                                </span>
                                <span *ngIf="(!data?.loan?.isFundable) || (data?.proposal?.proposedLimit < 0)">-</span>
                            </td>
                            <td colspan="1" class="text-right pr-1">
                                <span *ngIf="!data?.loan?.isFundable">
                                    {{data?.proposal?.proposedLimit | currencyFormatter}}
                                </span>
                                <span *ngIf="(data?.loan?.isFundable) || (data?.proposal?.proposedLimit < 0)">-</span>
                            </td>
                            <td colspan="1" class="text-right pr-1">
                                <span>
                                    ... % pa (BR% + ...%)

                                    Loan Processing Fee: ...%of the limit
                                </span>
                            </td>
                            <td colspan="1" class="text-left pl-1">
                                <span>... years from the date of disbursement</span>
                            </td>
                            <td colspan="1" class="text-left pl-1">
                                <span>
                                    Registered mortgage over
                                    Owner:
                                    Location:       Ward No.:
                                    Plot No.: ......., Area: ...... sq.m

                                    Valuation Date and Valuator: ........;.......Pvt.Ltd.
                                </span>
                                <table>
                                    <tr>
                                        <td>Particulars</td>
                                        <td>MV</td>
                                        <td>FMV</td>
                                        <td>DV</td>
                                    </tr>
                                    <tr>
                                        <td>Land</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Buinding</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Total</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr *ngFor="let dto of customerLoanDtoList">
                            <td colspan="1" class="text-left pl-1">{{dto?.name}}</td>
                            <td colspan="1" class="text-right pr-1">
                                <span *ngIf="dto?.loanConfig?.isFundable">
                                    <span *ngIf="(dto?.proposal?.data | jsonParse)?.existingLimit">
                                        {{(dto?.proposal?.data | jsonParse)?.existingLimit | currencyFormatter}}
                                    </span>
                                </span>
                                <span *ngIf="(!dto?.loanConfig?.isFundable) || (!(dto?.proposal?.data | jsonParse)?.existingLimit)">-</span>
                            </td>
                            <td colspan="1" class="text-right pr-1">
                                <span *ngIf="!dto?.loanConfig?.isFundable">
                                    <span *ngIf="(dto?.proposal?.data | jsonParse)?.existingLimit">
                                        {{(dto?.proposal?.data | jsonParse)?.existingLimit | currencyFormatter}}
                                    </span>
                                </span>
                                <span *ngIf="(dto?.loanConfig?.isFundable) || (!(dto?.proposal?.data | jsonParse)?.existingLimit)">-</span>
                            </td>
                            <td colspan="1" class="text-right pr-1">
                                <span *ngIf="dto?.loanConfig?.isFundable">
                                    {{dto?.proposal?.proposedLimit | currencyFormatter}}
                                </span>
                                <span *ngIf="(!dto?.loanConfig?.isFundable) || (dto?.proposal?.proposedLimit < 0)">-</span>
                            </td>
                            <td colspan="1" class="text-right pr-1">
                                <span *ngIf="!dto?.loanConfig?.isFundable">
                                    {{dto?.proposal?.proposedLimit | currencyFormatter}}
                                </span>
                                <span *ngIf="(dto?.loanConfig?.isFundable) || (dto?.proposal?.proposedLimit < 0)">-</span>
                            </td>
                            <td colspan="1" class="text-right pr-1">
                                <span>
                                    ... % pa (BR% + ...%)

                                    Loan Processing Fee: ...%of the limit
                                </span>
                            </td>
                            <td colspan="1" class="text-left pl-1">
                                <span>... years from the date of disbursement</span>
                            </td>
                            <td colspan="1" class="text-left pl-1">
                                <span>
                                    Registered mortgage over
                                    Owner:
                                    Location:       Ward No.:
                                    Plot No.: ......., Area: ...... sq.m

                                    Valuation Date and Valuator: ........;.......Pvt.Ltd.
                                </span>
                                <table>
                                    <tr>
                                        <td>Particulars</td>
                                        <td>MV</td>
                                        <td>FMV</td>
                                        <td>DV</td>
                                    </tr>
                                    <tr>
                                        <td>Land</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Buinding</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Total</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>Total</td>
                            <td>{{getTotalFundable('existingLimit', true, customerAllLoanList) | currencyFormatter}}</td>
                            <td>{{getTotalFundable('existingLimit', false, customerAllLoanList) | currencyFormatter}}</td>
                            <td>{{getTotalFundable('proposedLimit', true, customerAllLoanList) | currencyFormatter}}</td>
                            <td>{{getTotalFundable('proposedLimit', false, customerAllLoanList) | currencyFormatter}}</td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="row">
<!--                <div class="col-md-12">-->
<!--                    <table class="table table-responsive-md table-bordered table-condensed table-sm text-center sb-small">-->
<!--                        <tr class="sb-bg-dark text-white">-->
<!--                            <th>S.N</th>-->
<!--                            <th>Date</th>-->
<!--                            <th>From User</th>-->
<!--                            <th>To User</th>-->
<!--                            <th>Status</th>-->
<!--                            <th class="cmt-width">Remarks</th>-->
<!--                        </tr>-->
<!--                        <tbody>-->
<!--                        <tr *ngFor="let previousList of loanDataHolder?.previousList ; let i = index">-->
<!--                            <td>{{i + 1}}</td>-->
<!--                            <td class="text-left pl-1">-->
<!--                                {{previousList?.lastModifiedAt | date}} ({{previousList?.lastModifiedAt | engNepDate: false}})-->
<!--                            </td>-->
<!--                            <td class="text-left">-->
<!--                                <div class="pl-1">-->
<!--                                    {{previousList?.fromUser?.name}}</div>-->
<!--                                <div class="pl-1">-->
<!--                                    <span>({{previousList?.fromRole?.roleName}})</span>-->
<!--                                </div>-->
<!--                            </td>-->

<!--                            <td class="text-left">-->
<!--                                <div class="pl-1">-->
<!--                                    {{previousList?.toUser?.name}}</div>-->
<!--                                <div class="pl-1">-->
<!--                                    ({{previousList?.toRole?.roleName}})-->
<!--                                </div>-->
<!--                            </td>-->

<!--                            <td class="text-left pl-1">{{previousList?.docAction | loanStatusPipe }}</td>-->
<!--                            <td class="text-left">-->
<!--&lt;!&ndash;                                <div class="pl-1 disable-print" [innerHTML]="customSafePipe(&ndash;&gt;-->
<!--&lt;!&ndash;                                    previousList?.comment?.length > 50 ?&ndash;&gt;-->
<!--&lt;!&ndash;                                    previousList?.comment?.substring(0, 49) :&ndash;&gt;-->
<!--&lt;!&ndash;                                    previousList?.comment)">&ndash;&gt;-->
<!--&lt;!&ndash;                                </div>&ndash;&gt;-->
<!--&lt;!&ndash;                                <a (click)="open(previousList?.comment)"&ndash;&gt;-->
<!--&lt;!&ndash;                                   *ngIf="previousList?.comment?.length > 50"&ndash;&gt;-->
<!--&lt;!&ndash;                                   class="text-left pl-1 disable-print">read more ....</a>&ndash;&gt;-->
<!--&lt;!&ndash;                                <div>&ndash;&gt;-->
<!--&lt;!&ndash;                                    <span class="pl-1 print-only justify-content" [innerHTML]="previousList?.comment | safeHtml"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                                </div>&ndash;&gt;-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>{{1}}</td>-->
<!--                            <td class="text-left pl-1">{{loanDataHolder?.currentStage?.lastModifiedAt | date}} ({{loanDataHolder?.currentStage?.lastModifiedAt | engNepDate: false}})</td>-->
<!--                            <td class="text-left">-->
<!--                                <div class="pl-1">-->
<!--                                    {{loanDataHolder?.currentStage?.fromUser?.name}}</div>-->
<!--                                <div class="pl-1">-->
<!--                                    <span>({{loanDataHolder?.currentStage?.fromRole?.roleName}})</span>-->
<!--                                </div>-->
<!--                            </td>-->

<!--                            <td class="text-left">-->
<!--                                <div class="pl-1">-->
<!--                                    {{loanDataHolder?.currentStage?.toUser?.name}}</div>-->
<!--                                <div class="pl-1">-->
<!--                                    <span>({{loanDataHolder?.currentStage?.toRole?.roleName}})</span>-->
<!--                                </div>-->
<!--                            </td>-->

<!--                            <td class="text-left pl-1">{{loanDataHolder?.currentStage?.docAction | loanStatusPipe }}</td>-->
<!--                            <td class="text-left">-->
<!--&lt;!&ndash;                                <div class="pl-1 disable-print">&ndash;&gt;-->
<!--&lt;!&ndash;                                    <span [innerHTML]="customSafePipe(loanDataHolder?.currentStage?.comment?.length > 50 ?&ndash;&gt;-->
<!--&lt;!&ndash;                                    loanDataHolder?.currentStage?.comment?.substring(0, 49) :&ndash;&gt;-->
<!--&lt;!&ndash;                                    loanDataHolder?.currentStage?.comment)"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                                </div>&ndash;&gt;-->
<!--&lt;!&ndash;                                <a (click)="open(loanDataHolder.currentStage.comment)"&ndash;&gt;-->
<!--&lt;!&ndash;                                   *ngIf="loanDataHolder?.currentStage?.comment?.length > 50"&ndash;&gt;-->
<!--&lt;!&ndash;                                   class="text-left pl-1 disable-print">read more ....</a>&ndash;&gt;-->
<!--&lt;!&ndash;                                <div>&ndash;&gt;-->
<!--&lt;!&ndash;                                    <span class="pl-1 print-only text-justify pr-1" [innerHTML]="loanDataHolder?.currentStage?.comment | safeHtml"></span>&ndash;&gt;-->
<!--&lt;!&ndash;                                </div>&ndash;&gt;-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->
                    <div class="col-md-8">
                        <table>
                            <tr>
                                <td><span>Branch/Unit Originating CFR</span>
                                    <span>Prepared By:</span>
                                    Recommended By:
                                    Reviewed By:
                                    Approved By
                                </td>
                                <td>
                                    Approved by:

                                </td>
                            </tr>
                        </table>
<!--                        <app-signature-section [loanDataHolder]="loanDataHolder"> </app-signature-section>-->
                        signature
                    </div>
                    <div class="col-md-4">
                        Personal Guarantee of Mrs...... (Spouse of the borrower) of NPR ..... Mio. <br>
                        Consent of Ms. .... <br>
                        <b>Total</b> <br>
                        Tangible: NPR ..... Mio
                        Intangible: .... Mio
                        Security Coverage: Ratio for funded Facility of NPR .... Mio.

                        a. Land & Building :- .....% at FMV
                        b. Personal Guarantee :- 100%.
                    </div>
<!--                </div>-->
            </div>
        </nb-card-body>
    </nb-card>
</section>
