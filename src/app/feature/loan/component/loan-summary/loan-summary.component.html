<section>
    <nb-card>
        <nb-card-header>
            <app-loan-action [loanConfigId]="loanConfigId" [id]="customerId" [actionsList]="actionsList"
                             *ngIf="showAction"></app-loan-action>
        </nb-card-header>
        <nb-card-body id="print-summary">
            <div class="row ">
                <div class="col-md-3">
                    Priority: <span class="badge badge-danger"
                                    style="font-size: 11px">{{loanDataHolder?.dmsLoanFile?.priority || loanDataHolder?.priority | lowercase}}</span>

                    <div class="row ml-0 mt-1">
                        <div class="inline">

                            Loan Status:<span class="badge badge-info"
                                              style="font-size: 11px">{{loanDataHolder.documentStatus | lowercase}}</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-5 col-xs-5 " style="text-align: center">
                    <!--<img src="../../../../../assets/img/logo.png">-->
                    <h2>{{bankName}}</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-md-5">
                    <span><b>Pending Under: {{loanDataHolder?.currentStage?.fromUser?.name}}</b></span>
                </div>
                <div class="offset-3">
                    <div class="text-right">
                        <span><b>Branch: {{loanDataHolder?.branch?.name}}</b></span>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-md-5">
                    <span><b>Ref. No: {{dmsLoanFile?.id}}</b></span>
                </div>
                <div class="col-md-6">
                    <p class="text-right"><b>Date:{{loanDataHolder?.createdAt | date}}</b></p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p style="font-size: 15px"><b>Details of Borrower</b></p>
                    <table class="table table-condensed table-bordered border-3">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Citizenship Number</th>
                            <th>Contact Number</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{dmsLoanFile?.customerName || loanDataHolder?.customerInfo?.customerName}}</td>
                            <td>{{dmsLoanFile?.citizenshipNumber || loanDataHolder?.customerInfo?.citizenshipNumber}}
                            </td>
                            <td>{{dmsLoanFile?.contactNumber || loanDataHolder?.customerInfo?.mobile}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p style="font-size: 15px"><b>Detail of Present Proposal of the Facility</b></p>
                    <table class="table table-condensed table-bordered">
                        <thead>
                        <tr>
                            <th>S.N</th>
                            <th>Credit Facility</th>
                            <th>Proposed Limit</th>
                            <th>Interest Rate</th>
                            <th>Tenure Duration In Month</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>{{loanDataHolder?.loan?.name}}</td>
                            <td>{{dmsLoanFile?.proposedAmount || loanDataHolder?.proposal?.proposedLimit}}</td>
                            <td>{{dmsLoanFile?.interestRate || loanDataHolder?.proposal?.interestRate}}</td>
                            <td>{{(dmsLoanFile?.tenure || loanDataHolder?.proposal?.tenureYear) | date}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>


            <div class="row mt-3">
                <div class="col-md-12">
                    <p style="font-size: 15px"><b>Security Offered</b></p>
                    <table class="table table-condensed table-bordered">
                        <thead>
                        <tr>
                            <th>S.N</th>
                            <th>Securities</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let security of securities; let i = index">
                            <td>{{i + 1}}</td>
                            <td>{{Security[security]}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-md-6">
                    <p style="font-size: 15px"><b>Service Charge Type</b></p>
                    <table class="table table-condensed table-bordered">
                        <tbody>
                        <tr>
                            <td>{{dmsLoanFile?.serviceChargeType}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-md-6">
                    <p style="font-size: 15px"><b>Service Charge Amount</b></p>
                    <table class="table table-condensed table-bordered">
                        <tbody>
                        <tr>
                            <td>{{dmsLoanFile?.serviceChargeAmount}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-md-12">
                    <p style="font-size: 15px"><b>Recommendation and Conclusion</b></p>
                    <table class="table table-condensed table-bordered">
                        <tbody>
                        <tr>
                            <td>{{dmsLoanFile?.recommendationConclusion}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-md-12">
                    <p style="font-size: 15px"><b>Waiver</b></p>
                    <table class="table table-condensed table-bordered">
                        <tbody>
                        <tr>
                            <td>{{dmsLoanFile?.waiver}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-md-12">
                    <p style="font-size: 15px"><b>Authority Section</b></p>
                    <table class="table table-condensed table-bordered">
                        <thead>
                        <tr>
                            <th>S.N</th>
                            <th>Comment</th>
                            <th>User</th>
                            <th>Status</th>
                            <th>Position</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let previousList of loanDataHolder?.previousList ; let i = index">
                            <td>{{i + 1}}</td>
                            <td>{{previousList?.comment}}</td>
                            <td>{{previousList?.fromUser?.name}}</td>
                            <td>{{previousList?.docAction}}</td>
                            <td>{{previousList?.fromRole?.roleName}}</td>
                        </tr>
                        <tr>
                            <td>{{currentIndex+1}}</td>
                            <td>{{loanDataHolder?.currentStage?.comment}}</td>
                            <td>{{loanDataHolder?.currentStage?.fromUser?.name}}</td>
                            <td>{{loanDataHolder?.currentStage?.docAction}}</td>
                            <td>{{loanDataHolder?.currentStage?.fromRole?.roleName}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p style="font-size: 15px"><b>Required Documents</b></p>
                    <table class="table table-condensed table-bordered">
                        <thead>
                        <tr>
                            <th>S.N</th>
                            <th>Document</th>
                            <th>Download</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let document of documentNames; let i = index">
                            <td>{{i + 1}}</td>
                            <td>{{document}}</td>
                            <td><i class="fa fa-download" (click)="download(i)" aria-hidden="true"
                                   style="cursor: pointer"></i>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngFor="let previous of signatureList;" class="col-md-6" style="padding-top: 50px">
                    <div class="row d-flex justify-content-center signature">

                        <img *ngIf="previous.toUser?.signatureImage !==null"
                             src="{{RootUrl}}/{{previous.toUser?.signatureImage }}" height="70px" width="180px"/>
                    </div>

                    <div class="row d-flex justify-content-center">

                        <hr style="border-top: 2px dotted #8c8b8b;background-color: #fff;  height: 1px;clear:both; display:block;width:50%">
                    </div>
                    <div class="row d-flex justify-content-center">
                        <span>{{previous?.toUser?.role.roleName}}</span>
                    </div>
                    <div class="row d-flex justify-content-center">
                        <span>  <span>{{previous?.toUser?.name}}</span></span>
                    </div>
                    <div class="row d-flex justify-content-center">
                        <span>  <span>{{previous?.lastModifiedAt}}</span></span>
                    </div>

                </div>
            </div>
        </nb-card-body>
    </nb-card>
</section>
