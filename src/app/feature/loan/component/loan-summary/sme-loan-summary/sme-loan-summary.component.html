<section class="enable-print">
    <nb-card>
        <nb-card-body id="print-block">
            <div class="row disable-print">
                <div class="col-md-12">
                    <div *ngIf="loanDataHolder?.documentStatus?.toString() === 'PENDING'||
                    loanDataHolder?.documentStatus?.toString() === 'DISCUSSION' ||
                    loanDataHolder?.documentStatus?.toString() === 'UNDER_REVIEW'">
                        <nb-accordion>
                            <nb-accordion-item>
                                <nb-accordion-item-header>File Under Possession</nb-accordion-item-header>
                                <nb-accordion-item-body>
                                    <app-role-heirarchy-chain [refId]="id" [loanDataHolder]="loanDataHolder"
                                        [branchId]="loanDataHolder?.branch?.id"
                                        [combinedLoanId]="loanDataHolder?.combinedLoan?.id"
                                        [loanFlags]="loanDataHolder?.loanHolder?.loanFlags"></app-role-heirarchy-chain>
                                </nb-accordion-item-body>
                            </nb-accordion-item>
                        </nb-accordion>
                    </div>
                    <div class="mt-2"
                        *ngIf="(loanDataHolder?.documentStatus?.toString() === 'DISCUSSION' ||
                    loanDataHolder?.documentStatus?.toString() === 'UNDER_REVIEW'||
                    loanDataHolder?.documentStatus?.toString() === 'INITIAL' ||
                    loanDataHolder?.documentStatus?.toString() === 'PENDING') && roleType === 'MAKER' && productUtils.LOAN_APPROVAL_HIERARCHY_LEVEL.toString() === 'LOAN'">
                        <button class="btn btn-primary sb-medium text-uppercase" nbButton size="small" status="primary"
                            nbTooltip="Configure Approval Role Hierarchy"
                            (click)="SetRoleHierarchy(loanDataHolder?.id)">
                            Set Role Hierarchy
                        </button>
                    </div>
                    <br>
                    <button nbButton shape="rectangle" status="primary" size="tiny" (click)="goToCustomer()"><em
                            class="fas fa-backward"></em> <span class="px-2">Customer Profile</span></button>

                    <button *ngIf="!disableApprovalSheetFlag" nbButton shape="rectangle" status="primary"
                        class="float-right" size="tiny" (click)="goToApprovalSheet()">
                        <span class="text-right px-2">
                            Approval Sheet
                        </span>
                        <em class="fas fa-forward"></em>
                    </button>
                    <!--
                  uncomment if needed
                  <button *ngIf="!disableApprovalSheetFlag && showApprovalSheetInfo"
                            nbButton
                            shape="rectangle"
                            status="success"
                            class="float-right"
                            size="tiny" (click)="openApprovalSheetInfoModal()">
                        <span class="text-right">
                            Approval Doc Info
                        </span>
                        <em class="fas fa-forward"></em>
                    </button>-->
                </div>
            </div>
            <div *ngIf="loanDataHolder?.parentId || loanDataHolder?.childId"
                class="row text-success cursor disable-print">
                <div class="col-md-6 text-left">
                    <a (click)="renewedOrCloseFrom(loanDataHolder?.parentId,loanDataHolder?.loan?.id)"
                        *ngIf="loanDataHolder?.parentId !== null"
                        class="text-left">{{loanType[loanDataHolder?.loanType]}} From <i class="p-1 fa fa-eye"></i></a>
                </div>
                <div class="col-md-6 text-right">
                    <a (click)="renewedOrCloseFrom(loanDataHolder?.childId,loanDataHolder?.loan?.id)"
                        *ngIf="loanDataHolder?.childId !== null"
                        class="text-right">{{loanType[loanDataHolder?.loanType]}} to <i class="p-1 fa fa-eye"></i></a>
                </div>
                <div class="col-md-12">
                    <hr />
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-3">

                            <div class="mt-3 mb-1">
                                <strong> Priority:</strong>
                                <span class="badge badge-danger ml-1"
                                    style="font-size: 13px;line-height: 1.9em;line-height: 1.9em">
                                    {{loanDataHolder?.priority?.toString() | titlecase}}</span>
                            </div>
                            <div class="mt-2">
                                <strong>Loan Status:</strong>
                                <span class="badge badge-info ml-1" style="font-size: 13px;line-height: 1.9em">
                                    {{loanDataHolder?.documentStatus?.toString() | titlecase}}</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="report-header text-center">
                                <div class="report-header-heading mb-2">
                                    {{client}}
                                </div>
                                <ng-template #executiveSummary>
                                    <h2 class="report-header-sub-heading">
                                        Executive Summary
                                    </h2>
                                </ng-template>
                                <ng-container *ngIf="isDetailedView; else executiveSummary">
                                    <div>
                                        <span class="report-header-sub-heading"> Credit Appraisal </span>
                                        <br />
                                        <span class="report-header-sub-heading"> for </span>
                                    </div>
                                    <div *ngIf="!isJointInfo">
                                        <span class="report-header-sub-heading">
                                            <strong>
                                                {{loanCategory === 'INSTITUTION' ?
                                                loanDataHolder?.companyInfo?.companyName
                                                : loanDataHolder?.customerInfo?.customerName}}
                                            </strong>
                                        </span>
                                    </div>
                                    <div class="report-header-sub-heading" *ngIf="isJointInfo">
                                        <div *ngFor="let jointCustomer of jointInfo">
                                            <ng-container *ngFor="let info of jointCustomer">
                                                <span class="sb-medium">{{loanCategory === 'INSTITUTION' ?
                                                    loanDataHolder?.companyInfo?.companyName :
                                                    info?.customerName}}</span><br />
                                            </ng-container>
                                        </div>
                                    </div>
                                </ng-container>
                                <div class="report-header-sub-heading mt-1 ml-1 mb-1">{{loanDataHolder?.branch?.name}}
                                    Branch
                                    ,
                                    {{loanDataHolder?.branch?.province?.name}}</div>
                                <!-- <div class="badge badge-warning m-1 p-2" style="font-size: 1rem;">Summary</div> -->
                            </div>
                        </div>
                        <div class="col-md-3 text-right">
                            <img class="report-log img-thumbnail border-0" alt="logo"
                                src="../../../../../assets/img/logo.png">
                        </div>
                    </div>
                </div>
            </div>
            <hr class="print-line">
            <!-- <div class="row">
                <div class="col-md-12">
                    <app-credit-facility-report [loanDataHolder]="loanDataHolder"
                        [customerLoanList]="customerAllLoanList"></app-credit-facility-report>
                </div>
            </div> -->
            <div class="row ">
                <div class="col-md-12 sb-small">
                    <div class="clearfix">
                        <div class="float-left">
                            <p><strong>Ref. No: </strong>{{loanDataHolder?.refNo}}</p>
                        </div>
                        <div class="float-right" *ngIf="loanDataHolder?.isSol">
                            <span><strong>Final Approver: </strong>{{loanDataHolder?.solUser?.name}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col mt-3 disable-print" style="margin-left: -2.3rem;">
                <div class="col-md-6">
                    <button class="btn btn-primary btn-semi-round btn-sm font-weight-bold"
                        (click)="detailViewCheck()">{{!isDetailedView ? "DETAILED VIEW" : "EXECUTIVE SUMMARY"}}</button>
                </div>
                <div class="col-md-12 mt-4" style="margin-left: 0.3rem" *ngIf="isDetailedView">
                    <nb-radio-group class="d-flex" (valueChange)="isRadioSelected($event)">
                        <nb-radio *ngFor="let view of viewName"
                                  [value]="view">{{view}}
                        </nb-radio>
                    </nb-radio-group>
                </div>
            </div>

            <hr class="print-line disable-print">
            <ng-container>
                <div class="row">
                    <div *ngIf="crgGammaSummary" class="col-md-12">
                        <nb-card class="sb-medium">
                            <nb-card-header class="text-center">
                                <p><strong>Credit Risk Gauge (Gamma)</strong></p>
                            </nb-card-header>
                            <nb-card-body>
                                <div class="row">
                                    <div class="col-md-6 text-right">
                                        <app-gauge-chart [chartHeight]="180" [chartWidth]="275" [maxValue]="100"
                                            [obtainedValue]="crgGammaScore" gaugeIdentifier="crg-gamma">
                                        </app-gauge-chart>
                                    </div>
                                    <div class="col-md-6 gauge-label-padding">
                                        <div class="vertical-line">
                                            <div class="text-left pl-2">
                                                <h5>Gamma</h5><br>
                                                Credit Risk Grade:
                                                <span [class]="crgGammaGradeStatusBadge">
                                                    {{crgGammaGrade | titlecase}}</span>
                                            </div>
                                            <br>
                                            <div class="text-left pl-2">
                                                Credit Risk Score:
                                                <span><strong> {{ crgTotalRiskScore }}</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </nb-card-body>
                        </nb-card>
                    </div>

                    <!--CRG - Alpha-->
                    <div *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'" class="col-md-12">
                        <div *ngIf="creditRiskAlphaSummary">
                            <nb-card class="sb-medium">
                                <nb-card-header>
                                    <p><strong>Credit Risk Gauge (Alpha)</strong></p>
                                </nb-card-header>
                                <nb-card-body>
                                    <div class="row">
                                        <div class="col-md-6 mr-0 pr-0 text-right">
                                            <app-gauge-chart [chartWidth]="275" gaugeIdentifier="crg-alpha"
                                                [chartHeight]="180" [maxValue]="100"
                                                [obtainedValue]="creditRiskAlphaScore">
                                            </app-gauge-chart>
                                        </div>
                                        <div class="col-md-6 ml-0 gauge-label-padding">
                                            <div class="vertical-line">
                                                <div class="text-left pl-2">
                                                    Current year (as) :
                                                    <span><strong> {{ creditRiskRatingAlphaCurrentYear
                                                            }}</strong></span>
                                                </div>
                                                <br>
                                                <div class="text-left pl-2">
                                                    Credit Risk Grade :
                                                    <span [class]="creditGradeAlphaStatusBadge">
                                                        {{creditRiskGradeAlpha | titlecase}}</span>
                                                </div>
                                                <br>
                                                <div class="text-left pl-2">
                                                    Credit Risk Rating :
                                                    <span [class]="creditGradeAlphaStatusBadge">
                                                        {{ creditRiskRatingAlpha | titlecase }}</span>
                                                </div>
                                                <br>
                                                <div class="text-left pl-2">
                                                    Credit Risk Score :
                                                    <span><strong> {{ creditRiskAlphaScore }}</strong></span>
                                                </div>
                                                <br>
                                                <div class="text-left pl-2">
                                                    Premium :
                                                    <span><strong> {{ creditRiskAlphaPremium }}</strong></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </nb-card-body>
                            </nb-card>
                        </div>
                    </div>

                    <!--CRG - Lambda-->
                    <div *ngIf="loanDataHolder?.loanCategory === 'INDIVIDUAL'" class="col-md-12">
                        <div *ngIf="creditRiskLambdaSummary">
                            <nb-card class="sb-medium">
                                <nb-card-header>
                                    <p>Credit Risk Gauge (Lambda)</p>
                                </nb-card-header>
                                <nb-card-body>
                                    <div class="row">
                                        <div class="col-md-6 mr-0 pr-0 text-right">
                                            <app-gauge-chart [chartWidth]="275" gaugeIdentifier="crg-lambda"
                                                [chartHeight]="180" [maxValue]="100"
                                                [obtainedValue]="creditRiskLambdaScore"></app-gauge-chart>
                                        </div>
                                        <div class="col-md-6 ml-0 gauge-label-padding">
                                            <div class="vertical-line">
                                                <div class="text-left pl-2">
                                                    Credit Risk Grade :
                                                    <span [class]="creditGradeLambdaStatusBadge">
                                                        {{creditRiskGradeLambda | titlecase}}</span>
                                                </div>
                                                <br>
                                                <div class="text-left pl-2">
                                                    Credit Risk Rating :
                                                    <span [class]="creditGradeLambdaStatusBadge">
                                                        {{ creditRiskRatingLambda | titlecase }}</span>
                                                </div>
                                                <br>
                                                <div class="text-left pl-2">
                                                    Credit Risk Score :
                                                    <span><strong> {{ creditRiskLambdaScore }}</strong></span>
                                                </div>
                                                <br>
                                                <div class="text-left pl-2">
                                                    Premium :
                                                    <span><strong> {{ creditRiskLambdaPremium }}</strong></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </nb-card-body>
                            </nb-card>
                        </div>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="isSaneView">
                <div class="row">
                    <div class="col-md-12">
                        <ol>
                            <li>
                                <p><strong>PROPOSAL:</strong> To seek approval for providing credit facilities of NPR…. to M/S…………., with details as under:</p>
                            </li>
                            <li>
                                <p><strong>APPROVING AUTHORITY:</strong>
                                    <app-role-heirarchy-chain
                                               [refId]="id" [loanDataHolder]="loanDataHolder"
                                               [branchId]="loanDataHolder?.branch?.id"
                                               [combinedLoanId]="loanDataHolder?.combinedLoan?.id"
                                               [loanFlags]="loanDataHolder?.loanHolder?.loanFlags">
                                    </app-role-heirarchy-chain>
                                    </p>
                            </li>
                            <li>
                                <p><strong>PURPOSE OF CREDIT FACILITIES:</strong> To finance …………..</p>
                                <app-proposal-justification-summary [customerAllLoanList]="customerAllLoanList"
                                                                    [proposalData]="proposalData"></app-proposal-justification-summary>

                            </li>
                            <li>
                                <!-- details of the customer -->
                                <p>
                                    <strong>DETAILS OF THE CUSTOMER:</strong><br>
                                    <app-upto-details-of-the-customer [companyInfo]="loanDataHolder?.companyInfo"
                                                                      [loanDataHolder]="loanDataHolder"></app-upto-details-of-the-customer>
                                </p>
                            </li>
                            <li>
                                <!-- background information -->
                                <p>
                                    <strong>BACKGROUND INFORMATION:</strong><br>
                                    <strong>5.1 BUSINESS:</strong>
                                </p>
<!--                                <p class="text-justify" style="margin-top: -10px">-->
<!--                                    (Details of business operations – nature of business, product ranges, installed and running-->
<!--                                    capacity, product market, market presence, supply chain, buyers and sellers, business operating-->
<!--                                    tenure, previous business extension/expansion, manpower used, innovative technology/equipment used,-->
<!--                                    scientific research and development etc, wherever applicable.)-->
<!--                                </p>-->
                                <div class="p-2 background-info col-md-12">
                                    <span [innerHTML]="tempData?.companyBackgroundBusiness | safeHtml"></span>
                                </div>
                                <p class="mt-2">
                                    <strong>5.2 PROMOTERS/KEY PERSON(S) AND THEIR NETWORTH:</strong>
                                </p>
<!--                                <p class="text-justify" style="margin-top: -10px">-->
<!--                                    (Promoter/key person’s family background, education, experiences in related fields, history of-->
<!--                                    business ownership and management, net-worth, social standings, other related businesses or occupation etc.)</p>-->
                                <div class="p-2 background-info col-md-12">
                                    <span [innerHTML]="tempData?.promotersKeyPersons | safeHtml"></span></div>
                            </li>
                            <li class="mt-3">
                                <app-sana-current-status-and-present-proposal [loanDataHolder]="loanDataHolder"></app-sana-current-status-and-present-proposal>
                            </li>
                            <li>
                                <strong>SECURITY ARRANGEMENT</strong>
                                <app-sana-security-arrangement [loanDataHolder]="loanDataHolder"></app-sana-security-arrangement>
                            </li>
                            <li>
                                <strong>KEY FINANCIAL FIGURES</strong>  (audited for last 1 year, estimated for current year, and projected up to loan tenure)
                                <app-sana-key-financial-figure></app-sana-key-financial-figure>
                            </li>
                            <li>
                                <!-- group position -->
                                <p><strong>GROUP POSITION</strong></p>
                                <app-group-position></app-group-position>
                            </li>
                            <li>
                                <p><strong>ASSESSTMENT FOR REQUIREMENT OF FUND:</strong></p>
                                <app-sana-assessment-for-requirement-of-fund [loanDataHolder]="loanDataHolder"></app-sana-assessment-for-requirement-of-fund>
                            </li>
                            <li>
                                <!-- banking relationship -->
                                <p><strong>BANKING RELATIONSHIP:</strong></p>
                                <app-upto-banking-relationship></app-upto-banking-relationship>
                            </li>
                            <li>
                                <!-- other charges -->
                                <p><strong>OTHER CHARGES:</strong></p>
                                <app-sana-other-charges></app-sana-other-charges>
                            </li>
                            <li>
                                <p><strong>COVENANTS:</strong></p>
                                <app-upto-convenants></app-upto-convenants>
                            </li>
                            <li>
                                <p><strong>DISBURSEMENT MODALITY:</strong></p>
                                <app-sana-disbursement-modality [loanDataHolder]="loanDataHolder"></app-sana-disbursement-modality>
                            </li>
                            <li>
                                <p><strong>
                                    REPAYMENT MODALITY:
                                </strong></p>
                                <app-sana-repayment-modality [loanDataHolder]="loanDataHolder"></app-sana-repayment-modality>
                            </li>
                            <li>
                                <p><strong>WAIVERS, DEVIATIONS AND DEFERRAL, IF ANY:</strong></p>
                                <app-waiver-deviations-and-deferral [loanDataHolder]="loanDataHolder"></app-waiver-deviations-and-deferral>
                            </li>
                            <li>
                                <p><strong>NRB/STATUTORY AUDITORS/INTERNAL AUDITORS REMARKS AND THEIR STATUS:</strong></p>
                                <app-nrb-statutory-remarks-status></app-nrb-statutory-remarks-status>
                            </li>
                            <li>
                                <p><strong>MIS/NRB REPORTING</strong></p>
                                <app-sana-mis-nrb-reporting [loanDataHolder]="loanDataHolder"></app-sana-mis-nrb-reporting>
                            </li>
                            <li>
                                <p><strong>CONCLUSION, REVIEW AND RECOMMENDATION:</strong></p>
<!--                                <app-conlusion-review-table></app-conlusion-review-table>-->
                                <app-signature-section [loanDataHolder]="loanDataHolder"></app-signature-section>
                            </li>
                        </ol>
                        <h5>Annexure - 1</h5>
                        <app-credit-card-requirement></app-credit-card-requirement>
<!--                        <p><strong>Proposal</strong></p>-->
<!--                        <table class="table table-bordered table-responsive-md table-sm sb-small">-->
<!--                            <tbody>-->
<!--                                <tr>-->
<!--                                    <th class="p-1 w-50">-->
<!--                                        The client has requested us to provide Rs.-->
<!--                                    </th>-->
<!--                                    <td><b>{{proposalView?.proposedLimit}}</b></td>-->
<!--                                </tr>-->
<!--                                <ng-container *ngFor="let cl of customerAllLoanList">-->
<!--                                    <tr>-->
<!--                                        <th>-->
<!--                                            Pricing:-->
<!--                                        </th>-->
<!--                                        <td>-->
<!--                                            <b>{{cl?.loan?.name}}</b>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <th>-->
<!--                                            Interest:-->
<!--                                        </th>-->
<!--                                        <td>-->
<!--                                            <b>{{(cl?.proposal?.data | jsonParse)?.interestRate}}</b>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <th>-->
<!--                                            Interest:-->
<!--                                        </th>-->
<!--                                        <td>-->
<!--                                            <b>{{(cl?.proposal?.data | jsonParse)?.interestRate}}</b>% p.a. (BR-->
<!--                                            + 0.59%)-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <th>-->
<!--                                            Loan Administrative Fee:-->
<!--                                        </th>-->
<!--                                        <td>-->
<!--                                            <b>{{(cl?.proposal?.data | jsonParse)?.serviceCharge}}</b>-->
<!--                                            % of the approved limit-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <th>-->
<!--                                            CICL charge:-->
<!--                                        </th>-->
<!--                                        <td>-->
<!--                                            <b>{{cl?.loanHolder?.cicl?.cibCharge}}</b>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <th>-->
<!--                                            Prepayment Charge:-->
<!--                                        </th>-->
<!--                                        <td>-->
<!--                                            <b>{{(cl?.proposal?.data | jsonParse)?.prepaymentCharge}}</b>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <th>-->
<!--                                            Swap Charge:-->
<!--                                        </th>-->
<!--                                        <td>-->
<!--                                            <b>{{(cl?.proposal?.data | jsonParse)?.swapCharge}}</b>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                </ng-container>-->
<!--                            </tbody>-->
<!--                        </table>-->
                    </div>
                </div>

<!--                <div class="row mt-3">-->
<!--                    <div class="col-md-12">-->
<!--                        <p><strong>Authority Section</strong></p>-->
<!--                        <table-->
<!--                            class="table table-condensed table-bordered table-responsive-md text-center table-sm sb-small">-->
<!--                            <thead>-->
<!--                                <tr class="sb-bg-dark text-white">-->
<!--                                    <th>S.N</th>-->
<!--                                    <th>Date</th>-->
<!--                                    <th>From User</th>-->

<!--                                    <th>To User</th>-->

<!--                                    <th>Status</th>-->
<!--                                    <th class="cmt-width">Remarks</th>-->
<!--                                </tr>-->
<!--                            </thead>-->
<!--                            <tbody>-->
<!--                                <tr *ngFor="let previousList of loanDataHolder?.previousList ; let i = index">-->
<!--                                    <td>{{i + 1}}</td>-->
<!--                                    <td class="text-left pl-1">-->
<!--                                        {{previousList?.lastModifiedAt | date}}-->
<!--                                        ({{previousList?.lastModifiedAt | engNepDate: false}})-->
<!--                                    </td>-->
<!--                                    <td class="text-left">-->
<!--                                        <div class="pl-1">-->
<!--                                            {{previousList?.fromUser?.name}}</div>-->
<!--                                        <div class="pl-1">-->
<!--                                            <span>({{previousList?.fromRole?.roleName}})</span>-->
<!--                                        </div>-->
<!--                                    </td>-->

<!--                                    <td class="text-left">-->
<!--                                        <div class="pl-1">-->
<!--                                            {{previousList?.toUser?.name}}</div>-->
<!--                                        <div class="pl-1">-->
<!--                                            ({{previousList?.toRole?.roleName}})-->
<!--                                        </div>-->
<!--                                    </td>-->

<!--                                    <td class="text-left pl-1">{{previousList?.docAction | loanStatusPipe }}</td>-->
<!--                                    <td class="text-left">-->
<!--                                        <div class="pl-1 disable-print" [innerHTML]="customSafePipe(-->
<!--                                    previousList?.comment?.length > 50 ?-->
<!--                                    previousList?.comment?.substring(0, 49) :-->
<!--                                    previousList?.comment)">-->
<!--                                        </div>-->
<!--                                        <a (click)="open(previousList?.comment)"-->
<!--                                            *ngIf="previousList?.comment?.length > 50"-->
<!--                                            class="text-left pl-1 disable-print">read more ....</a>-->
<!--                                        <div>-->
<!--                                            <span class="pl-1 print-only justify-content"-->
<!--                                                [innerHTML]="previousList?.comment | safeHtml"></span>-->
<!--                                        </div>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                                <tr>-->
<!--                                    <td>{{currentIndex + 1}}</td>-->
<!--                                    <td class="text-left pl-1">{{loanDataHolder?.currentStage?.lastModifiedAt | date}}-->
<!--                                        ({{loanDataHolder?.currentStage?.lastModifiedAt | engNepDate: false}})-->
<!--                                    </td>-->
<!--                                    <td class="text-left">-->
<!--                                        <div class="pl-1">-->
<!--                                            {{loanDataHolder?.currentStage?.fromUser?.name}}</div>-->
<!--                                        <div class="pl-1">-->
<!--                                            <span>({{loanDataHolder?.currentStage?.fromRole?.roleName}})</span>-->
<!--                                        </div>-->
<!--                                    </td>-->

<!--                                    <td class="text-left">-->
<!--                                        <div class="pl-1">-->
<!--                                            {{loanDataHolder?.currentStage?.toUser?.name}}</div>-->
<!--                                        <div class="pl-1">-->
<!--                                            <span>({{loanDataHolder?.currentStage?.toRole?.roleName}})</span>-->
<!--                                        </div>-->
<!--                                    </td>-->

<!--                                    <td class="text-left pl-1">{{loanDataHolder?.currentStage?.docAction |-->
<!--                                        loanStatusPipe }}-->
<!--                                    </td>-->
<!--                                    <td class="text-left">-->
<!--                                        <div class="pl-1 disable-print">-->
<!--                                            <span [innerHTML]="customSafePipe(loanDataHolder?.currentStage?.comment?.length > 50 ?-->
<!--                                    loanDataHolder?.currentStage?.comment?.substring(0, 49) :-->
<!--                                    loanDataHolder?.currentStage?.comment)"></span>-->
<!--                                        </div>-->
<!--                                        <a (click)="open(loanDataHolder.currentStage.comment)"-->
<!--                                            *ngIf="loanDataHolder?.currentStage?.comment?.length > 50"-->
<!--                                            class="text-left pl-1 disable-print">read more ....</a>-->
<!--                                        <div>-->
<!--                                            <span class="pl-1 print-only text-justify pr-1"-->
<!--                                                [innerHTML]="loanDataHolder?.currentStage?.comment | safeHtml"></span>-->
<!--                                        </div>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                            </tbody>-->
<!--                        </table>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <app-signature-section [loanDataHolder]="loanDataHolder"></app-signature-section>-->

<!--                <div class="row sb-small mt-4">-->
<!--                    <div class="col-md-12">-->
<!--                        <p><strong>Purpose of Credit Facilities</strong></p>-->
<!--                        Loan: <b>{{loanDataHolder?.loan?.name}}</b>-->
<!--                        <span class="float-right">Loan Authority Under - -->
<!--                            <b>-->
<!--                                {{loanDataHolder?.currentStage?.toUser?.name}}-->
<!--                                ({{loanDataHolder?.currentStage?.toRole?.roleName}})-->
<!--                            </b>-->
<!--                        </span>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div class="row sb-small mb-1">-->
<!--                    <div class="col-md-12">-->
<!--                        <span>Application Received On: <b>{{loanDataHolder?.createdAt | date}}-->
<!--                                ({{nepaliDate}})</b></span>-->
<!--                        <span class="float-right">-->
<!--                            <span *ngIf="currentDocAction === 'FORWARD'">Forwarded</span>-->
<!--                            <span *ngIf="currentDocAction === 'BACKWARD'">Backwarded</span>-->
<!--                            By:-->
<!--                            <b>{{loanDataHolder?.currentStage?.fromUser?.name}}-->
<!--                                ({{loanDataHolder?.currentStage?.fromRole?.roleName}}-->
<!--                                )</b>-->
<!--                            On: <b>{{loanDataHolder?.lastModifiedAt | date}}-->
<!--                                ({{loanDataHolder?.lastModifiedAt | engNepDate: false}})</b>-->

<!--                        </span>-->

<!--                    </div>-->
<!--                </div>-->

<!--                <div *ngIf="creditRiskAlphaSummary || creditRiskLambdaSummary || crgGammaSummary">-->
<!--                    <p class="mt-4"><strong>Credit Risk Grading</strong></p>-->
<!--                    <table-->
<!--                        class="table table-condensed table-bordered table-responsive-md text-center table-sm sb-small">-->
<!--                        <thead>-->
<!--                            <tr class="text-white sb-bg-dark">-->
<!--                                <th>Credit Risk Grading (Flavour)</th>-->
<!--                                <th>Credit Risk Grade</th>-->
<!--                                <th *ngIf="creditRiskLambdaSummary || creditRiskAlphaSummary">Credit Risk Rating</th>-->
<!--                                <th>Credit Risk Score</th>-->
<!--                                <th *ngIf="creditRiskLambdaSummary || creditRiskAlphaSummary">Premium</th>-->
<!--                            </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                            <tr *ngIf="loanDataHolder?.loanCategory === 'INDIVIDUAL' && creditRiskLambdaSummary">-->
<!--                                <td class="text-left pl-1">Lambda</td>-->
<!--                                <td><span [class]="creditGradeLambdaStatusBadge">-->
<!--                                        {{creditRiskGradeLambda | titlecase}}</span>-->
<!--                                </td>-->
<!--                                <td><span [class]="creditGradeLambdaStatusBadge">-->
<!--                                        {{ creditRiskRatingLambda | titlecase }}</span>-->
<!--                                </td>-->
<!--                                <td class="text-right pr-1"><strong> {{ creditRiskLambdaScore }}</strong></td>-->
<!--                                <td class="text-right pr-1"><strong> {{ creditRiskLambdaPremium }}</strong></td>-->
<!--                            </tr>-->
<!--                            <tr *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION' && creditRiskAlphaSummary">-->
<!--                                <td class="text-left pl-1">Alpha</td>-->
<!--                                <td><span [class]="creditGradeAlphaStatusBadge"> {{creditRiskGradeAlpha |-->
<!--                                        titlecase}}</span>-->
<!--                                </td>-->
<!--                                <td><span [class]="creditGradeAlphaStatusBadge">-->
<!--                                        {{ creditRiskRatingAlpha | titlecase }}</span>-->
<!--                                </td>-->
<!--                                <td class="text-right pr-1"><strong> {{ creditRiskAlphaScore }}</strong></td>-->
<!--                                <td class="text-right pr-1"><strong> {{ creditRiskAlphaPremium }}</strong></td>-->
<!--                            </tr>-->
<!--                            <tr *ngIf="crgGammaSummary">-->
<!--                                <td class="text-left pl-1">Gamma</td>-->
<!--                                <td><span [class]="crgGammaGradeStatusBadge"> {{crgGammaGrade | titlecase}}</span></td>-->
<!--                                <td class="text-right pr-1"><span><strong> {{ crgGammaScore }}</strong></span></td>-->
<!--                            </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->

                <!-- PROPOSAL -->
<!--                <app-proposal-summary class="mt-3" *ngIf="proposalSummary" [customerAllLoanList]="customerAllLoanList"-->
<!--                    [proposalData]="proposalData" [loanDataHolder]="loanDataHolder"></app-proposal-summary>-->

                <!-- approving authority -->

<!--                <div *ngIf="loanDataHolder?.customerOfferLetter" class="row justify-content-between pt-5 disable-print"-->
<!--                    id="offerLetterDiv">-->
<!--                    <div class="col-md-12">-->
<!--                        <p><strong>Offer Letter Authority Section</strong></p>-->
<!--                    </div>-->
<!--                    <div class="col-md-12">-->
<!--                        <table-->
<!--                            class="table table-condensed table-bordered table-responsive-md text-center sb-small table-sm">-->
<!--                            <thead>-->
<!--                                <tr class="text-white sb-bg-dark">-->
<!--                                    <th>S.N</th>-->
<!--                                    <th>From User</th>-->
<!--                                    <th>From Position</th>-->
<!--                                    <th>To User</th>-->
<!--                                    <th>To Position</th>-->
<!--                                    <th>Status</th>-->
<!--                                    <th class="cmt-width">Remarks</th>-->
<!--                                </tr>-->
<!--                            </thead>-->
<!--                            <tbody>-->
<!--                                <tr-->
<!--                                    *ngFor="let previousList of loanDataHolder?.customerOfferLetter?.previousList ; let i = index">-->
<!--                                    <td>{{i + 1}}</td>-->
<!--                                    <td class="text-left pl-1">{{previousList?.fromUser?.name}}</td>-->
<!--                                    <td class="text-left pl-1">{{previousList?.fromRole?.roleName}}</td>-->
<!--                                    <td class="text-left pl-1">{{previousList?.toUser?.name}}</td>-->
<!--                                    <td class="text-left pl-1">{{previousList?.toRole?.roleName}}</td>-->
<!--                                    <td class="text-left pl-1">{{previousList?.docAction}}</td>-->
<!--                                    <td class="text-left">-->
<!--                                        <div class="pl-1">-->
<!--                                            <span [innerHTML]="customSafePipe(previousList?.comment?.length > 50 ?-->
<!--                                    previousList?.comment?.substring(0, 49) :-->
<!--                                    previousList?.comment)"></span>-->
<!--                                        </div>-->
<!--                                        <a (click)="open(previousList?.comment)"-->
<!--                                            *ngIf="previousList?.comment?.length > 50"-->
<!--                                            class="text-left pl-1 read-margin">read more ....</a>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                                <tr>-->
<!--                                    <td>{{loanDataHolder?.customerOfferLetter?.previousList?.length + 1}}</td>-->
<!--                                    <td class="text-left pl-1">-->
<!--                                        {{loanDataHolder?.customerOfferLetter?.offerLetterStage?.fromUser?.name}}</td>-->
<!--                                    <td class="text-left pl-1">-->
<!--                                        {{loanDataHolder?.customerOfferLetter?.offerLetterStage?.fromRole?.roleName}}-->
<!--                                    </td>-->
<!--                                    <td class="text-left pl-1">-->
<!--                                        {{loanDataHolder?.customerOfferLetter?.offerLetterStage?.toUser?.name}}</td>-->
<!--                                    <td class="text-left pl-1">-->
<!--                                        {{loanDataHolder?.customerOfferLetter?.offerLetterStage?.toRole?.roleName}}</td>-->
<!--                                    <td class="text-left pl-1">-->
<!--                                        {{loanDataHolder?.customerOfferLetter?.offerLetterStage?.docAction}}</td>-->
<!--                                    <td class="text-left">-->
<!--                                        <div class="pl-1">-->
<!--                                            {{loanDataHolder?.customerOfferLetter?.offerLetterStage?.comment?.length >-->
<!--                                            50 ?-->
<!--                                            loanDataHolder?.customerOfferLetter?.offerLetterStage?.comment?.substring(0,-->
<!--                                            49)-->
<!--                                            :-->
<!--                                            loanDataHolder?.customerOfferLetter?.offerLetterStage?.comment}}-->
<!--                                        </div>-->
<!--                                        <a (click)="open(loanDataHolder.customerOfferLetter?.offerLetterStage.comment)"-->
<!--                                            *ngIf="loanDataHolder?.customerOfferLetter?.offerLetterStage?.comment?.length > 50"-->
<!--                                            class="text-left pl-1 read-margin">read more ....</a>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                            </tbody>-->
<!--                        </table>-->
<!--                    </div>-->
<!--                </div>-->


                <!-- PURPOSE OF CREDIT FACILITIES -->
<!--                <div class="mt-3">-->
<!--                    <app-proposal-justification-summary *ngIf="proposalSummary"-->
<!--                        [customerAllLoanList]="customerAllLoanList" [proposalData]="proposalData">-->
<!--                    </app-proposal-justification-summary>-->
<!--                </div>-->

                <!-- details of the customer -->
<!--                <div class="col-md-12">-->
<!--                    <p><strong>Customer Details</strong></p>-->
<!--                    <app-company-info-summary [approveSheet]="notApprove" [companyInfo]="loanDataHolder?.companyInfo"-->
<!--                        [loanDataHolder]="loanDataHolder"></app-company-info-summary>-->
<!--                </div>-->
            </ng-container>
            <ng-container *ngIf="!isSaneView && !isAboveTenMillion && !isUpToTenMillion">
                <app-executive-summary-sme [loanDataHolder]="loanDataHolder"
                                           [customerAllLoanList] = "customerAllLoanList"></app-executive-summary-sme>
            </ng-container>
            <ng-container *ngIf="isUpToTenMillion">
                <app-upto-ten-million></app-upto-ten-million>
            </ng-container>
            <ng-container *ngIf="isAboveTenMillion">
                <app-above-ten-million [loanDataHolder]="loanDataHolder"
                                       [customerAllLoanList]="customerAllLoanList"></app-above-ten-million>
            </ng-container>
        </nb-card-body>
    </nb-card>
</section>
