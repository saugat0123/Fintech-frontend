<nb-card style="height: 90%;overflow-y: auto">
    <nb-card-header>
        <app-offer-letter-action></app-offer-letter-action>
    </nb-card-header>
    <nb-card-body>
        <div class="row">
            <div class="col-md-12">
                <nb-accordion [multi]="true">
                    <nb-accordion-item>
                        <nb-accordion-item-header>
                            Customer Information
                        </nb-accordion-item-header>
                        <nb-accordion-item-body>
                            <table class="table table-bordered table-striped text-center">
                                <thead>
                                <th scope="col">नाम </th>
                                <th scope="col">ठेगाना </th>
                                <th scope="col">नागरिक्ता नंबर </th>
                                <th scope="col">नागरिक्ता जारी मिति </th>
                                <th scope="col">नागरिक्ता जारी भएको स्थान </th>
                                <th scope="col">संपर्क नंबर </th>
                                </thead>
                                <tbody>
                                <tr>
                                    <td class="nepaliFont">{{nepaliData?.customerName}}</td>
                                    <td class="nepaliFont">{{nepaliData?.province}},
                                        {{nepaliData?.district}},
                                        {{nepaliData?.municipalities}},
                                        {{nepaliData?.street}},
                                        {{nepaliData?.wardNumber}}
                                    </td>
                                    <td class="nepaliFont">{{nepaliData?.citizenshipNumber}}</td>
                                    <td class="nepaliFont">{{nepaliData?.citizenshipIssuedDate}}</td>
                                    <td class="nepaliFont">{{nepaliData?.citizenshipIssuedPlace}}</td>
                                    <td class="nepaliFont">{{nepaliData?.contactNumber}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <div><h6> के.वाई.सी</h6></div>
                            <br>
                            <table *ngIf="loanDataHolder?.customerInfo?.customerRelatives.length > 0"
                                   class="table table-bordered table-striped text-center">
                                <thead>
                                <th scope="col">सम्बन्ध</th>
                                <th scope="col">नाम</th>
                                <th scope="col">नागरिकता नम्बर</th>
                                <th scope="col">जारी स्थान</th>
                                <th scope="col">जारी मिति</th>

                                </thead>
                                <tbody>
                                <ng-container
                                        *ngFor="let relative of nepaliData?.customerRelatives">
                                    <tr>
                                        <td class="nepaliFont">{{relative.customerRelation}}</td>
                                        <td class="nepaliFont">{{relative.customerRelativeName}}</td>
                                        <td class="nepaliFont">{{relative.citizenshipNumber}}</td>
                                        <td class="nepaliFont">{{relative.citizenshipIssuedPlace}}</td>
                                        <td class="nepaliFont">{{relative.citizenshipIssuedDate}}</td>
                                    </tr>
                                </ng-container>
                                </tbody>
                            </table>
                        </nb-accordion-item-body>
                    </nb-accordion-item>

                    <nb-accordion-item *ngFor="let list of offerLetterList">
                        <nb-accordion-item-header>
                            <div class="row col-md-12">
                                <div class="col-md-8">
                                    <span>{{list.name}}</span>
                                </div>
                                <div class="col-md-4 d-flex justify-content-end">
                                      <span style="color:black">
                                      <a (click)="showFullScreen(list.name)" title="full screen">
                                        <i class="fa fa-expand px-2"></i>
                                   </a>
                                    </span>
                                    <span *ngIf="list.isPresent" style="color:darkgreen">
                                     <input (change)="onFileChange($event)" class="hide-type"
                                            id="uploadOfferLetterInput"
                                            type="file">
                                     <a (click)="uploadOfferLetter(list.id,uploadModel)" title="upload {{list.name}}">
                                        <i class="fa fa-upload"></i>
                                   </a>
                                   </span>
                                    <span *ngIf="list.isPresent && list.uploadedUrl !==null" style="color:#007bff">
                                      <a (click)="previewClick(list.uploadedUrl)" title="view {{list.name}}">
                                        <i class="fa fa-eye px-2"></i>
                                   </a>
                                    </span>
                                    <span *ngIf="list.isPresent" class="px-2" title="Print {{list.name}}">
                                    <button [useExistingCss]="true"
                                            class="btn btn-flat btn-sm btn-outline-info"
                                            ngxPrint printSectionId="{{offerLetterConst.keysEnum(list.name)}}Print">
                                        <i class="fas fa-print"></i>
                                    </button>
                                    </span>
                                    <span *ngIf="list.isPresent" style="color:green" title="Status : Saved">
                                    <i class="fas fa-check-circle px-2"></i>
                                  </span>

                                    <span *ngIf="!list.isPresent" style="color:red" title="Status :Not Saved">
                                    <i class="fas fa-times-circle px-2"></i>
                                  </span>


                                </div>
                            </div>
                        </nb-accordion-item-header>
                        <nb-accordion-item-body>
                            <app-success-offer-letter
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.SUCCESS_LETTER)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder">
                            </app-success-offer-letter>

                            <app-birth-mark-letter-nepali
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.BIRTHMARK_LETTER)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder" id="{{offerLetterConst.BIRTHMARK_LETTER}}">
                            </app-birth-mark-letter-nepali>
                            <!-- CAD DOC FOR MAW --->
                            <app-dhito-likhat-manjurinama
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.DHITO_LIKHAT_MANJURINAMA)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder"
                                    [offerLetterTypeId]="list.id"></app-dhito-likhat-manjurinama>

                            <app-dhristi-bandhak
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.DHRISTI_BANDHAK)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder"
                                    [offerLetterTypeId]="list.id"></app-dhristi-bandhak>

                            <app-jamani-tamsuk
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.JAMANI_TAMSUK)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder"
                                    [offerLetterTypeId]="list.id"></app-jamani-tamsuk>

                            <app-kararnama
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.KARARNAMA)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder"
                                    [offerLetterTypeId]="list.id"></app-kararnama>

                            <app-karjatamsuk
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.KARJATAMSUK)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder"
                                    [offerLetterTypeId]="list.id"></app-karjatamsuk>

                            <app-manjurinama
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.MANJURINAMA)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder"
                                    [offerLetterTypeId]="list.id"></app-manjurinama>

                            <app-pratigya-patra
                                    *ngIf="loanDataHolder && list.name === offerLetterConst.value(offerLetterConst.PRATIGYA_PATRA)"
                                    [customerId]="customerId"
                                    [loanDataHolder]="loanDataHolder"
                                    [offerLetterTypeId]="list.id"></app-pratigya-patra>

                            <!-- CAD DOC FOR MAW --->

                        </nb-accordion-item-body>
                    </nb-accordion-item>

                    <nb-accordion-item>
                        <nb-accordion-item-header>
                            Upload Offer Letter Documents
                        </nb-accordion-item-header>
                        <nb-accordion-item-body>
                            <app-offer-letter-upload *ngIf="loanDataHolder"
                                                     [customerId]="loanDataHolder.id"
                                                     [customerOfferLetter]="loanDataHolder?.customerOfferLetter"></app-offer-letter-upload>
                        </nb-accordion-item-body>
                    </nb-accordion-item>
                </nb-accordion>
            </div>
        </div>
    </nb-card-body>
</nb-card>

<ng-template #uploadModel>
    <div>
        <div class="modal-content">
            <div class="modal-header" style="display:block">
                <a (click)="onClose()" aria-label="Close"
                   class="close cursor" data-dismiss="modal">
                    <span aria-hidden="true">×</span></a>
                <h4 class="nav  navbar-right pull-left">Upload Offer Letter</h4>
            </div>
            <div class="col-md-12">

                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group files">
                                <label>Upload Your File </label>
                                <input (change)="onFileChange($event)" class="form-control" multiple=""
                                       type="file">
                            </div>
                            <div (click)="previewClick(null)" *ngIf="preview"
                                 class="d-flex justify-content-center">
                                <button class="btn btn-primary btn-sm btn-flat"><span class="px-2">Preview</span>
                                </button>
                            </div>

                        </div>


                    </div>
                </div>

                <div class="d-flex justify-content-end">
                    <button (click)="onClose()" class="btn btn-danger  btn-flat fa-pull-left" type="submit">
                        NO
                    </button>
                    <button (click)="submitOfferLetter()" class="btn btn-success float-right" type="submit"
                    >YES
                    </button>
                </div>


            </div>

        </div>

    </div>
</ng-template>
