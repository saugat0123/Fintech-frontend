<nb-card>
  <ng-container>
    <div class="tab-pane fade active show">
      <div class="form-group">
        <div class="row">
          <div class="col-md-12">
            <nb-card>
              <nb-card-header>
                <h6 class="box-title title">Details of security offered and valuation amount</h6>
              </nb-card-header>
              <nb-card-body>
                <div class="row">
                  <div class="col-md-3">
                    <label for="promoter"><b>Loan Promoter Percent</b></label>
                    <input [(ngModel)]="savedActiveNepseMaster.promoter" class="form-control"
                           disabled id="promoter">
                  </div>

                  <div class="col-md-3">
                    <label for="ordinary"><b>Loan Ordinary Percent</b></label>
                    <input [(ngModel)]="savedActiveNepseMaster.ordinary" class="form-control"
                           disabled id="ordinary">
                  </div>
                </div>
                <br>
                <form [formGroup]="shareSecurityForm">
                  <div
                      *ngFor="let shareField of shareSecurityForm.get('shareField')['controls'];  let shareFieldIndex = index"
                      formArrayName="shareField">
                    <div [formGroupName]="shareFieldIndex">
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <label for="companyName">Select Company Name :: Company Code</label>
                            <select (change)="setShareValueByCompany(shareFieldIndex)" class="custom-select"
                                    formControlName="companyName" id="companyName"
                                    name="companyName">
                              <option [value]="null" disabled selected>--Select Company Name--
                              </option>
                              <option *ngFor="let nepse of nepseList"
                                      value="{{nepse.companyName }}">{{nepse.companyName}}
                                :: {{nepse.companyCode}}</option>
                            </select></div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <label for="shareType">Select Share Type</label>
                            <input class="form-control" formControlName="shareType" id="shareType"
                                   name="shareType" readonly type="text">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-3">
                          <div class="form-group">
                            <label for="totalShareUnit">Number of Share Unit</label>
                            <input #totalShareUnit (change)="calculateShareFieldsValues(totalShareUnit.value , shareFieldIndex)"
                                   class="form-control" formControlName="totalShareUnit" id="totalShareUnit"
                                   name="totalShareUnit"
                                   type="number">
                          </div>
                        </div>

                        <div class="col-md-3">
                          <div class="form-group">
                            <label for="shareRate">Rate of Each Unit</label>
                            <input (change)="calculateShareFieldsValues(totalShareUnit.value , shareFieldIndex)" class="form-control" formControlName="amountPerUnit"
                                   id="shareRate" name="shareRate" readonly
                                   type="number">
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <label for="total">Total</label>
                            <input class="form-control" formControlName="total" id="total"
                                   name="total" readonly type="number">
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <label for="consideredValue">Considered Value</label>
                            <input class="form-control" formControlName="consideredValue"
                                   id="consideredValue" name="total" readonly>
                          </div>
                        </div>
                      </div>
                      <div *ngIf="shareSecurityForm.get('shareField')['length'] > 1"
                           class="d-flex justify-content-sm-end">
                        <button (click)="removeShareList(shareFieldIndex)"
                                class="btn btn-sm btn-flat btn-danger">
                          <em class="fa fa-trash bg-transparent"></em>
                        </button>
                      </div>
                      <hr/>
                    </div>
                  </div>
                  <div class="d-flex justify-content-end">
                    <p class="font-weight-bolder">Total Considered
                      Value: {{totalConsideredValue}}</p>
                  </div>
                  <div class="d-flex justify-content-end">
                    <button (click)="addShareList()" class="btn btn-sm btn-flat btn-primary"><i
                        class="fa fa-plus"></i></button>
                  </div>
                </form>
              </nb-card-body>
            </nb-card>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</nb-card>
<nb-card>
  <nb-card-body>
    <div class="row">
      <div class="col-md-12">
        <label for="securityOffered">Description/Details of secuirty offered</label>
        <textarea [(ngModel)]="securityOffered" class="form-control text-area" id="securityOffered"
                  name="securityOffered">{{securityOffered}}</textarea>
      </div>
    </div>
  </nb-card-body>
</nb-card>
