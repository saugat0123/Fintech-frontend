<form [formGroup]="borrowerRiskRating">
    <h3><b>Income Statement</b></h3>
    <table class="table table-bordered">
        <thead>
        <tr class="text-center">
            <th><b>Risk Factors</b></th>
            <th><b>BBR1</b></th>
            <th><b>BBR2</b></th>
            <th><b>BBR3</b></th>
            <th><b>BBR4</b></th>
            <th><b>BBR5</b></th>
            <th><b>BBR6</b></th>
            <th><b>Total</b></th>
            <th><b>Risk Rank</b></th>
        </tr>
        </thead>

        <tbody class="text-center">
        <tr>
            <td class="text-left"><b>Management</b></td>
            <td *ngFor="let management of riskRating; let i = index">
                <input (change)="checkRating('management', (i+1))" [checked]="ratingData.get('management') === (i+1)"
                       [value]="(i+1)" formControlName="management"
                       type="radio">
            </td>
            <td>{{borrowerRiskRating.get('management').value === undefined ? '' : borrowerRiskRating.get('management').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('management').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Financial Statement Quality</b></td>
            <td *ngFor="let financialStatementQuality of riskRating; let i = index">
                <input (change)="checkRating('financialStatementQuality', (i+1))"
                       [checked]="ratingData.get('financialStatementQuality') === (i+1)"
                       [value]="(i+1)" formControlName="financialStatementQuality"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('financialStatementQuality').value === undefined ? '' : borrowerRiskRating.get('financialStatementQuality').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('financialStatementQuality').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Financial Statement Source</b></td>
            <td *ngFor="let financialStatementSource of riskRating; let i = index">
                <input (change)="checkRating('financialStatementSource', (i+1))"
                       [checked]="ratingData.get('financialStatementSource') === (i+1)"
                       [value]="(i+1)" formControlName="financialStatementSource"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('financialStatementSource').value === undefined ? '' : borrowerRiskRating.get('financialStatementSource').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('financialStatementSource').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Industry Trend</b></td>
            <td *ngFor="let industryTrend of riskRating; let i = index">
                <input (change)="checkRating('industryTrend', (i+1))"
                       [checked]="ratingData.get('industryTrend') === (i+1)" [value]="(i+1)"
                       formControlName="industryTrend"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('industryTrend').value === undefined ? '' : borrowerRiskRating.get('industryTrend').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('industryTrend').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Time in Business</b></td>
            <td *ngFor="let timeInBusiness of riskRating; let i = index">
                <input (change)="checkRating('timeInBusiness', (i+1))"
                       [checked]="ratingData.get('timeInBusiness') === (i+1)" [value]="(i+1)"
                       formControlName="timeInBusiness"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('timeInBusiness').value === undefined ? '' : borrowerRiskRating.get('timeInBusiness').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('timeInBusiness').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Collateral</b></td>
            <td *ngFor="let collateral of riskRating; let i = index">
                <input (change)="checkRating('collateral', (i+1))" [checked]="ratingData.get('collateral') === (i+1)"
                       [value]="(i+1)" formControlName="collateral"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('collateral').value === undefined ? '' : borrowerRiskRating.get('collateral').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('collateral').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Balance Sheet Ratios</b></td>
            <td *ngFor="let balanceSheetRatios of riskRating; let i = index">
                <input (change)="checkRating('balanceSheetRatios', (i+1))"
                       [checked]="ratingData.get('balanceSheetRatios') === (i+1)" [value]="(i+1)"
                       formControlName="balanceSheetRatios"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('balanceSheetRatios').value === undefined ? '' : borrowerRiskRating.get('balanceSheetRatios').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('balanceSheetRatios').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>P and L History</b></td>
            <td *ngFor="let pAndLHistory of riskRating; let i = index">
                <input (change)="checkRating('pAndLHistory', (i+1))"
                       [checked]="ratingData.get('pAndLHistory') === (i+1)" [value]="(i+1)" formControlName="pAndLHistory"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('pAndLHistory').value === undefined ? '' : borrowerRiskRating.get('pAndLHistory').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('pAndLHistory').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Debt Service Capacity</b></td>
            <td *ngFor="let debtServiceCapacity of riskRating; let i = index">
                <input (change)="checkRating('debtServiceCapacity', (i+1))"
                       [checked]="ratingData.get('debtServiceCapacity') === (i+1)" [value]="(i+1)"
                       formControlName="debtServiceCapacity"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('debtServiceCapacity').value === undefined ? '' : borrowerRiskRating.get('debtServiceCapacity').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('debtServiceCapacity').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Sales Trade</b></td>
            <td *ngFor="let salesTrade of riskRating; let i = index">
                <input (change)="checkRating('salesTrade', (i+1))" [checked]="ratingData.get('salesTrade') === (i+1)"
                       [value]="(i+1)" formControlName="salesTrade"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('salesTrade').value === undefined ? '' : borrowerRiskRating.get('salesTrade').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('salesTrade').value - 1]}}</td>
        </tr>
        <tr>
            <td class="text-left"><b>Repayment Source</b></td>
            <td *ngFor="let repaymentSource of riskRating; let i = index">
                <input (change)="checkRating('repaymentSource', (i+1))"
                       [checked]="ratingData.get('repaymentSource') === (i+1)" [value]="(i+1)"
                       formControlName="repaymentSource"
                       type="radio">
            </td>

            <td>{{borrowerRiskRating.get('repaymentSource').value === undefined ? '' : borrowerRiskRating.get('repaymentSource').value}}</td>
            <td>{{riskRating[borrowerRiskRating.get('repaymentSource').value - 1]}}</td>
        </tr>
        </tbody>
    </table>
    <div class="row">
        <div class="col-md-8">
            <h4>Justification</h4>
            <textarea class="mb-5" fullWidth nbInput placeholder="Jusification..." rows="5"></textarea>
            <!--<pre>{{borrowerRiskRating.value | json}}</pre>-->
        </div>
        <div class="col-md-4 text-center mt-5">
            <b>Total BRR</b><br/>
            <input [value]="riskAverage" class="mb-3 mt-2 text-center" readonly style="border: none; outline: none;"
                   type="text"><br/>
            <b>BRR Risk Grade</b><br/>
            <input class="mt-2 text-center" readonly style="border: none; outline: none;">
        </div>
    </div>
</form>
