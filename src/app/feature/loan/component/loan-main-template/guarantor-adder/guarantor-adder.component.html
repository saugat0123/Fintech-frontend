<nb-card>
  <nb-card-header class="text-center">
    <strong>Guarantor Information</strong>
  </nb-card-header>
  <nb-card-body>
    <div class="row mt-3">
      <div class="col-md-12 input-group-prepend">
        <ng-select placeholder="select guarantor" style="width:100%"  fullWidth nbInput #selectedGuarantor [formControl]="guarantor">
          <ng-option *ngFor="let guarantor of guarantorList" [value]="guarantor" >
            {{guarantor.name}} / {{guarantor.issuedPlace}}
          </ng-option>
        </ng-select>
        <button [disabled]="!guarantor.valid" nbButton size="small" (click)="addGuarantorDetail(guarantor.value)"> <i
                class="fa fa-plus"></i></button>
      </div>
    </div>
    <p><strong class="mt-2 text-danger">{{msg}}</strong></p>
    <div  class="row mt-5">
      <div class="col-md-12">
        <p><strong>Tagged Guarantor Details</strong></p>
        <table
                class="table table-condensed table-bordered table-responsive-md text-center table-sm sb-small">
          <thead>
          <tr class="text-white sb-bg-dark">
            <th>S.N</th>
            <th>Name</th>
            <th>CitizenNumber</th>
            <th>Address</th>
            <th>ContactNumber</th>
            <th>Action</th>
          </tr>
          </thead>
          <tbody>
          <ng-container *ngFor="let guarantorData of selectedGuarantorList; let i= index">
            <tr>
              <ng-container>
                <td>{{i + 1}}</td>
                <td>{{guarantorData?.name}}</td>
                <td>{{guarantorData?.citizenNumber}}</td>
                <td>{{guarantorData?.issuedPlace }},{{guarantorData?.province?.name}}
                  ,{{guarantorData?.district?.name}}</td>
                <td>{{guarantorData?.contactNumber}}</td>
                <td>
                  <button (click)="removeGuarantor(guarantorData)"
                          class="btn btn-sm btn-flat btn-danger">
                    <em class="fa fa-trash bg-transparent"></em>
                  </button>
                  <button class="ml-1 btn btn-sm btn-flat btn-primary"
                          (click)="toggle[i].hide = !this.toggle[i].hide">
                    <em class="fa fa-info bg-transparent"></em>
                  </button>
                </td>
              </ng-container>
            </tr>
            <tr *ngIf="toggle[i]?.hide">
              <td colspan="9">
                <ng-container>
                  <app-guarantor-detail [guarantorData]="guarantorData"></app-guarantor-detail>
                </ng-container>
              </td>
            </tr>
          </ng-container>
          </tbody>
        </table>
        <p *ngIf="selectedGuarantorList.length === 0" class="text-center">No Guarantor tagged yet!</p>
      </div>
    </div>
  </nb-card-body>
</nb-card>
