<nb-card accent="primary">
    <nb-card-header class="text-center">
      <h6>Customer Association</h6>
    </nb-card-header>
    <nb-card-body *ngIf="model">
      <nb-card>
        <nb-card-header>
       <span class="d-flex justify-content-end text-success text-uppercase">
         <b>  Aggregated Amount
                                : {{totalProposalAmount |number}}</b>
       </span>
          Loan History
          <div class="float-right" nbTooltip="">Total Loan Amount
            : {{totalLoanProposedAmount | number}}
          </div>
        </nb-card-header>
        <nb-card-body>
          <app-customer-group-loan
              (messageToEmit)="getTotalLoanAmount($event)"
              [fetchType]="fetchLoan.CUSTOMER_LOAN"
              [formValue]="model"></app-customer-group-loan>
        </nb-card-body>
      </nb-card>

      <nb-card>
        <nb-card-header>
          Customer Groups
          <div class="float-right" nbTooltip="">Total Group Amount : {{totalGroupAmount | number}}
          </div>
        </nb-card-header>
        <nb-card-body>
          <nb-accordion>
            <nb-accordion-item>
              <nb-accordion-item-header>
                <div class="row col-md-12">
                  <div class="col-md-6">
                    <span>KYC</span>
                  </div>
                  <div class="col-md-6 d-flex justify-content-end">
                     Total Amount :  {{(totalProposedAmountByKYC | number)}}
                  </div>
                </div>
              </nb-accordion-item-header>
              <nb-accordion-item-body>
                <app-customer-group-loan
                    (messageToEmit)="getTotalLoanAmount($event)"
                    [fetchType]="fetchLoan.CUSTOMER_AS_KYC"
                    [formValue]="model"></app-customer-group-loan>

              </nb-accordion-item-body>
            </nb-accordion-item>
            <nb-accordion-item>
              <nb-accordion-item-header>
                <div class="row col-md-12">
                  <div class="col-md-6">
                    <span>SECURITY</span>
                  </div>
                  <div class="col-md-6 d-flex justify-content-end">
                     Total Amount :  {{(totalProposedAmountByGuarantor | number)}}
                  </div>
                </div>
              </nb-accordion-item-header>
              <nb-accordion-item-body>
                <app-customer-group-loan
                    (messageToEmit)="getTotalLoanAmount($event)"
                    [fetchType]="fetchLoan.CUSTOMER_AS_GUARANTOR"
                    [formValue]="model"></app-customer-group-loan>
              </nb-accordion-item-body>
            </nb-accordion-item>
          </nb-accordion>


        </nb-card-body>

      </nb-card>
    </nb-card-body>
  <nb-card-footer *ngIf="model === undefined">
    <div class="text-center">
      <p class="text-danger">Customer Name ,Citizenship Number and Citizenship IssueDate is required !</p>
    </div>
  </nb-card-footer>
  </nb-card>
