<div class="d-flex {{catalogueStatus === true ? 'float-right' : 'justify-content-center'}}">

    <div class="row">
        <button (click)=" approved(sendForwardBackward)" *ngIf="!catalogueStatus"
                [disabled]="!actionsList.approved"
                [ngStyle]="{ 'filter' : (actionsList.approved === false)? 'grayscale(100%)': 'grayscale(0%)'}"
                class="btn-sm btn-success">
            APPROVED<i class="col-md-1 fa fa-check"></i></button>
        <button (click)=" sendForwardList(sendForwardBackward)" *ngIf="!catalogueStatus"
                [disabled]="!actionsList.sendForward"
                [ngStyle]="{ 'filter' : (actionsList.sendForward === false)? 'grayscale(100%)': 'grayscale(0%)'}"
                class="btn-sm btn-info">
            SEND
            FORWARD<i
                class="col-md-1 fa fa-arrow-circle-up"></i></button>

        <button (click)="sendBackwardList(sendForwardBackward,0)" *ngIf="!catalogueStatus"
                [disabled]="!actionsList.sendBackward"
                [ngStyle]="{ 'filter' : (actionsList.sendBackward === false)? 'grayscale(100%)': 'grayscale(0%)'}"
                class="btn-sm"
                style="color:lightseagreen;">
            RETURN
            <i class="col-md-1 fa fa-arrow-circle-left"></i></button>
        <button (click)="sendBackwardList(sendForwardBackward,1)" *ngIf="committeeRole && !catalogueStatus"
                [disabled]="!actionsList.sendBackward"
                [ngStyle]="{ 'filter' : (actionsList.sendBackward === false)? 'grayscale(100%)': 'grayscale(0%)'}"
                class="btn-sm btn-info"
                style="color:white;">
            BACK TO COMMITTEE
            <i class="col-md-1 fas fa-angle-double-left"></i></button>
        <button (click)="onEdit()" *ngIf="!catalogueStatus" [disabled]="!actionsList.edit"
                [ngStyle]="{ 'filter' : (actionsList.edit === false)? 'grayscale(100%)': 'grayscale(0%)'}"
                class="btn-flat btn-sm btn-primary">
            EDIT<i
                class="col-md-1 fa fa-edit"></i></button>
        <button (click)=" closeReject(sendForwardBackward,$event.target.value)" *ngIf="!catalogueStatus"
                [disabled]="!actionsList.closed"
                [ngStyle]="{ 'filter' : (actionsList.closed === false)? 'grayscale(100%)': 'grayscale(0%)'}"
                class="btn-sm btn-info"
                value="CLOSED">
            CLOSE/SETTLEMENT<i
                class="col-md-1 fa-close"></i></button>
        <button (click)=" closeReject(sendForwardBackward,$event.target.value)" *ngIf="!catalogueStatus"
                [disabled]="!actionsList.rejected || actionsList.roleTypeMaker"
                [ngStyle]="{ 'filter' : (!actionsList.rejected || actionsList.roleTypeMaker)? 'grayscale(100%)': 'grayscale(0%)'}"
                class="btn-sm btn-danger"
                value="REJECTED">
            REJECTED<i
                class="col-md-1 fa fa-ban"></i></button>
        <select (change)="generateOfferLetter($event.target.value)" *ngIf="catalogueStatus && actionsList.offerLetter"
                [disabled]="!actionsList.offerLetter"
                [ngStyle]="{ 'filter' : (actionsList.offerLetter === false)? 'grayscale(100%)': 'grayscale(0%)'}"
                class="btn-sm btn-primary custom-select-sm cursor"
                hidden
                value="Offer Letter">
            <option [value]="null" hidden selected>
                <span>Offer Letter<i class="col-md-1 fa fa-envelope-square"></i></span>
            </option>
            <option *ngFor="let offerLetter of loanConfig.offerLetters" [value]="offerLetter.templateUrl">
                {{offerLetter.name}}
            </option>
        </select>

        <!--<button class="btn-sm btn-warning d-flex justify-content-end" (click)="print()">PRINT<i
                class="col-md-1 fa fa-print"></i></button>-->
        <button [useExistingCss]="true" class="btn-sm btn-warning d-flex justify-content-end"
                ngxPrint printSectionId="print-block" styleSheetFile="assets/css/printStyles.scss">
            PRINT<i class="col-md-1 fa fa-print"></i></button>

        <button class="btn-sm btn-warning d-flex justify-content-end" (click)="detailedPrintAction()">
            DETAILED-PRINT<em class="col-md-1 fa fa-print"></em></button>

        <button (click)="deleteCustomerLoan()" *ngIf="currentUserRoleType && !catalogueStatus"
                class="btn-sm btn-danger d-flex justify-content-end">delete<i
                class="col-md-1 fa fa-ban"></i></button>


    </div>
</div>

<ng-template #sendForwardBackward>
    <div>
        <div class="modal-content">
            <div class="modal-header" style="display:block">
                <a (click)="onClose()" aria-label="Close" class="close cursor"
                   data-dismiss="modal">
                    <span aria-hidden="true">Ã—</span></a>
                <h4 class="nav navbar navbar-right pull-left">{{popUpTitle}}</h4>
            </div>

            <form (ngSubmit)="onSubmit(verify)" [formGroup]="formAction" role="form">

                <div class="col-md-12 row">
                    <div *ngIf="popUpTitle == 'Send Forward'" class="form-group col-md-6">
                        <label class="toRole" for="toRole">TO</label>
                        <select (change)="getUserList(this.formAction.get('toRole').value)" class="custom-select"
                                formControlName="toRole"
                                id="toRole"
                                name="toRole">
                            <option [value]="null" hidden>Select To</option>
                            <option *ngFor="let forwardBackward of sendForwardBackwardList"
                                    [ngValue]="forwardBackward">
                                {{forwardBackward.roleName}}
                            </option>
                        </select>
                    </div>

                    <div *ngIf="userList?.length > 1" class="form-group col-md-6">
                        <label class="toUser" for="toUser">To User</label>
                        <select class="custom-select" formControlName="toUser" id="toUser"
                                name="toUser">
                            <option *ngFor="let user of userList"
                                    [ngValue]="user">
                                {{user.username}}
                        </select>
                    </div>
                </div>

                <div class="form-group col-md-12">
                    <label for="comment">Comment:</label>
                    <textarea [ngClass]="{ 'is-invalid': submitted && formAction.controls['comment'].errors }"
                              class="form-control" formControlName="comment" id="comment"
                              name="text"
                    ></textarea>
                    <div *ngIf="submitted && formAction.controls['comment'].hasError('required')"
                         class="error-message"
                         style="color: red;">comment is required
                    </div>
                </div>


                <!-- Modal footer -->
                <div class="modal-footer">
                    <button (click)="onSubmit(verify)" class="btn btn-primary" type="button"><i
                            class="fa fa-save"></i>
                    </button>
                </div>
            </form>
        </div>

    </div>
</ng-template>

<ng-template #verify>
    <div>
        <div class="modal-content">
            <div class="modal-header" style="display:block">
                <div class="login-box-body">
                    <p class="login-box-msg">Please Enter Your Credential for Confirmation</p>
                    <p *ngIf="falseCredential" class="text-danger">Please enter
                        again. {{falseCredentialMessage}}</p>

                    <form #lform="ngForm" (ngSubmit)="lform.valid && onLogin(lform)" class="login-form"
                          name="login-form">
                        <div class="form-group has-feedback">
                            <input #pass="ngModel" [ngClass]="{'is-invalid': lform.submitted && pass.invalid}"
                                   class="form-control"
                                   id="password"
                                   name="password"
                                   ngModel placeholder="Password" required
                                   type="password">
                            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
                            <div *ngIf="pass.invalid && lform.submitted" class="invalid-feedback">
                                Password is required
                            </div>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button class="btn btn-primary  btn-flat" type="submit">verify</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</ng-template>
