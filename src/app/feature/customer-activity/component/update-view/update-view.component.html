<nb-card [ngStyle]="{'margin-bottom': 0}" accent="primary">
  <nb-card-header>
    <strong>{{activity | replace:'_':' '}}</strong>
    <a (click)="close()" aria-label="Close" class="close cursor">
      <span aria-hidden="true">&times;</span>
    </a>
  </nb-card-header>
  <nb-card-body class="modal-height">
    <app-insurance-view [insurance]="data"
                        *ngIf="activity === 'INSURANCE_UPDATE' && data"></app-insurance-view>

    <app-financial-view *ngIf="activity === 'FINANCIAL_UPDATE' && data"
                        [formData]="data"
                        [customerType]="profile?.customerType"
    ></app-financial-view>

    <app-guarantor-view *ngIf="activity === 'GUARANTOR_UPDATE' && data"
                        [guarantorData]="data"></app-guarantor-view>

    <app-site-visit-view *ngIf="activity === 'SITE_VISIT_UPDATE' && data"
                         [siteVisit]="data">
    </app-site-visit-view>

    <app-security-view *ngIf="activity === 'SECURITY' && data"
                       [security]="data" [shareSecurityData]="null"></app-security-view>

    <div *ngIf="activity === 'SHARE_SECURITY' && data"
                       >
      <div  class="row mt-4">
        <div class="col-md-12">
          <p><strong>Share Security Detail</strong>(Promoter Percent: {{loanSharePercent == undefined? 0: loanSharePercent.promoter}} , Ordinary Percent: {{loanSharePercent == undefined? 0 : loanSharePercent.ordinary}})</p>
          <table class="table table-bordered">
            <thead>
            <tr>
              <th> Sn</th>
              <th> Name of Company</th>
              <th> Share Type</th>
              <th>Share Unit</th>
              <th> Rate</th>
              <th>Total Value</th>
              <th>Considered Value</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let singleShareData of shareSecurity['shareSecurityDetails']; let i = index">
              <td>{{i + 1}}</td>
              <td>{{singleShareData?.companyName}}</td>
              <td>{{singleShareData?.shareType}}</td>
              <td>{{singleShareData?.totalShareUnit}}</td>
              <td>{{singleShareData?.amountPerUnit |currencyFormatter}}</td>
              <td>{{singleShareData?.total |currencyFormatter}}</td>
              <td>{{singleShareData?.consideredValue |currencyFormatter}}</td>
            </tr>
            <tr>
              <th class="text-right" colspan="5">Total</th>
              <th>{{shareTotalValue |currencyFormatter}}</th>
              <th>{{totalConsideredValue |currencyFormatter}}</th>
            </tr>
            <tr>
              <th>Description</th>
              <th colspan="6">{{shareSecurity['securityOffered']}}</th>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <app-individual-view [individual]="data"
                         *ngIf="activity === 'CUSTOMER_UPDATE' && data && profile.customerType === 'INDIVIDUAL'">
    </app-individual-view>
    <app-company-info-view [formValue]="data"
                           *ngIf="activity === 'CUSTOMER_UPDATE' && data && profile.customerType === 'COMPANY'">
    </app-company-info-view>

    <app-credit-grading [formData]="data" [fromProfile]="false"
                        *ngIf="activity === 'CRG_UPDATE' && data">
    </app-credit-grading>

    <app-credit-risk-grading-alpha [creditRiskGradingAlpha]="data" [fromProfile]="false"
                                   [financial]="profile?.financial" [companyInfo]="companyInfo"
                                   *ngIf="activity === 'CRG_ALPHA_UPDATE' && data">
    </app-credit-risk-grading-alpha>

    <div class="col-md-12" *ngIf="activity === 'CUSTOMER_GROUP_UPDATE' && data">
      <div class="d-flex justify-content-center">
        <span><strong>Group Code : </strong>{{data?.groupCode}}
          <strong>  Group Limit  :</strong> Rs. {{data?.groupLimit | currencyFormatter}}/-</span>
      </div>
    </div>


    <div class="col-md-12" *ngIf="activity === 'LOAN_UPDATE' && data">
      <div class="d-flex justify-content-center">
        <h2 *ngIf="loanUpdateData?.proposal">Proposal</h2>
      </div>

      <table class="table table-bordered table-hover ">

        <tr *ngFor="let p of loanUpdateData?.proposal">
          <td><strong>{{p?.fieldName}}</strong></td>
          <td>{{p?.prevValue}}</td>
        </tr>
        <tr *ngIf="loanUpdateData?.priority">
          <td><strong>Priority</strong></td>
          <td>{{loanUpdateData?.priority}}</td>
        </tr>
      </table>


      <app-guarantor-view *ngIf="loanUpdateData?.guarantor"
                          [guarantorData]="loanUpdateData?.guarantor"></app-guarantor-view>
    </div>

    <div class="col-md-12">
      <div class="d-flex justify-content-center">
        <span *ngIf="!data">Previous Data was Empty</span></div>
    </div>
  </nb-card-body>
</nb-card>

