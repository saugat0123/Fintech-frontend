<div class="col-md-12">
    <table class="table table-bordered table-hover text-center sb-small table-sm">
    <thead class="sb-bg-dark text-white">
        <th>
            Facility
        </th>
        <th>Contain Template</th>
        <th rowspan="5">
            Documents
        </th>
        <th>Preview</th>
        <th>Generate</th>
        <th>Amount</th>
        <th>Remarks</th>
        <th>Action</th>

        </thead>
        <tbody>
        <ng-container *ngFor="let customerLoan of customerLoanList">
            <tr>
                <td>
                    <strong>{{customerLoan?.loan?.name}}</strong>
                </td>
            </tr>
            <ng-container>
                <tr *ngFor="let data of customerLoan?.loan?.approvedDocument">
                    <td>{{data?.name}}</td>
                    <td>{{data.containsTemplate | booleanConvert}}</td>
                    <td><input #file
                            type="file" (change)="uploadOfferLetter($event)">
                        <button nbButton [disabled]="!file.value" status="primary" size="tiny"
                        class="float-right" (click)="save(customerLoan.loanHolder.id,customerLoan.id,data.id,data.name)">save</button>

                    </td>
                    <td><i *ngIf="data.url" class="fas fa-eye" (click)="previewDoc(data.url,data.name)"></i>
                        <i *ngIf="!data.url" class="fas fa-times-circle" (click)="previewDoc(data.url,data.name)"></i>
                    </td>
                    <td><button nbButton class="align-items-center"  status="primary" size="tiny" *ngIf="data.containsTemplate" (click)="populateCadTemplate(data.id,customerLoan.id)">Generate</button></td>
                    <td>{{data.amount}}</td>
                    <td>{{data.remarks}}</td>
                    <td><i class="fa fa-edit" (click)="openSaveEditForm(saveEditOtherDocInfo,customerLoan.id,data.id,data.amount,data.remarks)"></i></td>

                </tr>
            </ng-container>
        </ng-container>
        </tbody>
    </table>

</div>
<ng-template #saveEditOtherDocInfo>
    <nb-card>
        <nb-card-body>
            <div class="row">
                <div class="col-md-4">
                    <label>Amount</label>
                    <input placeholder="amount" type="number" class="form-control" [(ngModel)]="saveEditParam.amount">
                </div>
                <div class="col-md-4">
                    <label>Remarks</label>
                    <select class="form-control" [(ngModel)]="saveEditParam.remarks">
                        <option [value]="null" hidden>Select Remarks</option>
                      <option [value]="option.key" *ngFor="let option of remarkOption" >{{option.value}}</option>
                    </select>
                </div>
            </div>
        </nb-card-body>
       <nb-card-footer>
           <div class="row">
               <div class="col-md-12">
                   <button (click)="saveText(saveEditParam.loanId,saveEditParam.documentId,saveEditParam.amount,saveEditParam.remarks)" class="m-2" nbButton size="tiny">Save</button>
                   <button (click)="close()" nbButton size="tiny">Cancel</button>
               </div>
           </div>
       </nb-card-footer>
    </nb-card>
</ng-template>
