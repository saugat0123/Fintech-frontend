<nb-card accent="primary" class="p-3 shadow-lg custom" style="height:100%" id="print-block">
  <nb-card-header>
    <div class="logo-container print-only">
      <div>
        <img height="60px" src="../../../../../assets/img/logo.png">
      </div>
    </div>
    <ng-container class="flex-row">
      <h5 class="text-center print-only mb-3">Security Compliance Certificate </h5>
      <h5 class="text-center disable-print">Security Compliance Certificate </h5>
      <p class="text-center">{{sccRefNumber}}</p>
      <i class="fa fa-upload disable-print float-right m-3" (click)="openDocUploadModal(uploadModal)">Upload</i>
    </ng-container>

  </nb-card-header>
  <nb-card-body>
    <table class="table table-bordered table-hover table-sm sb-small text-center ">
      <tr>
        <th class="text-left">Date</th>
        <td colspan="3">{{date | date}}</td>
        <th class="text-left">Customer's Name</th>
        <td colspan="3">{{cadFile?.loanHolder?.name}}</td>
      </tr>
      <tr>
        <th class="text-left">A/C NUmber</th>
        <td>{{accountNo}}</td>
        <th class="text-left">Customer Id</th>
        <td>{{cadFile?.loanHolder?.customerCode}}</td>
        <th class="text-left">Facility</th>
        <td>{{assignedLoan}}</td>
        <th class="text-left">Approval</th>
        <td>{{approval}}</td>
      </tr>
      <tr>
        <th class="text-left">Group</th>
        <td colspan="2">{{(cadFile?.data | jsonParse)?.acInfo?.group}}</td>
        <th class="text-left">RM</th>
        <td  colspan="2">{{maker}}</td>
        <th class="text-left">Branch</th>
        <td>{{cadFile?.loanHolder?.branch?.name}}</td>
      </tr>
      <tr>
        <th class="text-left" colspan="2">Multibanking</th>
        <td colspan="2">{{(cadFile?.data | jsonParse)?.acInfo?.multiBanking}}</td>
        <th class="text-left">Ka.Su.Fa.</th>
        <td>{{(cadFile?.data | jsonParse)?.acInfo?.kasufa}}</td>
        <th class="text-left">CIC</th>
        <td></td>
      </tr>
      <tr>
        <th class="text-left">Next Review/Tenure</th>
        <td>{{(cadFile?.data | jsonParse)?.acInfo?.nextReview}}</td>
        <th class="text-left">Purpose</th>
        <td colspan="2" [innerHTML]="purposeOfLoan | safeHtml"></td>
        <th class="text-left">File Manager</th>
        <td colspan="2">{{maker}}</td>
      </tr>
      <tr>
        <th class="text-left">Unit</th>
        <td>{{cadFile?.loanHolder['clientType'] | titlecase}}</td>
      </tr>
    </table>
    <p><b>MIS Codes:</b></p>
    <table class="table table-bordered table-hover table-sm sb-small text-center ">
      <tr>
        <th class="text-left">NRB Sector Code: </th>
        <td></td>
        <th class="text-left">NRB Sub Sector Code</th>
        <td></td>
        <th class="text-left">Security Code</th>
        <td></td>
      </tr>
      <tr>
        <th class="text-left">Basel Code: </th>
        <td></td>
        <th class="text-left">Productwise</th>
        <td></td>
        <th class="text-left"> Sub Productwise</th>

        <td></td>
      </tr>
      <tr>
        <th class="text-left">SIS Sector : </th>
        <td></td>
        <th class="text-left">SIS Collateral</th>
        <td></td>
        <th class="text-left">Security Code</th>
        <td></td>
      </tr>
    </table>
    <p><b>1.Exposure Details</b></p>
    <app-exposure-view [cadOfferLetterApprovedDoc]="cadFile" [displayHistory]="false" [fromScc]="true"> </app-exposure-view>
    <p><b>2.Fees And Commission</b></p>
    <app-fees-commissions-view [cadOfferLetterApprovedDoc]="cadFile"></app-fees-commissions-view>
    <p><b>3.Document CheckList</b></p>
    <app-document-checklist-view [cadData]="cadFile" *ngIf="!cadCheckListListVersion"></app-document-checklist-view>
    <app-document-checklist-view-lite [cadData]="cadFile" *ngIf="cadCheckListListVersion"></app-document-checklist-view-lite>

    <p><b>4.Mode Of Payment</b></p>
    <ol>
      <li>Issuance of MC Favoring Ms <b>{{(cadFile?.data | jsonParse)?.acInfo?.issuanceOfMc || '...........'}}</b></li>
      <li>Credit to Ac No :<b>{{(cadFile?.data | jsonParse)?.acInfo?.accountNo || '...........'}}</b> AC Name: <b>{{(cadFile?.data | jsonParse)?.acInfo?.accountName || '...........'}}</b> against purchase of <b>{{(cadFile?.data | jsonParse)?.acInfo?.againstPurchaseOf || '...........'}}</b></li>
    </ol>

    <div class="row border">
      <div class="col-md-3 border">
        <p><b><u>Prepared by</u></b></p>
        <p>Name:.....................</p>
        <div class="box"></div>
        <p><b>RO/RM</b></p>
      </div>
      <div class="col-md-3 border">
        <p><b><u>Recommended by</u></b></p>
        <p>Name:.....................</p>
        <div class="box"></div>
        <p><b>OI/BM</b></p>
      </div>
      <div class="col-md-3 border">
        <p><b><u>System Inputted by</u></b></p>
        <p>Name:.....................</p>
        <div class="box"></div>
        <p><b>CAD</b></p>
      </div>
      <div class="col-md-3 border">
        <p><b><u>Approved by</u></b></p>
        <p class="hide">.</p>
        <div class="box"></div>
        <p><b>Head-CAD</b></p>
      </div>
    </div>
    <hr>
    <p><b>5.Declaration:</b></p><hr>
    <i>This is to certify that the original copies of all the documents as listed in the point 3 (Documentation Check Lists) are executed properly and are found in order.</i>

  </nb-card-body>
  <nb-card-footer class="disable-print">
    <button (click)="onClose()" nbButton  status="primary" size="small" class="float-right mr-2">Close</button>
    <button (click)="onSave()" nbButton  status="primary" size="small" class="float-right mr-2">Save</button>
    <button [useExistingCss]="true"  ngxPrint printSectionId="print-block"  status="primary"  size="small" class="float-right mr-2" nbButton styleSheetFile="assets/css/printStyles.scss"><i class="fa fa-print"></i>-Print</button>
  </nb-card-footer>
</nb-card>

<ng-template #uploadModal style="min-width: 35rem;">
  <nb-card accent="primary">
    <nb-card-header>
      <a (click)="modelClose()" aria-label="Close" class="close cursor"
         data-dismiss="modal">
        <span aria-hidden="true">Ã—</span></a>
      <div class="row">
        <div class="col-md-12">
          Upload Scc File
        </div>
      </div>
    </nb-card-header>
    <nb-card-body>
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <input #file
                   (change)="uploadDoc($event)" type="file">
          </div>
        </div>
      </div>

    </nb-card-body>
    <nb-card-footer>
      <button (click)="save()"
              [disabled]="!file.value" class="float-right" nbButton
              size="tiny"
              status="primary">
        save
      </button>
    </nb-card-footer>
  </nb-card>
</ng-template>
