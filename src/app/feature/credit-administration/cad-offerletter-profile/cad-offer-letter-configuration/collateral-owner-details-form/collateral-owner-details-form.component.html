<nb-card [nbSpinner]="spinner">
    <nb-card-body *ngFor="let collateralOwner of userConfigForm.get('collateralOwnerDetail')['controls']; let i = index;">
        <Form [formGroup]="i">
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerName">धितो धनीको नाम</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerName"
                               id="collateralOwnerName"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerName.errors}"
                               name="collateralOwnerName" placeholder="धितो धनीको नाम"
                               type="text"/>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerNameInEnglish">Collateral Owner Name</label>
                        <input class="form-control rounded"
                               formControlName="collateralOwnerNameInEnglish"
                               id="collateralOwnerNameInEnglish"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerNameInEnglish.errors}"
                               name="collateralOwnerNameInEnglish" placeholder="Customer Name"
                               type="text"/>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerDOB">जन्म मिति </label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerDOB"
                               id="collateralOwnerDOB"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerDOB.errors}"
                               name="collateralOwnerDOB" placeholder="जन्म मिति"
                               type="text"/>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerCitizenshipNo">नगरिकता न.</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerCitizenshipNo"
                               id="collateralOwnerCitizenshipNo"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerCitizenshipNo.errors}"
                               name="collateralOwnerCitizenshipNo" placeholder="नगरिकता न="
                               type="text"/>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerCitizenshipIssueDate">नागरिकता जारी मिति</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerCitizenshipIssueDate"
                               id="collateralOwnerCitizenshipIssueDate"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerCitizenshipIssueDate.errors}"
                               name="collateralOwnerCitizenshipIssueDate" placeholder="नगरिकता जारी मिति"
                               type="text"/>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerCitizenshipIssueDistrict">नागरिकता जारी
                            जिल्ला</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerCitizenshipIssueDistrict"
                               id="collateralOwnerCitizenshipIssueDistrict"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerCitizenshipIssueDistrict.errors}"
                               name="collateralOwnerCitizenshipIssueDistrict" placeholder="नगरिकता जारी जिल्ला"
                               type="text"/>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerGender">लिङ्ग</label>
                        <select class="form-control" formControlName="collateralOwnerGender" id="collateralOwnerGender"
                                [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerGender.errors}">
                            <option [value]="null" hidden>Select Gender</option>
                            <option value="0">महिला</option>
                            <option value="1">पुरुष</option>
                        </select>
                    </div>
                </div>
                <div class="col" *ngIf="basicInfoControls?.collateralOwnerGender?.value == 0">
                    <div class="form-group">
                        <label class="relationMedium" for="collateralOwnerRelationMedium">
                            सम्बन्धको माध्यम</label>
                        <select class="form-control" formControlName="collateralOwnerRelationMedium"
                                id="collateralOwnerRelationMedium"
                                [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerRelationMedium.errors}">
                            <option [value]="null" hidden>Select Relation Medium</option>
                            <option value="0">पैत्रिक नाताबाट</option>
                            <option value="1">मैत्रिक नाताबाट</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col"
                     [hidden]="!(basicInfoControls?.collateralOwnerGender?.value == 1) && basicInfoControls?.collateralOwnerRelationMedium?.value == 1">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerFatherName">पिताको नाम</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerFatherName"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerFatherName.errors}"
                               id="collateralOwnerFatherName"
                               name="collateralOwnerFatherName" placeholder="पिताको नाम"
                               type="text"/>
                    </div>
                </div>
                <div class="col"
                     [hidden]="!(basicInfoControls?.collateralOwnerGender?.value == 1) && basicInfoControls?.collateralOwnerRelationMedium?.value == 1">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerMotherName">आमाको नाम</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerMotherName"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerMotherName.errors}"
                               id="collateralOwnerMotherName"
                               name="collateralOwnerMotherName" placeholder="आमाको नाम"
                               type="text"/>
                    </div>
                </div>
                <div class="col"
                     [hidden]="!(basicInfoControls?.collateralOwnerGender?.value == 1) && basicInfoControls?.collateralOwnerRelationMedium?.value == 1">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerGrandFatherName">हजुरबुबाको नाम</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerGrandFatherName"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerGrandFatherName.errors}"
                               id="collateralOwnerGrandFatherName"
                               name="collateralOwnerGrandFatherName" placeholder="हजुरबुबाको नाम"
                               type="text"/>
                    </div>
                </div>
                <div class="col"
                     [hidden]="!(basicInfoControls?.collateralOwnerGender?.value == 1) && basicInfoControls?.collateralOwnerRelationMedium?.value == 1">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerGrandMotherName">हजुरआमाको नाम</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerGrandMotherName"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerGrandMotherName.errors}"
                               id="collateralOwnerGrandMotherName"
                               name="collateralOwnerGrandMotherName" placeholder="हजुरआमाको नाम"
                               type="text"/>
                    </div>
                </div>
                <div class="col"
                     [hidden]="basicInfoControls?.collateralOwnerRelationMedium?.value == 0">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerSpouse">पति/पत्नीको नाम</label>
                        <input class="form-control rounded nepaliFont"
                               formControlName="collateralOwnerSpouse"
                               [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerSpouse.errors}"
                               id="collateralOwnerSpouse"
                               name="collateralOwnerSpouse" placeholder="पति÷पत्नीको नाम"
                               type="text"/>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-md-12 text-center">
                    <strong>स्थाई ठेगाना</strong>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerPermanentProvince">
                            प्रदेश </label>
                        <ng-select
                                bindLabel="nepaliName"
                                (change)="getCollateralOwnerDistricts(basicInfoControls.collateralOwnerPermanentProvince.value)"
                                [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerPermanentProvince.errors}"
                                formControlName="collateralOwnerPermanentProvince"
                                id="collateralOwnerPermanentProvince">
                            <ng-option [value]="null" hidden>प्रदेश</ng-option>
                            <ng-option *ngFor="let provinceVal of collateralPermanentProvinceList"
                                       [value]="provinceVal">
                                {{provinceVal.nepaliName}}
                            </ng-option>
                        </ng-select>
                        <div *ngIf="(submitted) && basicInfoControls.collateralOwnerPermanentProvince.invalid"
                             class="invalid-feedback">
                            <div *ngIf="basicInfoControls.collateralOwnerPermanentProvince.errors.required">
                                Province is required
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerPermanentDistrict">जिल्ला</label>
                        <ng-select
                                bindLabel="nepaliName"
                                (change)="getCollateralOwnerMunicipalities(basicInfoControls?.collateralOwnerPermanentDistrict.value)"
                                [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerPermanentDistrict.errors}"
                                formControlName="collateralOwnerPermanentDistrict"
                                id="collateralOwnerPermanentDistrict">
                            <ng-option [value]="null" hidden>जिल्ला</ng-option>
                            <ng-option *ngFor="let districtVal of collateralPermanentDistrictList"
                                       [value]="districtVal">
                                {{districtVal.nepaliName}}
                            </ng-option>
                        </ng-select>
                        <div *ngIf="(submitted) &&  basicInfoControls.collateralOwnerPermanentDistrict.invalid"
                             class="invalid-feedback">
                            <div *ngIf="basicInfoControls.collateralOwnerPermanentDistrict.errors.required">
                                District is required
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label class="title"
                               for="collateralOwnerPermanentMunicipalities">नगरपालिका/गा. बि. स.</label>
                        <ng-select
                                bindLabel="nepaliName"
                                [ngClass]="{'is-invalid': submitted && basicInfoControls.collateralOwnerPermanentMunicipalities.errors}"
                                formControlName="collateralOwnerPermanentMunicipalities"
                                id="collateralOwnerPermanentMunicipalities"
                                name="collateralOwnerPermanentMunicipalities">
                            <ng-option [value]="null" hidden>नगरपालिका</ng-option>
                            <ng-option *ngFor="let municipalityVal of collateralPermanentMunicipalitiesList"
                                       [value]="municipalityVal">
                                {{municipalityVal.nepaliName}}
                            </ng-option>
                        </ng-select>
                        <div *ngIf="(submitted) && basicInfoControls.collateralOwnerPermanentMunicipalities.invalid"
                             class="invalid-feedback">
                            Municipality is required
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label class="title" for="collateralOwnerPermanentWard">वडा नं.</label>
                        <input
                                [ngClass]="{ 'is-invalid': (submitted) && basicInfoControls.collateralOwnerPermanentWard.errors }"
                                class="form-control rounded nepaliFont"
                                formControlName="collateralOwnerPermanentWard"
                                id="collateralOwnerPermanentWard"
                                name="collateralOwnerPermanentWard" placeholder="वडा नं="
                                type="text">
                        <div *ngIf="(submitted) && basicInfoControls.collateralOwnerPermanentWard.invalid"
                             class="invalid-feedback">
                            <div *ngIf="basicInfoControls.collateralOwnerPermanentWard.errors.required">
                                Ward Number is required
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <button class="btn btn-danger float-right" (click)="removeAtIndexCollateralOwner(i)"
                        style="position: static">
                    <em class="fa fa-trash" style="color: white;"></em>
                </button>
            </div>
        </Form>
    </nb-card-body>
    <button class="btn tbn-sm btn-flat btn-primary" (click)="addCollateralOwner()">Add Collateral Details
    </button>
    <nb-card-footer>
        <div class="row">
            <div class="col-md-12">
                <button class="float-right" nbButton (click)="save()" [disabled]="spinner">save</button>
            </div>
        </div>
    </nb-card-footer>
</nb-card>
