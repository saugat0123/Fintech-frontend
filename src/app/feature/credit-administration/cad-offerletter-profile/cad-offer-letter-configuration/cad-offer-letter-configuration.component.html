<nb-card accent="primary" class="m-0"
         [nbSpinner]="spinner"
         nbSpinnerStatus="primary"
         nbSpinnerSize="giant">
  <nb-card-header>
    <a (click)="closeModal()" aria-label="Close" class="close cursor"
       data-dismiss="modal">
      <span aria-hidden="true">×</span></a>
  </nb-card-header>
  <nb-card-body>
    <form [formGroup]="userConfigForm">
      <nb-tabset (changeTab)="onChangeTab($event)">
        <nb-tab tabId="0" tabTitle="Client Details" #personal>
          <hr>
          <table>
            <tr>
              <td>
                <label class="title" for="clientType">Client Type</label>
              </td>
              <td>
                <select class="form-control" formControlName="clientType" id="clientType">
                  <option [value]="null" hidden>Select Client Type</option>
                  <option value="0">INDIVIDUAL</option>
                  <option value="1">INSTITUTION</option>
                </select>
              </td>
              <td></td>
              <td></td>
            </tr>
            <tbody *ngIf="configForm?.clientType?.value != null">
            <tr>
              <td>
                <label class="title">Customer Code</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="customerCode"
                       [ngClass]="{'is-invalid': submitted && configForm.customerCode.errors}"
                       name="customerCode" placeholder="Customer Code"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.customerCode}}
              </td>
            </tr>
            <tr>
              <td><label class="title" for="name">Client Name</label></td>
              <td><input class="form-control rounded"
                         formControlName="name"
                         id="name"
                         [ngClass]="{'is-invalid': submitted && configForm.name.errors}"
                         name="name" placeholder="Client Name"
                         type="text"/>
              </td>
              <td>{{translatedValues?.name}}</td>
            </tr>
            <tr>
              <td><label class="title" for="email">Email</label></td>
              <td><input class="form-control rounded"
                         formControlName="email"
                         id="email"
                         [ngClass]="{'is-invalid': submitted && configForm.email.errors}"
                         name="email" placeholder="Email"
                         type="text"/>
              </td>
              <td>
                {{translatedValues?.email}}</td>
            </tr>
            <tr>
              <td><label class="title" for="contactNo">Contact No</label></td>
              <td><input class="form-control rounded"
                         formControlName="contactNo"
                         id="contactNo"
                         [ngClass]="{'is-invalid': submitted && configForm.contactNo.errors}"
                         name="contactNo" placeholder="Contact No"
                         type="text"/>
              </td>
              <td>
                {{translatedValues?.contactNo}}</td>
            </tr>

            <tr *ngIf="configForm?.clientType?.value == 0">
              <td>
                <label class="title" for="name">Age</label>
              </td>
              <td>

                <input class="form-control rounded"
                       formControlName="age" id="age"
                       [ngClass]="{'is-invalid': submitted && configForm.age.errors}"
                       name="age" placeholder="Age"
                       type="text"/>
              </td>
              <td>  {{translatedValues?.age}}</td>
            </tr>
            <tr *ngIf="configForm?.clientType?.value == 0">

              <td><label class="title" for="gender">Gender</label></td>
              <td><select class="form-control" formControlName="gender" id="gender"
                          [ngClass]="{'is-invalid': submitted && configForm.gender.errors}">
                <option [value]="null" hidden>Select Gender</option>
                <option value="0">Male</option>
                <option value="1">Female</option>
              </select>
              </td>
            </tr>

            <tr *ngIf="configForm?.gender?.value == 1">
              <td>
                <label class="relationMedium" for="relationMedium">Relation Medium</label>
              </td>
              <td>
                <select class="form-control" formControlName="relationMedium"
                        id="relationMedium"
                        [ngClass]="{'is-invalid': submitted && configForm.relationMedium.errors}">
                  <option [value]="null" hidden>Select Relation Medium</option>
                  <option value="0">Husband Relation</option>
                  <option value="1">Father Relation</option>
                </select>
              </td>
            </tr>
            <tr
                [hidden]="configForm?.clientType?.value == 1 && !(configForm?.gender?.value == 1) && configForm?.relationMedium?.value == 0">
              <td>
                <label class="title" for="name">Father Name</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="fatherName"
                       [ngClass]="{'is-invalid': submitted && configForm.fatherName.errors}"
                       id="fatherName"
                       name="fatherName" placeholder="Father Name"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.fatherName}}
              </td>
            </tr>
            <tr
                [hidden]="configForm?.clientType?.value == 0 && !(configForm?.gender?.value == 1) && configForm?.relationMedium?.value == 0">
              <td>
                <label class="title" for="grandFatherName">Grand Father Name</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="grandFatherName"
                       [ngClass]="{'is-invalid': submitted && configForm.grandFatherName.errors}"
                       id="grandFatherName"
                       name="grandFatherName" placeholder="Grand Father Name"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.grandFatherName}}
              </td>
            </tr>
            <tr *ngIf="configForm?.clientType?.value == 0"
                [hidden]="configForm?.gender?.value == 1 || configForm?.relationMedium?.value == 0">

              <td><label class="title" for="husbandName">Husband Name</label></td>
              <td><input class="form-control rounded"
                         formControlName="husbandName"
                         [ngClass]="{'is-invalid': submitted && configForm.husbandName.errors}"
                         id="husbandName"
                         name="husbandName" placeholder="Husband Name"
                         type="text"/></td>
              <td>                {{translatedValues?.husbandName}}</td>

            </tr>
            <tr *ngIf="configForm?.clientType?.value == 0"
                [hidden]="configForm?.gender?.value == 1 || configForm?.relationMedium?.value == 0">

              <td><label class="title" for="fatherInLawName">Father In Law Name</label></td>
              <td><input class="form-control rounded"
                         formControlName="fatherInLawName"
                         [ngClass]="{'is-invalid': submitted && configForm.fatherInLawName.errors}"
                         id="fatherInLawName"
                         name="fatherInLawName" placeholder="Father In Law Name"
                         type="text"/></td>
              <td>                {{translatedValues?.fatherInLawName}}</td>

            </tr>
            <tr *ngIf="configForm?.clientType?.value == 0">
              <td><label class="title" for="citizenshipNo">Citizenship No</label></td>
              <td>
                <input class="form-control rounded"
                       formControlName="citizenshipNo"
                       id="citizenshipNo"
                       [ngClass]="{'is-invalid': submitted && configForm.citizenshipNo.errors}"
                       name="citizenshipNo" placeholder="Citizenship No"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.citizenshipNo}}
              </td>
            </tr>
            <tr *ngIf="configForm?.clientType?.value == 1">
              <td>
                <label class="title" for="registrationNo">Registration No</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="registrationNo"
                       id="registrationNo"
                       [ngClass]="{'is-invalid': submitted && configForm.registrationNo.errors}"
                       name="registrationNo" placeholder="Registration No"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.registrationNo}}
              </td>
            </tr>
            <tr *ngIf="configForm?.clientType?.value == 0">
              <td>
                <label class="title" for="citizenshipIssueDate">Citizenship Issue Date</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="citizenshipIssueDate"
                       id="citizenshipIssueDate"
                       [ngClass]="{'is-invalid': submitted && configForm.citizenshipIssueDate.errors}"
                       name="citizenshipIssueDate" placeholder="Citizenship Issue Date"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.citizenshipIssueDate}}
              </td>
            </tr>
            <tr *ngIf="configForm?.clientType?.value == 1">
              <td>
                <label class="title" for="registrationDate">Registration Date</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="registrationDate"
                       id="registrationDate"
                       [ngClass]="{'is-invalid': submitted && configForm.registrationDate.errors}"
                       name="registrationDate" placeholder="Registration Date"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.registrationDate}}
              </td>
            </tr>
            <tr *ngIf="configForm?.clientType?.value == 0">
              <td>
                <label class="title" for="citizenshipNo">Citizenship Issue District</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="citizenshipIssueDistrict"
                       id="citizenshipIssueDistrict"
                       [ngClass]="{'is-invalid': submitted && configForm.citizenshipIssueDistrict.errors}"
                       name="name" placeholder="Citizenship Issue District"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.citizenshipIssueDistrict}}
              </td>
            </tr>
            <tr>
              <td>
                <label class="title" for="panNo">PAN No</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="panNo" id="panNo"
                       [ngClass]="{'is-invalid': submitted && configForm.panNo.errors}"
                       name="panNo" placeholder="PAN No" type="text"/>
              </td>
              <td>
                {{translatedValues?.panNo}}
              </td>
            </tr>
            <tr *ngIf="configForm?.clientType?.value == 0">
              <td>
                <strong>Permanent Address</strong>
              </td>
              <td>
                <select class="form-control" formControlName="permanentMunType"
                        id="permanentMunType"
                        [ngClass]="{'is-invalid': submitted && configForm.permanentMunType.errors}">
                  <option value="0">Municipality</option>
                  <option value="1">VDC</option>
                </select>
              </td>
            </tr>
            <tr>
              <td><label class="title" for="permanentProvince">Province</label></td>
              <td>
                <input class="form-control rounded"
                       formControlName="permanentProvince"
                       [ngClass]="{'is-invalid': submitted && configForm.permanentProvince.errors}"
                       id="permanentProvince"
                       name="permanentProvince" placeholder="Province"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.permanentProvince}}
              </td>
            </tr>
            <tr>
              <td><label class="title" for="permanentDistrict">District</label></td>
              <td><input class="form-control rounded"
                         formControlName="permanentDistrict"
                         [ngClass]="{'is-invalid': submitted && configForm.permanentDistrict.errors}"
                         id="permanentDistrict"
                         name="permanentDistrict" placeholder="District"
                         type="text"/>
              </td>
              <td>
                {{translatedValues?.permanentDistrict}}
              </td>
            </tr>
            <tr>
              <td><label class="title"
                         for="permanentMunicipality">{{configForm.permanentMunType.value == 0
                  ? 'Municipality' : 'VDC'}}</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="permanentMunicipality"
                       [ngClass]="{'is-invalid': submitted && configForm.permanentMunicipality.errors}"
                       id="permanentMunicipality"
                       name="permanentMunicipality"
                       placeholder="{{configForm.permanentMunType.value == 0 ? 'Municipality' : 'VDC'}}"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.permanentMunicipality}}
              </td>
            </tr>
            <tr>
              <td>
                <label class="title" for="permanentWard">Ward No</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="permanentWard"
                       [ngClass]="{'is-invalid': submitted && configForm.permanentWard.errors}"
                       id="permanentWard"
                       name="permanentMunicipality" placeholder="Ward No"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.permanentWard}}
              </td>

            </tr>
            <tr *ngIf="configForm?.clientType?.value == 0">
              <td>
                <strong>Temporary Address</strong>
              </td>
              <td>
                <select class="form-control" formControlName="temporaryMunType"
                        id="temporaryMunType"
                        [ngClass]="{'is-invalid': submitted && configForm.temporaryMunType.errors}">
                  <option value="0">Municipality</option>
                  <option value="1">VDC</option>
                </select>
            </tr>
            <tr>
              <td><label class="title" for="temporaryProvince">Province</label></td>
              <td>
                <input class="form-control rounded"
                       formControlName="temporaryProvince"
                       [ngClass]="{'is-invalid': submitted && configForm.temporaryProvince.errors}"
                       id="temporaryProvince"
                       name="temporaryProvince" placeholder="Province"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.temporaryProvince}}
              </td>
            </tr>
            <tr>
              <td><label class="title" for="temporaryDistrict">District</label></td>
              <td>
                <input class="form-control rounded"
                       formControlName="temporaryDistrict"
                       [ngClass]="{'is-invalid': submitted && configForm.temporaryDistrict.errors}"
                       id="temporaryDistrict"
                       name="temporaryDistrict" placeholder="District"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.temporaryDistrict}}
              </td>
            </tr>
            <tr>
              <td><label class="title" for="temporaryMunicipality">

                {{configForm.temporaryMunType.value == 0 ? 'Municipality' : 'VDC'}}
              </label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="temporaryMunicipality"
                       [ngClass]="{'is-invalid': submitted && configForm.temporaryMunicipality.errors}"
                       id="temporaryMunicipality"
                       name="temporaryMunicipality"
                       placeholder="{{configForm.temporaryMunType.value == 0 ? 'Municipality' : 'VDC'}}"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.temporaryMunicipality}}
              </td>
            </tr>
            <tr>
              <td><label class="title" for="temporaryWard">Ward No</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="temporaryWard"
                       [ngClass]="{'is-invalid': submitted && configForm.permanentWard.errors}"
                       id="temporaryWard"
                       name="temporaryWard" placeholder="Ward No"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.temporaryWard}}
              </td>
            </tr>
            </tbody>
            <tbody *ngIf="configForm?.clientType?.value == 1">
            <tr>
              <td class="col-md-12 text-center">
              <td>
                <strong>Registered Address</strong>
              </td>
              <td>
                <select class="form-control" formControlName="registeredMunType"
                        id="registeredMunType"
                        [ngClass]="{'is-invalid': submitted && configForm.registeredMunType.errors}">
                  <option value="0">Municipality</option>
                  <option value="1">VDC</option>
                </select>

              </td>
            </tr>
            <tr>
              <td>
                <label class="title" for="registeredProvince">Province</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="registeredProvince"
                       [ngClass]="{'is-invalid': submitted && configForm.registeredProvince.errors}"
                       id="registeredProvince"
                       name="registeredProvince" placeholder="Province"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.registeredProvince}}
              </td>
            </tr>
            <tr>
              <td>
                <label class="title" for="registeredDistrict">District</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="registeredDistrict"
                       [ngClass]="{'is-invalid': submitted && configForm.registeredDistrict.errors}"
                       id="registeredDistrict"
                       name="registeredDistrict" placeholder="District"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.registeredDistrict}}
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title"
                       for="registeredMunicipality">{{configForm.registeredMunType.value == 0
                    ? 'Municipality' : 'VDC'}}</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="registeredMunicipality"
                       [ngClass]="{'is-invalid': submitted && configForm.registeredMunicipality.errors}"
                       id="registeredMunicipality"
                       name="registeredMunicipality"
                       placeholder="{{configForm.registeredMunType.value == 0 ? 'Municipality' : 'VDC'}}"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.registeredMunicipality}}
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title" for="registeredWard">Ward No</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="permanentWard"
                       [ngClass]="{'is-invalid': submitted && configForm.registeredWard.errors}"
                       id="registeredWard"
                       name="registeredMunicipality" placeholder="Ward No"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.registeredWard}}
              </td>
            </tr>
            </tbody>
            <tbody *ngIf="configForm?.clientType?.value == 1">
            <tr class="col-md-12 text-center">
              <td>
                <strong>Current Address</strong>
              </td>
              <td class="offset-10 col-md-2">
                <select class="form-control" formControlName="currentMunType"
                        id="currentMunType"
                        [ngClass]="{'is-invalid': submitted && configForm.currentMunType.errors}">
                  <option value="0">Municipality</option>
                  <option value="1">VDC</option>
                </select>
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title" for="currentProvince">Province</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="currentProvince"
                       [ngClass]="{'is-invalid': submitted && configForm.currentProvince.errors}"
                       id="currentProvince"
                       name="currentProvince" placeholder="Province"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.currentProvince}}
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title" for="currentDistrict">District</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="currentDistrict"
                       [ngClass]="{'is-invalid': submitted && configForm.currentDistrict.errors}"
                       id="currentDistrict"
                       name="currentDistrict" placeholder="District"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.currentDistrict}}
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title" for="currentMunicipality">
                  {{configForm.currentMunType.value == 0 ? 'Municipality' : 'VDC'}}
                </label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="currentMunicipality"
                       [ngClass]="{'is-invalid': submitted && configForm.currentMunicipality.errors}"
                       id="currentMunicipality"
                       name="currentMunicipality"
                       placeholder="{{configForm.currentMunType.value == 0 ? 'Municipality' : 'VDC'}}"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.currentMunicipality}}
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title" for="currentWard">Ward No</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="currentWard"
                       [ngClass]="{'is-invalid': submitted && configForm.currentWard.errors}"
                       id="currentWard"
                       name="currentWard" placeholder="Ward No"
                       type="text"/>
              </td>
              <td>
                {{translatedValues?.currentWard}}
              </td>
            </tr>
            </tbody>
          </table>

          <table
              *ngFor="let guarantor of userConfigForm.get('guarantorDetails')['controls']; let i = index;"
              class="form-group" formArrayName="guarantorDetails">
            <tbody [formGroupName]="i">
            <tr class="form-group">
              <td>
                <label class="title">ग्यारेन्टरको नाम</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="name"
                       id="guarantorName"
                       autocomplete="off"
                       name="name" placeholder="ग्यारेन्टरको नाम"
                       type="text"/>
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title">नगरिकता नम्बर</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="citizenNumber"
                       id="guarantorCitizenshipNum"
                       autocomplete="off"
                       name="name" placeholder="नगरिकता नम्बर"
                       type="text"/>
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title" for="guarantorIssueDate">जारी मिति</label>
              </td>
              <td>
                <input
                    class="form-control rounded"
                    formControlName="issuedYear"
                    id="guarantorIssueDate"
                    autocomplete="off"
                    name="name" placeholder="जारी मिति"
                    type="text"/>
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title" for="guarantorIssueDistrict">जारी जिल्ला</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="issuedPlace"
                       id="guarantorIssueDistrict"
                       autocomplete="off"
                       name="name" placeholder="जारी जिल्ला"
                       type="text"/>
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="title" for="guarantorAddress">ठेगाना</label>
              </td>
              <td>
                <input class="form-control rounded"
                       formControlName="guarantorLegalDocumentAddress"
                       id="guarantorAddress"
                       autocomplete="off"
                       name="name" placeholder="ठेगाना"
                       type="text"/>
              </td>
            </tr>
            <tr class="form-group">
              <td>
                <label class="relationMedium" for="guarantorRelationship">सम्बन्धको
                  माध्यम</label>
              </td>
              <td>
                <select class="form-control" formControlName="relationship"
                        id="guarantorRelationship">
                  <option *ngFor="let relationship of relationshipList"
                          [value]="relationship.value">{{relationship?.value}}</option>
                </select>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <button class="btn tbn-sm btn-flat btn-primary" (click)="addGuarantor()">Add
                  Guarantor
                </button>
                <button class="btn btn-danger float-right" (click)="removeAtIndex(i)"
                        style="position: static">
                  <em class="fa fa-trash" style="color: white;"></em>
                </button>
                <hr>
              </td>
            </tr>
            </tbody>
          </table>
        </nb-tab>
        <nb-tab tabId="1" tabTitle="ग्यारेन्टर विवरण"></nb-tab>
        <nb-tab tabId="2" tabTitle="प्रस्तावित रकम">
          <app-loan-create></app-loan-create>
        </nb-tab>
        <nb-tab tabId="3" tabTitle="टेम्प्लेट डाटा">
          <app-template-data [cadData]="cadData"></app-template-data>
        </nb-tab>
      </nb-tabset>
    </form>
  </nb-card-body>
  <nb-card-footer>
    <div *ngIf="!hideSaveBtn">
      <div class="col-md-12">
        <button class="float-right" nbButton (click)="submit()">save</button>
        <button class="float-right" nbButton status="info" (click)="translate()">Translate</button>
      </div>
    </div>
  </nb-card-footer>
</nb-card>
