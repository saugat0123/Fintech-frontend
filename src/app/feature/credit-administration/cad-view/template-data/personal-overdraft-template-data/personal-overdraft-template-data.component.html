<div [nbSpinner]="spinner">
    <form [formGroup]="form">
        <div class="row p-2">
            <div class="col-md-4">
                <label><strong>Security Type</strong></label>
                <nb-select
                        fullWidth
                        placeholder="Select Security Type"
                        formControlName="selectedSecurity"
                        (selectedChange)="transferValue()"
                        status="info">
                    <nb-option value="LAND">Land</nb-option>
                    <nb-option value="LAND_AND_BUILDING">Land and Building</nb-option>
                </nb-select>
            </div>
        </div>
        <div class="row pt-3 pl-2">
            <div class="col-md-12 pt-3 pl-2">
                <nb-checkbox #limitCheck (change)="loanChecked(limitCheck.checked)" [checked]="loanLimit"><i>Customer has total loan amount above One Crore</i></nb-checkbox>
                <br>
                <nb-checkbox #renewalCheck (change)="renewalChecked(renewalCheck.checked)" [checked]="renewal"><i>Renewal</i></nb-checkbox>
            </div>
        </div>
        <table
                *ngIf="fieldFlag"
                class="table table-borderless table-hover text-center sb-small table-sm">
            <tr>
                <th></th>
                <th>Loan Data</th>
                <th>Nepali Translation</th>
                <th>Correct Translation</th>
            </tr>
            <tr>
                <td>Reference Number</td>
                <td><input type="text" class="form-control" formControlName="referenceNumber"
                           (input)="translateNumber('referenceNumber', 'referenceNumberTransVal')"></td>
                <td class="abc">{{translatedData?.referenceNumber}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.referenceNumberTransVal.errors }"
                           formControlName="referenceNumberTransVal"/>
                    <div *ngIf="submitted && Form.referenceNumberTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.referenceNumberTransVal.errors.required">Reference number is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Date of Approval</td>
                <td>
                    <div class="row" style="margin-left: 5px; margin-top: -8px;">
                        <nb-radio-group name="dateofApproval">
                            <nb-radio (click)="setDateTypeBS()"><span style="margin-left:-60px">BS</span></nb-radio>
                            <nb-radio (click)="setDateTypeAD()" style="margin-left: 60px;margin-top: -35px;">AD</nb-radio>
                        </nb-radio-group>
                    </div>
                </td>
            <tr>
                <td>
                </td>
                <td>
                    <nepali-patro *ngIf="dateTypeBS" formControlName="dateofApproval" [responseType]="2"
                                  [displayNepali]="true">
                    </nepali-patro>
                    <input [nbDatepicker]="doa"
                           *ngIf="dateTypeAD"
                           class="form-control form-control-sm-error rounded"
                           formControlName="dateofApproval"
                           id="dateofApproval"
                           name="dateofApproval"
                           placeholder="Date of Approval"
                           type="text">
                    <nb-datepicker #doa></nb-datepicker>
                </td>
            </tr>

            <tr style="padding: 12px">
                <td>Date Of Application</td>
                <td>
                    <div class="row" style="margin-left: 5px; margin-top: -8px;">
                        <nb-radio-group name="dateofApplication">
                            <nb-radio (click)="setDateTypeBS1()"><span style="margin-left:-60px">BS</span></nb-radio>
                            <nb-radio (click)="setDateTypeAD1()" style="margin-left: 60px;margin-top: -35px;">
                                AD
                            </nb-radio>
                        </nb-radio-group>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                    <nepali-patro *ngIf="dateTypeBS1" formControlName="dateofApplication" [responseType]="2"
                                  [displayNepali]="true">
                    </nepali-patro>
                    <input [nbDatepicker]="doap"
                           *ngIf="dateTypeAD1"
                           class="form-control form-control-sm-error rounded"
                           formControlName="dateofApplication"
                           id="dateofApplication"
                           name="dateofApplication"
                           placeholder="Date of Application"
                           type="text">
                    <nb-datepicker #doap></nb-datepicker>
                </td>
            </tr>

            <tr>
                <td>Purpose of Loan</td>
                <td><input type="text" class="form-control" formControlName="loanPurpose"></td>
                <td class="abc">{{translatedData?.loanPurpose}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.loanPurposeTransVal.errors }"
                           formControlName="loanPurposeTransVal"/>
                    <div *ngIf="submitted && Form.loanPurposeTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.loanPurposeTransVal.errors.required">Purpose of loan is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Base Rate</td>
                <td><input type="text" class="form-control" formControlName="baseRate" (input)="calInterestRate()"></td>
                <td class="abc">{{translatedData?.baseRate}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.baseRateTransVal.errors }"
                           formControlName="baseRateTransVal"/>
                    <div *ngIf="submitted && Form.baseRateTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.baseRateTransVal.errors.required">Base Rate is required</div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Premium Rate</td>
                <td><input type="text" class="form-control" formControlName="premiumRate" (input)="calInterestRate()"></td>
                <td class="abc">{{translatedData?.premiumRate}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.premiumRateTransVal.errors }"
                           formControlName="premiumRateTransVal"/>
                    <div *ngIf="submitted && Form.premiumRateTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.premiumRateTransVal.errors.required">Premium Rate is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Yearly Interest Rate</td>
                <td><input type="text" class="form-control" formControlName="yearlyInterestRate"></td>
                <td class="abc">{{translatedData?.yearlyInterestRate}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.yearlyInterestRateTransVal.errors }"
                           formControlName="yearlyInterestRateTransVal"/>
                    <div *ngIf="submitted && Form.yearlyInterestRateTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.yearlyInterestRateTransVal.errors.required">Interest Rate is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Loan admin Fee</td>
                <td><input (input)="getNumAmountWord('loanadminFee', 'loanadminFeeWords');translateNumber('loanadminFee', 'loanadminFeeTransVal')"
                           type="text" class="form-control" formControlName="loanadminFee"></td>
                <td class="abc">{{translatedData?.loanadminFee}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.loanadminFeeTransVal.errors }"
                           formControlName="loanadminFeeTransVal"/>
                    <div *ngIf="submitted && Form.loanadminFeeTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.loanadminFeeTransVal.errors.required">Loan Admin Fee is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Loan admin Fee Words</td>
                <td><input type="text" class="form-control" formControlName="loanadminFeeWords"></td>
                <td class="abc">{{translatedData?.loanadminFeeWords}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.loanadminFeeWordsTransVal.errors }"
                           formControlName="loanadminFeeWordsTransVal"/>
                    <div *ngIf="submitted && Form.loanadminFeeWordsTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.loanadminFeeWordsTransVal.errors.required">Loan Admin Fee is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td> Loan Commitment Fee (in Percentage)</td>
                <td><input type="text" class="form-control" formControlName="loanCommitmentFee"
                           (input)="translateNumber('loanCommitmentFee', 'loanCommitmentFeeTransVal')"></td>
                <td class="abc">{{translatedData?.loanCommitmentFee}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.loanCommitmentFeeTransVal.errors }"
                           formControlName="loanCommitmentFeeTransVal"/>
                    <div *ngIf="submitted && Form.loanCommitmentFeeTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.loanCommitmentFeeTransVal.errors.required">Loan Commitment Fee is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Date of Expiry</td>
                <td>
                    <div class="row" style="margin-left: 5px; margin-top: -8px;">
                        <nb-radio-group name="dateofExpiry">
                            <nb-radio (click)="setDateTypeBS2()"><span style="margin-left:-60px">BS</span></nb-radio>
                            <nb-radio (click)="setDateTypeAD2()" style="margin-left: 60px;margin-top: -35px;">AD</nb-radio>
                        </nb-radio-group>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                    <nepali-patro *ngIf="dateTypeBS2" formControlName="dateofExpiry" [responseType]="2"
                                  [displayNepali]="true">
                    </nepali-patro>
                    <input [nbDatepicker]="doe"
                           *ngIf="dateTypeAD2"
                           class="form-control form-control-sm-error rounded"
                           formControlName="dateofExpiry"
                           id="dateofExpiry"
                           name="dateofExpiry"
                           placeholder="Date of Expiry"
                           type="text">
                    <nb-datepicker #doe></nb-datepicker>
                </td>
            </tr>

            <tr>
                <td>Owner Name</td>
                <td><input type="text" class="form-control" formControlName="ownerName"></td>
                <td class="abc">{{translatedData?.ownerName}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.ownerNameTransVal.errors }"
                           formControlName="ownerNameTransVal"/>
                    <div *ngIf="submitted && Form.ownerNameTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.ownerNameTransVal.errors.required">Owner's Name is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Owner's Address</td>
                <td><input type="text" class="form-control" formControlName="ownersAddress"></td>
                <td class="abc">{{translatedData?.ownersAddress}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.ownersAddressTransVal.errors }"
                           formControlName="ownersAddressTransVal"/>
                    <div *ngIf="submitted && Form.ownersAddressTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.ownersAddressTransVal.errors.required">Owner's Address is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Property Plot Number</td>
                <td><input type="text" class="form-control" formControlName="propertyPlotNumber"
                           (input)="translateNumber('propertyPlotNumber', 'propertyPlotNumberTransVal')"></td>
                <td class="abc">{{translatedData?.propertyPlotNumber}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.propertyPlotNumberTransVal.errors }"
                           formControlName="propertyPlotNumberTransVal"/>
                    <div *ngIf="submitted && Form.propertyPlotNumberTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.propertyPlotNumberTransVal.errors.required">Property Plot Number is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Sheet Number</td>
                <td><input type="text" class="form-control" formControlName="sheetNumber"
                           (input)="translateNumber('sheetNumber', 'sheetNumberTransVal')"></td>
                <td class="abc">{{translatedData?.sheetNumber}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.sheetNumberTransVal.errors }"
                           formControlName="sheetNumberTransVal"/>
                    <div *ngIf="submitted && Form.sheetNumberTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.sheetNumberTransVal.errors.required">Sheet Number is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Property Area</td>
                <td><input type="text" class="form-control" formControlName="propertyArea"
                           (input)="translateNumber('propertyArea', 'propertyAreaTransVal')"></td>
                <td class="abc">{{translatedData?.propertyArea}}</td>
                <td>
                        <input type="text" class="form-control"
                               [ngClass]="{ 'is-invalid':submitted && Form.propertyAreaTransVal.errors }"
                               formControlName="propertyAreaTransVal"/>
                        <div *ngIf="submitted && Form.propertyAreaTransVal.errors"
                             class="invalid-feedback">
                            <div *ngIf="Form.propertyAreaTransVal.errors.required">Property Area is required</div>
                        </div>
                    </td>
            </tr>

            <tr>
                <td>Relationship officer Name</td>
                <td><input type="text" class="form-control" formControlName="relationshipofficerName"></td>
                <td class="abc">{{translatedData?.relationshipofficerName}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.relationshipofficerNameTransVal.errors }"
                           formControlName="relationshipofficerNameTransVal"/>
                    <div *ngIf="submitted && Form.relationshipofficerNameTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.relationshipofficerNameTransVal.errors.required">Relationship Officer Name is required</div>
                    </div>
                </td>
            </tr>

            <tr>
                <td>Name of Branch Manager</td>
                <td><input type="text" class="form-control" formControlName="nameofBranchManager"></td>
                <td class="abc">{{translatedData?.nameofBranchManager}}</td>
                <td>
                        <input type="text" class="form-control"
                               [ngClass]="{ 'is-invalid':submitted && Form.nameofBranchManagerTransVal.errors }"
                               formControlName="nameofBranchManagerTransVal"/>
                        <div *ngIf="submitted && Form.nameofBranchManagerTransVal.errors"
                             class="invalid-feedback">
                            <div *ngIf="Form.nameofBranchManagerTransVal.errors.required">Name of company is required</div>
                        </div>
                    </td>
            </tr>

            <tr>
                <td>Staff Name</td>
                <td><input type="text" class="form-control" formControlName="staffName"></td>
                <td class="abc">{{translatedData?.staffName}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.staffNameTransVal.errors }"
                           formControlName="staffNameTransVal"/>
                    <div *ngIf="submitted && Form.staffNameTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.staffNameTransVal.errors.required">Staff Name is required</div>
                    </div>
                </td>
            </tr>

            <tr *ngIf="selectedSecurityVal === 'LAND_AND_BUILDING'">
                <td>Insurance Amount in Figure</td>
                <td><input type="text" class="form-control" formControlName="insuranceAmountinFigure"
                           (input)="translateNumber('insuranceAmountinFigure', 'insuranceAmountinFigureTransVal')"></td>
                <td class="abc">{{translatedData?.insuranceAmountinFigure}}</td>
                <td>
                    <input type="text" class="form-control"
                           [ngClass]="{ 'is-invalid':submitted && Form.insuranceAmountinFigureTransVal.errors }"
                           formControlName="insuranceAmountinFigureTransVal"/>
                    <div *ngIf="submitted && Form.insuranceAmountinFigureTransVal.errors"
                         class="invalid-feedback">
                        <div *ngIf="Form.insuranceAmountinFigureTransVal.errors.required">Insurance Amount is required</div>
                    </div>
                </td>
            </tr>
        </table>
    </form>
    <button [disabled]="previewBtn"
            class="float-right" nbButton
            (click)="openModel()"
            status="primary">
        Preview
    </button>
    <button nbButton status="info" (click)="submit()" size="medium" type="submit" class="float-right" [disabled]="btnDisable">Save</button>
    <button nbButton size="medium" class="float-right" (click)="translate()">
        Translate
    </button>
</div>



