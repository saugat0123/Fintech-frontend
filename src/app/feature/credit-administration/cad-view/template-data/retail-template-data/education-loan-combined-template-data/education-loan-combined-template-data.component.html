<div>
    <form [formGroup]="educationLoanCombinedForm">
        <div *ngFor="let formDetails of educationLoanCombinedForm.get('educationLoanCombinedFormArray')['controls']; let i = index" formArrayName="educationLoanCombinedFormArray">
            <ng-container [formGroupName]="i">
                <div class="row">
                    <div class="col-md-12 pb-2">
                        <h5> EDUCATION LOAN {{filteredList.length > 1 ? '- ' +( i + 1) : ''}}</h5>
                    </div>
                    <div class="col-md-4 mt-4">
                        <label><strong> Country </strong></label>
                        <nb-select
                                formControlName="countryName"
                                fullWidth
                                placeholder="Select Country">
                            <nb-option value="AUSTRALIA"> Australia </nb-option>
                            <nb-option value="OTHERS"> Others </nb-option>
                        </nb-select>
                    </div>
                    <div class="col-md-4 mt-4">
                        <label><strong> Security Type</strong></label>
                        <nb-select
                                formControlName="securityType"
                                fullWidth
                                placeholder="Security Type">
                            <nb-option value="TD"> TD </nb-option>
                            <nb-option value="LAND"> Land </nb-option>
                            <nb-option value="LAND_BUILDING"> Land And Building </nb-option>
                        </nb-select>
                    </div>
                    <div class="col-md-4 mt-4">
                        <label><strong>Interest Rate Type</strong></label>
                        <nb-select
                                formControlName="interestRateType"
                                fullWidth
                                placeholder="Interest Rate Type">
                            <nb-option value="FLOATING_INTEREST"> Floating Interest Rate </nb-option>
                            <nb-option value="FIXED_INTEREST"> Fixed Interest Rate </nb-option>
                        </nb-select>
                    </div>
                    <div class="col-md-12 mt-3">
                        <nb-checkbox #renewalCheck (checkedChange)="moratoriumCheckFunc(renewalCheck.checked, i)"
                                     formControlName="moratoriumPeriodCheck">
                            Moratorium Period Required ?
                        </nb-checkbox>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <label class="font-weight-bold" for="loanAmountInFigure">Loan Amount Figure</label>
                        <input class="form-control" formControlName="loanAmountInFigure" fullWidth id="loanAmountInFigure"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="loanAmountInFigureTrans" fullWidth id="loanAmountInFigureTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="loanAmountInFigureCT" fullWidth id="loanAmountInFigureCT"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="loanAmountInWords">Loan Amount In Words</label>
                        <input class="form-control" formControlName="loanAmountInWords" fullWidth id="loanAmountInWords"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="loanAmountInWordsTrans" fullWidth id="loanAmountInWordsTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="loanAmountInWordsCT" fullWidth id="loanAmountInWordsCT"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="purposeOfLoan"> Purpose of Loan</label>
                        <input class="form-control" formControlName="purposeOfLoan" fullWidth id="purposeOfLoan"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="purposeOfLoanTrans" fullWidth id="purposeOfLoanTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="purposeOfLoanCT" fullWidth id="purposeOfLoanCT"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'TD' &&
                this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'interestRateType']).value === 'FLOATING_INTEREST'">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="baseRate"> Base Rate </label>
                        <input class="form-control" formControlName="baseRate" fullWidth id="baseRate"
                               nbInput
                               (input)="calInterestRate(i)"
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="baseRateTrans" fullWidth id="baseRateTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="baseRateCT" fullWidth id="baseRateCT"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'interestRateType']).value === 'FLOATING_INTEREST'">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="premiumRate"> Premium Rate </label>
                        <input class="form-control" formControlName="premiumRate" fullWidth id="premiumRate"
                               nbInput
                               (input)="calInterestRate(i)"
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="premiumRateTrans" fullWidth id="premiumRateTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="premiumRateCT" fullWidth id="premiumRateCT"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="interestRate"> Interest Rate </label>
                        <input class="form-control" formControlName="interestRate" fullWidth id="interestRate"
                               nbInput
                               shape="semi-round"
                               status="success" type="number"
                               [ngClass]="{'readOnly': this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'interestRateType']).value === 'FLOATING_INTEREST'}">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="interestRateTrans" fullWidth id="interestRateTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="interestRateCT" fullWidth id="interestRateCT"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND' ||
                     this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND_BUILDING'">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="marginInPercentage">Margin in Percentage (%)</label>
                        <input class="form-control" formControlName="marginInPercentage" fullWidth id="marginInPercentage"
                               nbInput
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="marginInPercentageTrans" fullWidth id="marginInPercentageTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="marginInPercentageCT" fullWidth id="marginInPercentageCT"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>

                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND' ||
                     this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND_BUILDING'">
                    <div class="col-md-4">
                        <label class="font-weight-bold" for="loanAdminFeeInFigure">Loan Admin Fee</label>
                        <input class="form-control" formControlName="loanAdminFeeInFigure" fullWidth id="loanAdminFeeInFigure"
                               (input)="getNumAmountWord('loanAdminFeeInFigure', 'loanAdminFeeInWords', i, 'educationLoanCombinedFormArray')"
                               nbInput
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="loanAdminFeeInFigureTrans" fullWidth id="loanAdminFeeInFigureTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="loanAdminFeeInFigureCT" fullWidth id="loanAdminFeeInFigureCT"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND' ||
                     this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND_BUILDING'">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="loanAdminFeeInWords">Loan Admin Fee In Words</label>
                        <input class="form-control" formControlName="loanAdminFeeInWords" fullWidth id="loanAdminFeeInWords"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="loanAdminFeeInWordsTrans" fullWidth id="loanAdminFeeInWordsTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="loanAdminFeeInWordsCT" fullWidth id="loanAdminFeeInWordsCT"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>

                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND' ||
                     this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND_BUILDING'">
                    <div class="col-md-4">
                        <label class="font-weight-bold" for="EMIAmountInFigure">EMI Amount In Figure</label>
                        <input class="form-control" formControlName="EMIAmountInFigure" fullWidth id="EMIAmountInFigure"
                               (input)="getNumAmountWord('EMIAmountInFigure', 'EMIAmountInWords', i, 'educationLoanCombinedFormArray')"
                               nbInput
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="EMIAmountInFigureTrans" fullWidth id="EMIAmountInFigureTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="EMIAmountInFigureCT" fullWidth id="EMIAmountInFigureCT"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND' ||
                     this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND_BUILDING'">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="EMIAmountInWords">EMI AMount In Words</label>
                        <input class="form-control" formControlName="EMIAmountInWords" fullWidth id="EMIAmountInWords"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="EMIAmountInWordsTrans" fullWidth id="EMIAmountInWordsTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="EMIAmountInWordsCT" fullWidth id="EMIAmountInWordsCT"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>

                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND' ||
                     this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND_BUILDING'">
                    <div class="col-md-4">
                        <label class="font-weight-bold" for="totalNumberOfInstallments">Total Number Of Installments</label>
                        <input class="form-control" formControlName="totalNumberOfInstallments" fullWidth id="totalNumberOfInstallments"
                               nbInput
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="totalNumberOfInstallmentsTrans" fullWidth id="totalNumberOfInstallmentsTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="totalNumberOfInstallmentsCT" fullWidth id="totalNumberOfInstallmentsCT"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>

                <div class="row" *ngIf="(this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND' ||
                     this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'LAND_BUILDING') &&
                       this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'moratoriumPeriodCheck']).value">
                    <div class="col-md-4">
                        <label class="font-weight-bold" for="moratoriumPeriod"> Moratorium Period </label>
                        <input class="form-control" formControlName="moratoriumPeriod" fullWidth id="moratoriumPeriod"
                               nbInput
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="moratoriumPeriodTrans" fullWidth id="moratoriumPeriodTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="moratoriumPeriodCT" fullWidth id="moratoriumPeriodCT"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>

                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'TD'">
                    <div class="col-md-4">
                        <label class="font-weight-bold" for="FDAmountInFigure">FD Amount In Figure</label>
                        <input class="form-control" formControlName="FDAmountInFigure" fullWidth id="FDAmountInFigure"
                               (input)="getNumAmountWord('FDAmountInFigure', 'FDAmountInWords', i, 'educationLoanCombinedFormArray')"
                               nbInput
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="FDAmountInFigureTrans" fullWidth id="FDAmountInFigureTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="FDAmountInFigureCT" fullWidth id="FDAmountInFigureCT"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>
                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'TD'">
                    <div class="col-md-4 form-group">
                        <label class="font-weight-bold" for="FDAmountInWords">FD Amount In Words</label>
                        <input class="form-control" formControlName="FDAmountInWords" fullWidth id="FDAmountInWords"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="FDAmountInWordsTrans" fullWidth id="FDAmountInWordsTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="FDAmountInWordsCT" fullWidth id="FDAmountInWordsCT"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>

                <div class="row" *ngIf="this.educationLoanCombinedForm.get(['educationLoanCombinedFormArray', i, 'securityType']).value === 'TD'">
                    <div class="col-md-4">
                        <label class="font-weight-bold" for="FDNumber">TD Number</label>
                        <input class="form-control" formControlName="FDNumber" fullWidth id="FDNumber"
                               nbInput
                               shape="semi-round"
                               status="success" type="number">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="FDNumberTrans" fullWidth id="FDNumberTrans"
                               readonly
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                    <div class="col-md-4 form-group fieldMargin">
                        <input class="form-control" formControlName="FDNumberCT" fullWidth id="FDNumberCT"
                               nbInput
                               shape="semi-round"
                               status="success" type="text">
                    </div>
                </div>

                <!-- For Translation -->
                <div class="row pt-5 pb-2 pr-4">
                    <div class="col-md-12 text-right">
                        <button (click)="translateAndSetVal(i)" nbButton outline size="small" status="info">
                            Translate Education Loan Details
                        </button>
                    </div>
                </div>
            </ng-container>
            <hr/>
        </div>
    </form>
</div>
