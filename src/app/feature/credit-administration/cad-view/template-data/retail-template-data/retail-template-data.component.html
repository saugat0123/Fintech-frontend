<nb-card [nbSpinner]="spinner">
    <nb-card-header *ngIf="isEdit">
        <h3>Edit Combined Loan Data</h3>
        <span class="font-weight-bold cursor float-right" style="margin-top: -2em"
              (click)="nbDialogRef.close()">x</span>
    </nb-card-header>
    <nb-card-body>
        <app-retail-global-content #retailGlobalContent [offerDocumentList]="customerApprovedDoc.offerDocumentList"
                                [isEdit]="isEdit"></app-retail-global-content>
        <!-- Type of sme loan start here-->
        <ng-container *ngIf="isPersonalLoan">
            <app-personal-loan-combined-template-data [offerDocumentList]="customerApprovedDoc.offerDocumentList"
                                                       #personalLoanCombined [loanName]="loanExtraDetails"
                                                       [cadDocAssignedLoan]="customerApprovedDoc.assignedLoan">
            </app-personal-loan-combined-template-data>
        </ng-container>
        <ng-container *ngIf="isPersonalOverdraftLoan">
            <app-personal-overdraft-combined-template-data [offerDocumentList]="customerApprovedDoc.offerDocumentList"
                                                      #personalOverdraftCombined [loanName]="loanExtraDetails"
                                                      [cadDocAssignedLoan]="customerApprovedDoc.assignedLoan">
            </app-personal-overdraft-combined-template-data>
        </ng-container>
        <ng-container *ngIf="isEducationLoan">
            <app-education-loan-combined-template-data [offerDocumentList]="customerApprovedDoc.offerDocumentList"
                                                      #educationLoanCombined [loanName]="loanExtraDetails"
                                                      [cadDocAssignedLoan]="customerApprovedDoc.assignedLoan">
            </app-education-loan-combined-template-data>
        </ng-container>
        <ng-container *ngIf="isMortgageLoan">
            <app-mortgage-loan-combined-template-data [offerDocumentList]="customerApprovedDoc.offerDocumentList"
                                                      #mortgageLoanCombined [loanName]="loanExtraDetails"
                                                      [cadDocAssignedLoan]="customerApprovedDoc.assignedLoan">
            </app-mortgage-loan-combined-template-data>
        </ng-container>
        <!-- Type of sme loan end here-->
        <app-sme-security [offerDocumentList]="customerApprovedDoc.offerDocumentList" #masterSecurity
                          [offerDocumentList]="customerApprovedDoc.offerDocumentList" [isEdit]="isEdit"></app-sme-security>
    </nb-card-body>
    <nb-card-footer>
        <!-- Required Document Section -->
        <app-required-legal-document-section #requiredLegalDocumentSectionComponent
                                             [initialInformation]="initialInformation"></app-required-legal-document-section>
        <div class="row">
            <div class="col-md-12">
                <button class="float-right" *ngIf="!isEdit" nbButton size="small" (click)="openCloseTemplate(confirm)"
                        status="info" style="margin-right: 0.5em" [disabled]="!disableBtn">Close</button>
                <button class="d-flex float-right" nbButton status="success" size="small"
                        (click)="openCombinedOfferLetter()" [disabled]="!disableBtn">Preview</button>
                <button class="d-flex float-right ml-1" nbButton status="primary" size="small" (click)="onSubmit()"
                        [disabled]="disableBtn">Save</button>
            </div>
        </div>
    </nb-card-footer>
</nb-card>


<ng-template #confirm>
    <div class="modal-header" style="padding-left: 90%">
        <a (click)="dismiss(confirm)" aria-label="Close" class="close pull-right cursor">
            <span aria-hidden="true">&times;</span>
        </a>
    </div>
    <div class="modal-body" style="text-align:center; font-size: 18px">
        Are you sure you want to close ?
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="decline(confirm)">No</button>
        <button type="button" class="btn btn-primary" (click)="accept()">Yes</button>
    </div>
</ng-template>
