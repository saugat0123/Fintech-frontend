<nb-card>
    <nb-card-body>
        <form [formGroup]="multiBankingForm">
            <div class="row">
                <div class="col-md-12">
                    <span><strong>Select Banking Arrangement</strong></span>
                    <nb-select>
                        <nb-option *ngFor="let fa of financialArrange"
                                   (change)="changeFinancialArrange($event)"
                                   [value]="fa">{{fa}}
                        </nb-option>
                    </nb-select>
                    <br>
                    <ng-container>
                        <strong>Consortium</strong>
<!--                        Date of declaration:-->
<!--                        <input [nbDatepicker]="multiBankDate"-->
<!--                               class="form-control text-center"-->
<!--                               formControlName="multiBankingDate"-->
<!--                               placeholder="Select Date"/>-->
<!--                        <nb-datepicker #multiBankDate></nb-datepicker>-->
                        <table class="table table-bordered table-responsive-md table-hover table-sm sb-small text-center">
                            <thead>
                            <tr class="sb-bg-secondary text-white">
                                <th>S.N</th>
                                <th>Banks</th>
                                <th>Funded(WCL)</th>
                                <th>Non-Funded</th>
                                <th>Term Loans</th>
                                <th>Total</th>
                                <th>Percent(%)</th>
                            </tr>
                            </thead>
                            <tbody *ngFor="let co of multiBankingForm?.get('consortium')['controls']; let ii = index"
                                   formArrayName="consortium">
                            <tr [formGroupName]="ii">
                                <td>{{ii+1}}</td>
                                <td>{{co?.get('coBankName')?.value}}</td>
                                <td><input (change)="calculateAmount(ii, 'totalFunded', 'consortium')"
                                           class="form-control text-center"
                                           formControlName="funded"
                                           placeholder="Funded(WCL)"
                                           type="number"/>
                                </td>
                                <td><input (change)="calculateAmount(ii, 'totalNonFunded', 'consortium')"
                                           class="form-control text-center"
                                           formControlName="nonFunded"
                                           placeholder="Non-Funded"
                                           type="number"/></td>
                                <td><input (change)="calculateAmount(ii, 'totalTermLoan', 'consortium')"
                                           class="form-control text-center"
                                           formControlName="termLoan"
                                           placeholder="Term Loans"
                                           type="number"/></td>
                                <td><input [readOnly]="true"
                                           (change)="calculateAmount(ii, 'totalTotal', 'consortium')"
                                           class="form-control text-center"
                                           formControlName="total"
                                           placeholder="Total"
                                           type="number"/></td>
                                <td><input (change)="calculateAmount(ii, 'totalPercent', 'consortium')"
                                           class="form-control text-center"
                                           formControlName="bankPercent"
                                           placeholder="Percent(%)"
                                           type="number"/></td>
                            </tr>
                            </tbody>
                            <tbody>
                            <tr>
                                <td></td>
                                <td>Total</td>
                                <td><input [readOnly]="true"
                                           class="form-control text-center"
                                           formControlName="totalFunded"
                                           placeholder="Total Funded"
                                           type="number"/></td>
                                <td><input [readOnly]="true"
                                           class="form-control text-center"
                                           formControlName="totalNonFunded"
                                           placeholder="Total Non-Funded"
                                           type="number"/></td>
                                <td><input [readOnly]="true"
                                           class="form-control text-center"
                                           formControlName="totalTermLoan"
                                           placeholder="Term Loans"
                                           type="number"/></td>
                                <td><input [readOnly]="true"
                                           class="form-control text-center"
                                           formControlName="totalTotal"
                                           placeholder="Total"
                                           type="number"/></td>
                                <td><input [readOnly]="true"
                                           class="form-control text-center"
                                           formControlName="totalPercent"
                                           placeholder="Total Percent"
                                           type="number"/></td>
                            </tr>
                            </tbody>
                        </table>
                    </ng-container>
                    <hr>
                    <ng-container>
                        <div class="col-md-4">
                            <strong>Multiple Banking</strong>
                            Date of declaration:
                            <input [nbDatepicker]="multiBankDate"
                                   class="form-control text-center"
                                   formControlName="multiBankingDate"
                                   placeholder="Select Date"/>
                            <nb-datepicker #multiBankDate></nb-datepicker>
                        </div>
                        <table class="table table-bordered table-responsive-md table-hover table-sm sb-small text-center">
                            <thead>
                            <tr class="sb-bg-secondary text-white">
                                <th>S.N</th>
                                <th>Name of Banks/FIs</th>
                                <th>Facilities</th>
                                <th>Limit</th>
                                <th>OutStanding</th>
                                <th>Overdue</th>
                                <th *ngIf="multiBankingForm.get('multiBanking')['length'] > 1">Action</th>
                            </tr>
                            </thead>
                            <tbody *ngFor="let data of multiBankingForm.get('multiBanking')['controls']; let i = index"
                                   formArrayName="multiBanking">
                            <tr [formGroupName]="i">
                                <td>{{i + 1}}</td>
                                <td><input class="form-control text-center"
                                           formControlName="bankName"
                                           placeholder="Bank Name"
                                           type="text"/></td>
                                <td>
                                    <input class="form-control text-center"
                                           formControlName="facilityName"
                                           placeholder="Facility Name"
                                           type="text"/>
                                </td>
                                <td><input class="form-control text-center"
                                           formControlName="limit"
                                           placeholder="Limit"
                                           type="number"/></td>
                                <td><input class="form-control text-center"
                                           formControlName="outstanding"
                                           placeholder="Outstanding"
                                           type="number"/></td>
                                <td><input class="form-control text-center"
                                           formControlName="overDue"
                                           placeholder="Overdue"
                                           type="text"/></td>
                                <td *ngIf="multiBankingForm.get('multiBanking')['length'] > 1">
                                    <input (click)="removeData(i, 'multiBanking')"
                                           class="align-self-end btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </td>
                            </tr>
                            </tbody>
                            <tr class="font-weight-bold">
                                <td colspan="2">Total</td>
                                <td></td>
                                <td></td>
                                <td><input [readOnly]="true" class="form-control text-center"
                                           formControlName="totalLimit"
                                           type="number"></td>
                                <td><input [readOnly]="true" class="form-control text-center"
                                           formControlName="totalOutstanding"
                                           type="number"></td>
                                <td *ngIf="multiBankingForm.get('multiBanking')['length'] > 1"></td>
                            </tr>
                        </table>
                        <div class="text-right">
                            <input (click)="addMultipleBanking()" class="btn btn-sm btn-flat btn-primary"
                                   type="button" value="Add More"/>
                        </div>
                    </ng-container>
                    <hr>
                    <ng-container>
                        <div class="col-md-6">
                            <nb-checkbox (change)="checkChecked($event.target.checked,'swap')"
                                         [checked]="swapChecked"><b>Swap</b>
                            </nb-checkbox>
                            <br>
                            Date of Report:
                            <input [nbDatepicker]="swap"
                                   class="form-control text-center"
                                   formControlName="swapDate"
                                   placeholder="Select Date"/>
                            <nb-datepicker #swap></nb-datepicker>
                        </div>
                        <table class="table table-bordered table-responsive-md table-hover table-sm sb-small text-center">
                            <thead>
                            <tr class="sb-bg-secondary text-white">
<!--                                <th>S.N</th>-->
                                <th>Name of Banks/FIs</th>
                                <th>Facilities</th>
                                <th>Limit</th>
                                <th>OutStanding</th>
                                <th>Classification</th>
                                <th>Account conduct</th>
<!--                                <th *ngIf="multiBankingForm.get('multiBanking')['length'] > 1">Action</th>-->
                            </tr>
                            </thead>
                            <tbody *ngFor="let sw of multiBankingForm?.get('bfiSwap')['controls']; let iii = index"
                                   formArrayName="bfiSwap">
                            <tr [formGroupName]="iii">
<!--                                <td>{{iii + 1}}</td>-->
                                <td><input class="form-control text-center"
                                           formControlName="bankName"
                                           placeholder="Bank Name"
                                           type="text"/></td>
                                <td>
                                    <input class="form-control text-center"
                                           formControlName="facilityName"
                                           placeholder="Facility Name"
                                           type="text"/>
                                </td>
                                <td><input class="form-control text-center"
                                           formControlName="limit"
                                           placeholder="Limit"
                                           type="number"/></td>
                                <td><input class="form-control text-center"
                                           formControlName="outstanding"
                                           placeholder="Outstanding"
                                           type="number"/></td>
                                <td><input class="form-control text-center"
                                           formControlName="classification"
                                           placeholder="Classification"
                                           type="text"/></td>
                                <td><input class="form-control text-center"
                                           formControlName="account"
                                           placeholder="Account Conduct"
                                           type="text"/></td>
<!--                                <td *ngIf="multiBankingForm.get('bfiSwap')['length'] > 1">-->
<!--                                    <input (click)="removeData(iii, 'bfiSwap')"-->
<!--                                           class="align-self-end btn btn-sm btn-danger btn-primary"-->
<!--                                           type="button" value="Delete"/>-->
<!--                                </td>-->
                            </tr>
                            </tbody>
                        </table>
<!--                        <div class="text-right">-->
<!--                            <input (click)="addSwap()" class="btn btn-sm btn-flat btn-primary"-->
<!--                                   type="button" value="Add More"/>-->
<!--                        </div>-->
                    </ng-container>
                </div>
            </div>
            <nb-card-footer *ngIf="fromProfile">
                <button (click)="submitForm()" class="btn float-right" nbButton type="submit">Save</button>
            </nb-card-footer>
        </form>
    </nb-card-body>
</nb-card>
