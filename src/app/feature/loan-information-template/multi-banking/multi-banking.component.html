<nb-card>
    <nb-card-body>
        <form (ngSubmit)="submitForm()" [formGroup]="multiBankingForm">
            <div class="row">
                <div class="col-md-12">
                    <span><strong>Multi Banking</strong></span>
                    <table class="table table-bordered table-responsive-md table-hover table-sm sb-small text-center">
                        <thead>
                        <tr class="sb-bg-secondary text-white">
                            <th>S.N</th>
                            <th>Bank Name</th>
                            <th>Date</th>
                            <th>Funded Limited</th>
                            <th>Non Funded Limited</th>
                            <th>Total Limit</th>
                            <th>Funded O.S</th>
                            <th>Non Funded O.S</th>
                            <th>Total O.S</th>
                            <th>Remark (if any)</th>
                            <th *ngIf="multiBankingForm.get('multiBanking')['length'] > 1">Action</th>
                        </tr>
                        </thead>
                        <tbody *ngFor="let data of multiBankingForm.get('multiBanking')['controls']; let i = index"
                               formArrayName="multiBanking">
                        <tr [formGroupName]="i">
                            <td>{{i+1}}</td>
                            <td><input class="form-control text-center"
                                       formControlName="bankName"
                                       placeholder="Bank Name"
                                       type="text"/></td>
                            <td>
                                <input [nbDatepicker]="date"
                                       class="form-control text-center"
                                       formControlName="date"
                                       placeholder="Date"/>
                                <nb-datepicker #date></nb-datepicker>
                            </td>
                            <td><input (keyup)="calculateTotalMultiBanking()"
                                       (change)="multiTotalLimit(i)"
                                       class="form-control text-center"
                                       formControlName="fundedLimited"
                                       placeholder="Funded Limited"
                                       type="number"/></td>
                            <td><input (keyup)="calculateTotalMultiBanking()"
                                       (change)="multiTotalLimit(i)"
                                       class="form-control text-center"
                                       formControlName="nonFundedLimited"
                                       placeholder="Non Funded Limited"
                                       type="number"/></td>
                            <td><input [readOnly]="true"
                                       class="form-control text-center"
                                       formControlName="totalLimit"
                                       placeholder="Total Limit"
                                       type="number"/></td>
                            <td><input (keyup)="calculateTotalMultiBanking()"
                                       (change)="multiTotalOS(i)"
                                       class="form-control text-center"
                                       formControlName="fundedOS"
                                       placeholder="Funded O.S"
                                       type="number"/></td>
                            <td><input (keyup)="calculateTotalMultiBanking()"
                                       (change)="multiTotalOS(i)"
                                       class="form-control text-center"
                                       formControlName="nonFundedOS"
                                       placeholder="Non Funded O.S"
                                       type="number"/></td>
                            <td><input class="form-control text-center"
                                       formControlName="totalOS"
                                       placeholder="Total O.S"
                                       type="number"/></td>
                            <td><input class="form-control text-center"
                                       formControlName="remarks"
                                       placeholder="Remarks (if any)"
                                       type="text"/></td>
                            <td *ngIf="multiBankingForm.get('multiBanking')['length'] > 1">
                                <input (click)="removeMultiBanking(i)"
                                       class="align-self-end btn btn-sm btn-danger btn-primary"
                                       type="button" value="Delete"/>
                            </td>
                        </tr>
                        </tbody>
                        <tr class="font-weight-bold">
                            <td>Total</td>
                            <td></td>
                            <td></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="totalFundedLimited"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="totalNonFundedLimited"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="totalLimited1"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="totalFundedOS"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="totalNonFundedOS"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="totalOS1"
                                       type="number"></td>
                            <td></td>
                        </tr>
                    </table>
                    <div class="text-right">
                        <input (click)="addMultiBanking()" class="btn btn-sm btn-flat btn-primary"
                               type="button" value="Add More"/>
                    </div>
                </div>

                <div class="col-md-12">
                    <span><strong>Consortium</strong></span>
                    <table class="table table-bordered table-responsive-md table-hover table-sm sb-small text-center">
                        <thead>
                        <tr class="sb-bg-secondary text-white">
                            <th>S.N</th>
                            <th>Bank Name</th>
                            <th>Date</th>
                            <th>Funded Limited</th>
                            <th>Non Funded Limited</th>
                            <th>Total Limit</th>
                            <th>Funded O.S</th>
                            <th>Non Funded O.S</th>
                            <th>Total O.S</th>
                            <th>Remark (if any)</th>
                            <th *ngIf="multiBankingForm.get('consortium')['length'] > 1">Action</th>
                        </tr>
                        </thead>
                        <tbody *ngFor="let data of multiBankingForm.get('consortium')['controls']; let index = index"
                               formArrayName="consortium">
                        <tr [formGroupName]="index">
                            <td>{{index+1}}</td>
                            <td><input class="form-control text-center"
                                       formControlName="conBankName"
                                       placeholder="Bank Name"
                                       type="text"/></td>
                            <td>
                                <input [nbDatepicker]="date1" class="form-control text-center"
                                       formControlName="conDate"
                                       placeholder="Date"/>
                                <nb-datepicker #date1></nb-datepicker></td>
                            <td><input (keyup)="calculateTotalConsortium()"
                                       (change)="consortiumTotalLimit(index)"
                                       class="form-control text-center"
                                       formControlName="conFundedLimited"
                                       placeholder="Funded Limited"
                                       type="number"/></td>
                            <td><input (keyup)="calculateTotalConsortium()"
                                       (change)="consortiumTotalLimit(index)"
                                       class="form-control text-center"
                                       formControlName="conNonFundedLimited"
                                       placeholder="Non Funded Limited"
                                       type="number"/></td>
                            <td><input [readOnly]="true"
                                       class="form-control text-center"
                                       formControlName="conTotalLimit"
                                       placeholder="Total Limit"
                                       type="number"/></td>
                            <td><input (keyup)="calculateTotalConsortium()"
                                       (change)="consortiumTotalOS(index)"
                                       class="form-control text-center"
                                       formControlName="conFundedOS"
                                       placeholder="Funded O.S"
                                       type="number"/></td>
                            <td><input (keyup)="calculateTotalConsortium()"
                                       (change)="consortiumTotalOS(index)"
                                       class="form-control text-center"
                                       formControlName="conNonFundedOS"
                                       placeholder="Non Funded O.S"
                                       type="number"/></td>
                            <td><input [readOnly]="true"
                                       class="form-control text-center"
                                       formControlName="conTotalOS"
                                       placeholder="Total O.S"
                                       type="number"/></td>
                            <td><input class="form-control text-center"
                                       formControlName="conRemarks"
                                       placeholder="Remarks (if any)"
                                       type="text"/></td>
                            <td *ngIf="multiBankingForm.get('consortium')['length'] > 1">
                                <input (click)="removeConsortium(index)"
                                       class="align-self-end btn btn-sm btn-danger btn-primary"
                                       type="button" value="Delete"/>
                            </td>
                        </tr>
                        </tbody>
                        <tr class="font-weight-bold">
                            <td>Total</td>
                            <td></td>
                            <td></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="conTotalFundedLimited"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="conTotalNonFundedLimited"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="conTotalLimited1"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="conTotalFundedOS"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="conTotalNonFundedOS"
                                       type="number"></td>
                            <td><input [readOnly]="true" class="form-control text-center"
                                       formControlName="conTotalOS1"
                                       type="number"></td>
                            <td></td>
                        </tr>
                    </table>
                    <div class="text-right">
                        <input (click)="addConsortium()" class="btn btn-sm btn-flat btn-primary"
                               type="button" value="Add More"/>
                    </div>
                </div>

                <div class="col-md-12">
                    <table class="table table-bordered table-responsive-md table-hover table-sm sb-small text-left">
                        <tbody>
                        <tr>
                            <th>Lead Bank</th>
                            <td><input class="form-control text-center"
                                       formControlName="leadBank"
                                       placeholder="Lead Bank"
                                       type="text"/></td>
                        </tr>
                        <tr>
                            <th>Financial Information of the Borrower</th>
                            <td><input class="form-control text-center"
                                       formControlName="financialInformation"
                                       placeholder="Financial Information of the Borrower"
                                       type="number"/></td>
                        </tr>
                        <tr>
                            <th>Last Audited Year</th>
                            <td><input class="form-control text-center"
                                       formControlName="lastAudited"
                                       placeholder="Last Audited Year"
                                       type="text"/></td>
                        </tr>
                        <tr>
                            <th>Auditor's Name</th>
                            <td><input class="form-control text-center"
                                       formControlName="auditorName"
                                       placeholder="Auditor's Name"
                                       type="text"/></td>
                        </tr>
                        <tr>
                            <th>Tax Amount</th>
                            <td><input class="form-control text-center"
                                       formControlName="taxAmount"
                                       placeholder="Tax Amount"
                                       type="text"/></td>
                        </tr>
                        <tr>
                            <th>Name of Executive Head</th>
                            <td><input class="form-control text-center"
                                       formControlName="nameExecutive"
                                       placeholder="Name of Executive Head"
                                       type="text"/></td>
                        </tr>
                        <tr>
                            <th>Address of Executive Head</th>
                            <td><input class="form-control text-center"
                                       formControlName="addressExecutive"
                                       placeholder="Address of Executive Head"
                                       type="text"/></td>
                        </tr>
                        <tr>
                            <th>Date fo Appointment</th>
                            <td><input class="form-control text-center"
                                       formControlName="dateOfApp"
                                       placeholder="Date fo Appointment"
                                       type="text"/></td>
                        </tr>
                        <tr>
                            <th>Consortium Member Banks</th>
                            <td><input class="form-control text-center"
                                       formControlName="consortiumMember"
                                       placeholder="Consortium Member Banks"
                                       type="text"/></td>
                        </tr>
                        <tr>
                            <th>Name of Lender (Other than BFIs)</th>
                            <td><input class="form-control text-center"
                                       formControlName="nameOfLeader"
                                       placeholder="Name of Lender (Other than BFIs)"
                                       type="text"/></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <nb-card-footer *ngIf="fromProfile">
                <button (click)="submitForm()" class="btn float-right" nbButton type="submit">Save</button>
            </nb-card-footer>
        </form>
    </nb-card-body>
</nb-card>
