<nb-card>
    <nb-card-header class="sb-bg-dark">
        <h4 class="col-md-12"> {{client === clientName?.SHINE_RESUNGA ? 'Collateral Inspection Report' : 'Fixed Assets Collateral'}}</h4>
    </nb-card-header>
    <nb-card-body>
        <div class="row">
            <div class="col-md-12">
                <form [formGroup]="fixedAssetsForm">
                    <div class="row mt-3">
                        <div class="col-md-4 form-group">
                            <label class="title" for="date">Date</label>
                            <input nbInput fullWidth [ngClass]="{'is-invalid': submitted && form.date.errors}"
                                   class="form-control" formControlName="date" id="date"
                                   type="date">
                            <div *ngIf="form.date.invalid && submitted" class="invalid-feedback">
                                Date is required
                            </div>
                        </div>
                        <div class="col-md-4 form-group">
                            <label class="title" for="personContacted">Person Contacted</label>
                            <input class="form-control" formControlName="personContacted" id="personContacted"
                                   [ngClass]="{ 'is-invalid': submitted && form.personContacted.errors }"
                                   name="personContacted" placeholder="person contacted"
                                   type="text">
                            <div *ngIf="form.personContacted.invalid"
                                 class="invalid-feedback">
                        <span *ngIf="form.personContacted.errors.pattern">
                            Invalid Person Name</span>
                            </div>
                        </div>
                        <div class="col-md-4 form-group">
                            <label class="title" for="phoneNoOfContact">Phone No. Of Contact</label>
                            <input class="form-control" formControlName="phoneNoOfContact" id="phoneNoOfContact"
                                   [ngClass]="{ 'is-invalid': submitted && form?.phoneNoOfContact?.errors }"
                                   name="phoneNoOfContact" placeholder="phone no. of contact" type="text">
                            <div *ngIf="submitted && form?.phoneNoOfContact?.invalid"
                                 class="invalid-feedback">
                        <span *ngIf="form?.phoneNoOfContact.errors.pattern">
                            Invalid Mobile Number
                        </span>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <app-common-address #fixedAssetsAddress [address]="formDataForEdit?.fixedAssetsForm?.address"></app-common-address>
                        </div>
                        <div class="col-md-4 form-group">
                            <label class="title" for="typeOfProperty">Type of Property</label>
                            <select class="custom-select" formControlName="typeOfProperty" id="typeOfProperty"
                                    name="typeOfProperty">
                                <option [ngValue]="''" hidden>Type of Property</option>
                                <option value="Agricultural">Agricultural</option>
                                <option value="Industrial">Industrial</option>
                                <option value="Commercial">Commercial</option>
                                <option value="Residential">Residential</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>
                        <div class="col-md-4 form-group">
                            <label class="title" for="shapeOfLand">Shape of Land</label>
                            <select class="custom-select" formControlName="shapeOfLand" id="shapeOfLand"
                                    name="shapeOfLand">
                                <option [ngValue]="''" hidden>Select shape of land</option>
                                <option value="Rectangular">Rectangular</option>
                                <option value="Triangular">Triangular</option>
                                <option value="Irregular">Irregular</option>
                                <option value="Vertical Slope">Vertical Slope</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>
                        <div class="col-md-4 form-group">
                            <label class="title">Does the location & shape of land appear consistent with Blue Print?</label>
                            <nb-radio-group formControlName="locationAndShapeOfLand" class="ml-1 d-inline-flex text-center">
                                <nb-radio value="Yes">Yes</nb-radio>
                                <nb-radio value="No">No</nb-radio>
                            </nb-radio-group>
                        </div>
                        <h5 class="col-md-12 mt-3">Facilities</h5>
                        <div class="row col-md-12 pr-0" formGroupName="facilities">
                            <div class="col-md-3 form-group">
                                <label class="title" for="roadApproach">Road Approach</label>
                                <select class="custom-select" formControlName="roadApproach" id="roadApproach"
                                        name="roadApproach">
                                    <option [ngValue]="''" hidden>Select Road Approach</option>
                                    <option value="Black Topped Road">Black Topped Road</option>
                                    <option value="Gravelled Road">Gravelled Road</option>
                                    <option value="Earthen Road">Earthen Road</option>
                                    <option value="Others">Others</option>
                                </select>
                            </div>
                            <div class="col-md-3 form-group">
                                <label class="title" for="roadWidth">Road Width <em class="sb-small"><strong>(in feet)</strong></em></label>
                                <input class="form-control" formControlName="roadWidth" id="roadWidth" name="roadWidth"
                                       placeholder="road width" type="number" appDecimalNumber/>
                            </div>
                            <div class="col-md-3 form-group">
                                <label class="title" for="prominentPlace">Prominent Place</label>
                                <input class="form-control" formControlName="prominentPlace" id="prominentPlace"
                                       name="prominentPlace" placeholder="prominent place" type="text">
                            </div>
                            <div class="col-md-3 form-group">
                                <div *ngIf="client === clientName?.SHINE_RESUNGA; else otherBank">
                                    <label class="title" for="approachDistance">Approach Distance<em class="sb-small"><strong>(in meter)</strong></em></label>
                                </div>
                                <ng-template #otherBank>
                                    <label class="title" for="approachDistance">Approach Distance<em class="sb-small"><strong>(in feet)</strong></em></label>
                                </ng-template>
                                <input class="form-control" formControlName="approachDistance" id="approachDistance"
                                       name="approachDistance" placeholder="approach distance" type="number" appDecimalNumber/>
                            </div>
                            <div class="col-md-3 form-group">
                                <label class="title" for="roadAccessFrom">Road Access From</label>
                                <select class="custom-select" formControlName="roadAccessFrom" id="roadAccessFrom"
                                        name="roadAccessFrom">
                                    <option [ngValue]="''" hidden>Select Road Access From</option>
                                    <option value="One Side">One Side</option>
                                    <option value="Two Sides">Two Sides</option>
                                    <option value="Both Sides">Both Sides</option>
                                </select>
                            </div>
                        </div>
                        <h5 class="col-md-12 mt-3">Other Facilities</h5>
                        <div class="row col-md-12" formGroupName="otherFacilities">
                            <div class="col-md-4 form-group">
                                <table class="table table-bordered table-sm sb-small text-center">
                                    <tr class="text-white sb-bg-dark">
                                        <th>SN</th>
                                        <th>Particulars</th>
                                        <th>Check for Yes</th>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>Water Supply</td>
                                        <td><input formControlName="waterSupply" type="checkbox"></td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>Electricity</td>
                                        <td><input formControlName="electricity" type="checkbox"></td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>Boundary Wall Construction</td>
                                        <td><input formControlName="boundaryWallConstruction" type="checkbox"></td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>Boundary Fencing</td>
                                        <td><input formControlName="boundaryFencing" type="checkbox"></td>
                                    </tr>
                                    <tr>
                                        <td>5</td>
                                        <td>Drainage</td>
                                        <td><input formControlName="drainage" type="checkbox"></td>
                                    </tr>
                                    <tr>
                                        <td>6</td>
                                        <td>Open</td>
                                        <td><input formControlName="open" type="checkbox"></td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>Telephone Line</td>
                                        <td><input formControlName="telephoneLine" type="checkbox"></td>
                                    </tr>
                                </table>

                                <label class="title" for="remarksForOtherFacility">Remarks For 'No' Option</label>
                                <textarea class="form-control" formControlName="remarksForOtherFacility"
                                          id="remarksForOtherFacility" name="remarksForOtherFacility"
                                          placeholder="remarks"
                                          row="3" type="text"></textarea>
                            </div>

                            <div class="col-md-4">
                                <div class="col-md-12 form-group">
                                    <label class="title" for="building">Building</label>
                                    <select class="custom-select" formControlName="building" id="building"
                                            name="building">
                                        <option [ngValue]="''" hidden>Select Building</option>
                                        <option value="YES">Yes</option>
                                        <option value="NO">No</option>
                                    </select>
                                </div>
                                <div *ngIf="fixedAssetsForm?.get('otherFacilities')?.get('building')?.value == 'YES'"
                                     class="col-md-12 form-group">
                                    <label class="title" for="buildingArea">Building Area</label>
                                    <input class="form-control" formControlName="buildingArea" id="buildingArea"
                                           name="buildingArea" placeholder="building area">
                                </div>
                                <div *ngIf="fixedAssetsForm?.get('otherFacilities')?.get('building')?.value == 'YES'"
                                     class="col-md-12 form-group">
                                    <label class="title" for="constructionYear">Construction Year</label>
                                    <input nbInput fullWidth [ngClass]="{'is-invalid': submitted && form.constructionYear?.errors}"
                                           class="form-control" formControlName="constructionYear" id="constructionYear"
                                           type="date">
                                    <div *ngIf="submitted && form.constructionYear?.invalid" class="invalid-feedback">
                                        Construction Year is required
                                    </div>
                                </div>
                                <div *ngIf="fixedAssetsForm.get('otherFacilities')?.get('building')?.value == 'YES'"
                                     class="col-md-12 form-group">
                                    <label class="title" for="buildingType">Building Type</label>
                                    <select class="custom-select" formControlName="buildingType" id="buildingType"
                                            name="buildingType">
                                        <option [ngValue]="''" hidden>Select Building type</option>
                                        <option value="Residential">Residential</option>
                                        <option value="Commercial Complex/Mall">Commercial Complex/Mall</option>
                                        <option value="Factory Shed">Factory Shed</option>
                                        <option value="Warehouse">Warehouse</option>
                                        <option value="Others">Others</option>
                                    </select>
                                </div>
                                <div *ngIf="fixedAssetsForm?.get('otherFacilities')?.get('building')?.value == 'YES'"
                                     class="col-md-12 form-group">
                                    <label class="title" for="builtUpArea">Built Up Area</label>
                                    <input class="form-control" formControlName="builtUpArea" id="builtUpArea"
                                           name="builtUpArea" placeholder="Built Up Area">
                                </div>
                                <div *ngIf="fixedAssetsForm?.get('otherFacilities')?.get('building')?.value == 'YES'"
                                     class="col-md-12 form-group">
                                    <label class="title" for="noOfStorey">Number of Storey</label>
                                    <input class="form-control" formControlName="noOfStorey" id="noOfStorey"
                                           name="noOfStorey" placeholder="No. of Storey ">
                                </div>
                            </div>

                            <table *ngIf="fixedAssetsForm?.get('otherFacilities')?.get('building')?.value == 'YES'"
                                   class="table table-bordered col-md-4 table-sm sb-small text-center">
                                <tr class="text-white sb-bg-dark">
                                    <th>SN</th>
                                    <th>Particulars</th>
                                    <th>Check for Yes</th>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>Load Bearing Wall</td>
                                    <td><input formControlName="loadBearingWall" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Mortar Cement</td>
                                    <td><input formControlName="mortarCement" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Other Roofing</td>
                                    <td><input formControlName="otherRoofing" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Inside Furniture</td>
                                    <td><input formControlName="insideFurniture" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                    <td>Frame Structure</td>
                                    <td><input formControlName="frameStructure" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>6</td>
                                    <td>RCC Roofing</td>
                                    <td><input formControlName="rccRoofing" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>7</td>
                                    <td>Bathroom And Toilet</td>
                                    <td><input formControlName="bathroomAndToilet" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>8</td>
                                    <td>Naksa Pass Obtained</td>
                                    <td><input formControlName="naksaPassObtained" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>9</td>
                                    <td>Building Completion Certificate Obtained</td>
                                    <td><input formControlName="buildingCompCertificate" type="checkbox"></td>
                                </tr>
                                <tr>
                                    <td>10</td>
                                    <td>Construction appears to be as per the Approved Naksa Pass</td>
                                    <td><input formControlName="constructionAsPerNaksa" type="checkbox"></td>
                                </tr>
                            </table>

                            <div class="row">
                                <div class="col-md-4 form-group">
                                    <label class="title" for="roadSetbacks">Any road setbacks?</label>
                                    <select class="custom-select" formControlName="roadSetbacks" id="roadSetbacks"
                                            name="roadSetbacks">
                                        <option [ngValue]="''" hidden>Select Yes/No</option>
                                        <option value="YES">Yes</option>
                                        <option value="NO">No</option>
                                    </select>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="title" for="riverOrCanalSetbacks">Any river/canal setbacks?</label>
                                    <select class="custom-select" formControlName="riverOrCanalSetbacks" id="riverOrCanalSetbacks"
                                            name="riverOrCanalSetbacks">
                                        <option [ngValue]="''" hidden>Select Yes/No</option>
                                        <option value="YES">Yes</option>
                                        <option value="NO">No</option>
                                    </select>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="title" for="highTensionSetbacks">Any High-tension setbacks?</label>
                                    <select class="custom-select" formControlName="highTensionSetbacks" id="highTensionSetbacks"
                                            name="highTensionSetbacks">
                                        <option [ngValue]="''" hidden>Select Yes/No</option>
                                        <option value="YES">Yes</option>
                                        <option value="NO">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <h5 class="col-md-12 mt-3">Vicinity to the Basic Amenities</h5>
                        <div class="row col-md-12 mt-3" formGroupName="vicinityToTheBasicAmenities">
                            <div class="col-md-6">
                                <table class="table table-bordered table-sm sb-small text-center">
                                    <tr class="text-white sb-bg-dark">
                                        <th>SN</th>
                                        <th>Particulars</th>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>Major Market Places</td>
                                        <td>
                                            <select formControlName="majorMarketPlaces" class="custom-select">
                                                <option [ngValue]="''" hidden>Select Distance</option>
                                                <option *ngFor="let distance of majorMarketPlaceDistance" [ngValue]="distance">{{distance}}</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>School/Colleges</td>
                                        <td>
                                            <select formControlName="schoolOrCollege" class="custom-select">
                                                <option [ngValue]="''" hidden>Select Distance</option>
                                                <option *ngFor="let distance of majorMarketPlaceDistance" [ngValue]="distance">{{distance}}</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>Hospital/Nursing Home</td>
                                        <td>
                                            <select formControlName="hospitalOrNursingHome" class="custom-select">
                                                <option [ngValue]="''" hidden>Select Distance</option>
                                                <option *ngFor="let distance of majorMarketPlaceDistance" [ngValue]="distance">{{distance}}</option>
                                            </select>
                                        </td>
                                    </tr>
                                </table>
                            </div>

                            <div class="col-md-12">
                                <div *ngFor="let staff of staffsForm; let i = index;"
                                     formArrayName="staffs">
                                    <div [formGroupName]="i" class="row">
                                        <div class="col-md-4 form-group">
                                            <label class="staffRepresentativeNameDesignation"
                                                   for="staffRepresentativeNameDesignationFac">Staff Representative Designation 1</label>
                                            <select class="form-control"
                                                    formControlName="staffRepresentativeNameDesignation"
                                                    id="staffRepresentativeNameDesignationFac"
                                                    name="staffRepresentativeNameDesignation">
                                                <option [ngValue]="null" hidden>Staff Representative Designation 1</option>
                                                <option *ngFor="let designation of designationList"
                                                        [ngValue]="designation?.roleName">{{designation?.roleName}}</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="staffRepresentativeName" for="staffRepresentativeNameFac">Staff Representative Name 1</label>
                                            <input class="form-control" formControlName="staffRepresentativeName"
                                                   id="staffRepresentativeNameFac" name="staffRepresentativeName"
                                                   placeholder="Staff Representative Name 1" type="text">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="staffRepresentativeNameDesignation2"
                                                   for="staffRepresentativeNameDesignationFac2">Staff Representative Designation 2</label>
                                            <select class="form-control"
                                                    formControlName="staffRepresentativeNameDesignation2"
                                                    id="staffRepresentativeNameDesignationFac2"
                                                    name="staffRepresentativeNameDesignation2">
                                                <option [ngValue]="null">Staff Representative Designation 2</option>
                                                <option *ngFor="let designation of designationList"
                                                        [ngValue]="designation?.roleName">{{designation?.roleName}}</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="staffRepresentativeName2"
                                                   for="staffRepresentativeNameFac2">Staff Representative Name 2</label>
                                            <input class="form-control" formControlName="staffRepresentativeName2"
                                                   id="staffRepresentativeNameFac2"
                                                   name="staffRepresentativeName2"
                                                   placeholder="Staff Representative Name 2" type="text">
                                        </div>
                                        <div *ngIf="staffLength() > 1" class="col-md-1 pt-4">
                                            <input (click)="deleteStaff(i)"
                                                   class="align-self-end btn btn-sm btn-danger btn-primary"
                                                   type="button" value="Delete"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <button (click)="addStaffs()"
                                            class="btn btn-sm btn-flat btn-primary">Add Staff
                                    </button>
                                </div>
                                <div class="form-group">
                                    <label class="title" for="commentAboutFAC">Comments About FAC</label>
                                    <textarea class="form-control" formControlName="commentAboutFAC"
                                              id="commentAboutFAC" name="commentsAboutFAC"
                                              placeholder="comments" row="3" type="text"></textarea>
                                </div>
                                <div>
                                    <label class="ml-2"><strong>Location Detail</strong></label>
                                </div>
                                <div class="row col-md-12">
                                    <div class="col-md-4">
                                        <label for="fixedAssetsLongitude">Longitude</label>
                                        <input type="number" class="form-control" id="fixedAssetsLongitude"
                                               formControlName="fixedAssetsLongitude" name="fixedAssetsLongitude"
                                               placeholder="Longitude">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="fixedAssetsLatitude">Latitude</label>
                                        <input type="number" class="form-control" id="fixedAssetsLatitude"
                                               formControlName="fixedAssetsLatitude" name="fixedAssetsLatitude"
                                               placeholder="Latitude">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </nb-card-body>

    <nb-card-footer class="text-right">
        <button nbButton (click)="onSubmit()" status="primary">
            <em class="fa fa-save"></em>
        </button>
    </nb-card-footer>

    {{fixedData | json}}
</nb-card>


