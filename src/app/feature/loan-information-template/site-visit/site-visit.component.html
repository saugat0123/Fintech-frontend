<nb-card>
    <nb-card-body>
        <form [formGroup]="siteVisitFormGroup" class="form-horizontal">
            <div class="row justify-content-around">
                <div class="col-md-3">
                    <nb-checkbox [checked]="currentResidentForm"
                                 (change)="checkboxSelected('currentResident',$event.target.checked)">
                        Current Resident
                    </nb-checkbox>
                </div>
                <div class="col-md-3">
                    <nb-checkbox [checked]="businessSiteVisitForm"
                                 (change)="checkboxSelected('businessSiteVisit',$event.target.checked)">
                        Business Site Visit
                    </nb-checkbox>
                </div>
                <div class="col-md-3">
                    <nb-checkbox [checked]="fixedAssetCollateralForm"
                                 (change)="checkboxSelected('fixedAssetCollateral',$event.target.checked)">
                        Fixed Asset Collateral
                    </nb-checkbox>
                </div>
                <div class="col-md-3">
                    <nb-checkbox [checked]="currentAssetsInspectionForm"
                                 (change)="checkboxSelected('currentAssetsInspection',$event.target.checked)">
                        Current Assets Inspection
                    </nb-checkbox>
                </div>
            </div>
            <div [hidden]="!currentResidentForm" class="row mt-3" formGroupName="currentResidentDetails">
                <h4 class="col-md-12">Current Resident</h4>
                <div class="col-md-4 form-group">
                    <label class="title" for="houseNumber">House Number</label>
                    <input class="form-control" formControlName="houseNumber" id="houseNumber"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('houseNumber')?.errors }"
                           name="houseNumber"
                           placeholder="house number" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('houseNumber')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('houseNumber')?.errors.required">House number is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="streetName">Street Name</label>
                    <input class="form-control" formControlName="streetName" id="streetName" name="streetName"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('streetName')?.errors }"
                           placeholder="street name" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('streetName')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('streetName')?.errors.required">Street Name is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="address">Address</label>
                    <input class="form-control" formControlName="address" id="address" name="address"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails').get('address')?.errors }"
                           placeholder="address" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails').get('address')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails').get('address')?.errors.required">address is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="nearBy">Near By</label>
                    <input class="form-control" formControlName="nearBy" id="nearBy" name="nearBy"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('nearBy')?.errors }"
                           placeholder="near by" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('nearBy')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('nearBy')?.errors.required">Value is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="ownerName" for="address">Owner Name</label>
                    <input class="form-control" formControlName="ownerName" id="ownerName" name="ownerName"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('ownerName')?.errors }"
                           placeholder="owner name" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('ownerName')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('ownerName')?.errors.required">owner Name is required</span>
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('ownerName')?.errors.pattern">Invalid Owner Name</span>
                    </div>
                </div>
                <div class=" input-group mb-3">
                    <input class="form-control pr-0" formControlName="locationPreview" id="locationPreview1"
                           name="locationPreview"
                           type="text">
                    <div class=" input-group-append">
                        <button (click)="findLocation1()" class="btn btn-light">Find Location</button>
                    </div>
                </div>
                <agm-map (mapClick)="placeMaker1($event.coords.lat,$event.coords.lng)"
                         [clickableIcons]='false'
                         [fullscreenControl]='true'
                         [latitude]="latitude"
                         [longitude]="longitude"
                         [mapTypeControl]='true'
                         [zoom]="zoom"
                         style="height: 200px; width: 100%;">
                    <agm-marker [latitude]="markerLatitude" [longitude]="markerLongitude">
                        <agm-info-window [isOpen]="infoWindowOpen.value">
                            {{addressLabel.value}}
                        </agm-info-window>
                    </agm-marker>
                </agm-map>
            </div>
            <div [hidden]="!businessSiteVisitForm" class="row mt-3"
                 formGroupName="businessSiteVisitDetails">
                <h4 class="col-md-12">Business Site Visit</h4>
                <div class="col-md-4 form-group">
                    <label class="title" for="officeAddress">Office Address</label>
                    <input class="form-control" formControlName="officeAddress" id="officeAddress"
                           [ngClass]="{ 'is-invalid': (business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('officeAddress')?.errors }"
                           name="officeAddress" placeholder="office address"
                           type="text">
                    <div *ngIf="(business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('officeAddress')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('officeAddress')?.errors.required">office address is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="nameOfThePersonContacted">Name Of The Person Contacted</label>
                    <input class="form-control" formControlName="nameOfThePersonContacted"
                           [ngClass]="{ 'is-invalid': (business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('nameOfThePersonContacted')?.errors }"
                           id="nameOfThePersonContacted"
                           name="nameOfThePersonContacted" placeholder="name of the person contacted"
                           type="text">
                    <div *ngIf="(business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('nameOfThePersonContacted')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('nameOfThePersonContacted')?.errors.required">Name is required</span>
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('nameOfThePersonContacted')?.errors.pattern">Invalid person name</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="dateOfVisit">Date Of Visit</label>
                    <input [nbDatepicker]="datepicker3" class="form-control" formControlName="dateOfVisit"
                           [ngClass]="{ 'is-invalid': (business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('dateOfVisit')?.errors }"
                           id="dateOfVisit" placeholder="date of visit">
                    <nb-datepicker #datepicker3></nb-datepicker>
                    <div *ngIf="(business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('dateOfVisit')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('dateOfVisit')?.errors.required">Date is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="objectiveOfVisit">Objective Of Visit</label>
                    <input class="form-control" formControlName="objectiveOfVisit" id="objectiveOfVisit"
                           [ngClass]="{ 'is-invalid': (business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('objectiveOfVisit')?.errors }"
                           name="objectiveOfVisit" placeholder="objective of visit" type="text">
                    <div *ngIf="(business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('objectiveOfVisit')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('objectiveOfVisit')?.errors.required">objective is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="visitedBy">Visited By</label>
                    <input class="form-control" formControlName="visitedBy" id="visitedBy" name="visitedBy"
                           [ngClass]="{ 'is-invalid': (business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('visitedBy')?.errors }"
                           placeholder="visited by" type="text">
                    <div *ngIf="(business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('visitedBy')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('visitedBy')?.errors.required">value is required</span>
                    </div>
                </div>
                <!-- <div class="form-group col-md-4">
                     <label class="title" for="mapAddress">Map Address</label>
                     <input class="form-control col-md-12" formControlName="mapAddress" id="mapAddress"
                            [ngClass]="{ 'is-invalid': (business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('mapAddress')?.errors }"
                            name="mapAddress" placeholder="address"
                            type="text">
                     <div *ngIf="(business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('mapAddress')?.invalid"
                          class="invalid-feedback">
                         <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('mapAddress')?.errors.required">address is required</span>
                     </div>
                 </div>-->
                <div class="col-md-8 form-group">
                    <label class="title" for="findingsAndComments">Finding And Comments</label>
                    <textarea class="form-control" formControlName="findingsAndComments"
                              [ngClass]="{ 'is-invalid': (business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('findingsAndComments')?.errors }"
                              id="findingsAndComments" name="findingsAndComments"
                              placeholder="findings and comments"
                              row="3"></textarea>
                    <div *ngIf="(business) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('findingsAndComments')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('findingsAndComments')?.errors.required">comments required</span>
                    </div>
                </div>
                <div class="input-group mb-3">
                    <input class="form-control pr-0" formControlName="locationPreview" id="locationPreview"
                           name="locationPreview"
                           type="text">
                    <div class="input-group-append">
                        <button (click)="findLocation()" class="btn btn-light">Find Location</button>
                    </div>
                </div>
                <agm-map (mapClick)="placeMaker($event.coords.lat,$event.coords.lng)"
                         [clickableIcons]='false'
                         [fullscreenControl]='true'
                         [latitude]="latitude"
                         [longitude]="longitude"
                         [mapTypeControl]='true'
                         [zoom]="zoom"
                         style="height: 200px; width: 100%;">
                    <agm-marker [latitude]="markerLatitude" [longitude]="markerLongitude">
                        <agm-info-window [isOpen]="infoWindowOpen.value">
                            {{addressLabel.value}}
                        </agm-info-window>
                    </agm-marker>
                </agm-map>
            </div>
            <div [hidden]="!fixedAssetCollateralForm" class="row mt-3"
                 formGroupName="fixedAssetCollateralDetails">
                <h4 class="col-md-12">Fixed Assets Collateral</h4>
                <div class="col-md-3 form-group">
                    <label class="title" for="date">Date</label>
                    <input [max]="date" [nbDatepicker]="datepicker4" class="form-control"
                           [ngClass]="{ 'is-invalid': (fixed) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('date')?.errors }"
                           formControlName="date" id="date" placeholder="date">
                    <nb-datepicker [max]="date" #datepicker4></nb-datepicker>
                    <div *ngIf="(fixed) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('date')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('date')?.errors.required">date is required</span>
                    </div>
                </div>
                <div class="col-md-3 form-group">
                    <label class="title" for="fixedAssetCollateralAddress">Address</label>
                    <input class="form-control" formControlName="address" id="fixedAssetCollateralAddress"
                           name="fixedAssetCollateralAddress" placeholder="address" type="text">
                </div>
                <div class="col-md-3 form-group">
                    <label class="title" for="personContacted">Person Contacted</label>
                    <input class="form-control" formControlName="personContacted" id="personContacted"
                           [ngClass]="{ 'is-invalid': (fixed) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('personContacted')?.errors }"
                           name="personContacted" placeholder="person contacted"
                           type="text">
                    <div *ngIf="(fixed) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('personContacted')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('personContacted')?.errors.pattern">
                            Invalid Person Name</span>
                    </div>
                </div>
                <div class="col-md-3 form-group">
                    <label class="title" for="phoneNoOfContact">Phone No. Of Contact</label>
                    <input class="form-control" formControlName="phoneNoOfContact" id="phoneNoOfContact"
                           [ngClass]="{ 'is-invalid': (fixed) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('phoneNoOfContact')?.errors }"
                           name="phoneNoOfContact" placeholder="phone no. of contact" type="text">
                    <div *ngIf="(fixed) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('phoneNoOfContact')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('phoneNoOfContact')?.errors.pattern">
                            Invalid Mobile Number
                        </span>
                    </div>
                </div>
                <h5 class="col-md-12 mt-3">Facilities</h5>
                <div class="row col-md-12 pr-0" formGroupName="facilities">
                    <div class="col-md-3 form-group">
                        <label class="title" for="roadApproach">Road Approach</label>
                        <select class="custom-select" formControlName="roadApproach" id="roadApproach"
                                name="roadApproach">
                            <option [ngValue]="''" hidden>Select Road Approach</option>
                            <option value="BLACK_TOPPED_ROAD">Black Topped Road</option>
                            <option value="GRAVELLED_ROAD">Gravelled Road</option>
                            <option value="EARTHEN_ROAD">Earthen Road</option>
                            <option value="OTHERS">Others</option>
                        </select>
                    </div>
                    <div class="col-md-3 form-group">
                        <label class="title" for="roadWidth">Road Width</label>
                        <input class="form-control" formControlName="roadWidth" id="roadWidth" name="roadWidth"
                              placeholder="road width" type="text">
                    </div>
                    <div class="col-md-3 form-group">
                        <label class="title" for="prominentPlace">Prominent Place</label>
                        <input class="form-control" formControlName="prominentPlace" id="prominentPlace"
                                name="prominentPlace" placeholder="prominent place" type="text">
                    </div>
                    <div class="col-md-3 form-group">
                        <label class="title" for="approachDistance">Approach Distance</label>
                        <input class="form-control" formControlName="approachDistance" id="approachDistance"
                               name="approachDistance" placeholder="approach distance" type="text">
                    </div>
                </div>
                <h5 class="col-md-12 mt-3">Other Facilities</h5>
                <div class="row col-md-12" formGroupName="otherFacilities">
                    <div class="col-md-4 form-group">
                        <table class="table table-sm sb-small text-center">
                            <tr class="text-white sb-bg-dark">
                                <th>SN</th>
                                <th>Particulars</th>
                                <th>Yes or No</th>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>Water Supply</td>
                                <td><input formControlName="waterSupply" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Electricity</td>
                                <td><input formControlName="electricity" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Boundary Wall Construction</td>
                                <td><input formControlName="boundaryWallConstruction" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Boundary Fencing</td>
                                <td><input formControlName="boundaryFencing" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Drainage</td>
                                <td><input formControlName="drainage" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>Open</td>
                                <td><input formControlName="open" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>Telephone Line</td>
                                <td><input formControlName="telephoneLine" type="checkbox"></td>
                            </tr>
                        </table>

                        <label class="title" for="remarksForOtherFacility">Remarks For 'No' Option</label>
                        <textarea class="form-control" formControlName="remarksForOtherFacility"
                                  id="remarksForOtherFacility" name="remarksForOtherFacility"
                                  placeholder="remarks"
                                  row="3" type="text"></textarea>
                    </div>
                    <div class="col-md-4">
                        <div class="col-md-12 form-group">
                            <label class="title" for="building">Building</label>
                            <select class="custom-select" formControlName="building" id="building"
                                    name="building">
                                <option [ngValue]="''" hidden>Select Building</option>
                                <option value="YES">Yes</option>
                                <option value="NO">No</option>
                            </select>
                        </div>
                        <div *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('building')?.value == 'YES'"
                             class="col-md-12 form-group">
                            <label class="title" for="buildingArea">Building Area</label>
                            <input class="form-control" formControlName="buildingArea" id="buildingArea"
                                   name="buildingArea" placeholder="building area">
                        </div>
                        <div *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('building')?.value == 'YES'"
                             class="col-md-12 form-group">
                            <label class="title" for="constructionYear">Construction Year</label>
                            <input [nbDatepicker]="datepicker5" class="form-control"
                                   formControlName="constructionYear" id="constructionYear"
                                   name="constructionYear" placeholder="construction year">
                            <nb-datepicker #datepicker5></nb-datepicker>
                        </div>
                    </div>
                    <table *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('building')?.value == 'YES'"
                           class="table col-md-4 table-sm sb-small text-center">
                        <tr class="text-white sb-bg-dark">
                            <th>SN</th>
                            <th>Particulars</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>Load Bearing Wall</td>
                            <td><input formControlName="loadBearingWall" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Mortar Cement</td>
                            <td><input formControlName="mortarCement" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Other Roofing</td>
                            <td><input formControlName="otherRoofing" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Inside Furniture</td>
                            <td><input formControlName="insideFurniture" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>Frame Structure</td>
                            <td><input formControlName="frameStructure" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>RCC Roofing</td>
                            <td><input formControlName="rccRoofing" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>Bathroom And Toilet</td>
                            <td><input formControlName="bathroomAndToilet" type="checkbox"></td>
                        </tr>
                    </table>
                </div>
                <h5 class="col-md-12 mt-3">Vicinity to the Basic Amenities</h5>
                <div class="row col-md-12 mt-3" formGroupName="vicinityToTheBasicAmenities">
                    <div class="col-md-6">
                        <table class="table table-sm sb-small text-center">
                            <tr class="text-white sb-bg-dark">
                                <th>SN</th>
                                <th>Particulars</th>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>Major Market Places</td>
                                <td>
                                    <select formControlName="majorMarketPlaces" class="custom-select">
                                        <option [ngValue]="null" hidden>Select Distance</option>
                                        <option *ngFor="let distance of majorMarketPlaceDistance" [ngValue]="distance">{{distance}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>School/Colleges</td>
                                <td>
                                    <select formControlName="schoolOrCollege" class="custom-select">
                                        <option [ngValue]="''" hidden>Select Distance</option>
                                        <option *ngFor="let distance of majorMarketPlaceDistance" [ngValue]="distance">{{distance}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Hospital/Nursing Home</td>
                                <td>
                                    <select formControlName="hospitalOrNursingHome" class="custom-select">
                                        <option [ngValue]="''" hidden>Select Distance</option>
                                        <option *ngFor="let distance of majorMarketPlaceDistance" [ngValue]="distance">{{distance}}</option>
                                    </select>

                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <div *ngFor="let staff of staffsForm; let i = index;"
                             formArrayName="staffs">
                            <div [formGroupName]="i" class="row">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="inspectingStaff">Inspecting Staff</label>
                                    <input class="form-control" formControlName="name"
                                           id="inspectingStaff" name="inspectingStaff"
                                           placeholder="full name of staff">
                                </div>
                                <div class="col-md-5 form-group">
                                    <label class="title" for="position">Position</label>
                                    <input class="form-control" formControlName="position" id="position"
                                           name="position" placeholder="position">
                                </div>
                                <div *ngIf="staffLength()>1" class="col-md-1 pt-4">
                                    <input (click)="deleteStaff(i)"
                                           class="align-self-end btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <button (click)="addStaffs()"
                                    class="btn btn-sm btn-flat btn-primary">Add Staff
                            </button>
                        </div>
                        <div class="form-group">
                            <label class="title" for="commentAboutFAC">Comments About FAC</label>
                            <textarea class="form-control" formControlName="commentAboutFAC"
                                      id="commentAboutFAC" name="commentsAboutFAC"
                                      placeholder="comments" row="3" type="text"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div [hidden]="!currentAssetsInspectionForm" class="row mt-3"
                 formGroupName="currentAssetsInspectionDetails">
                <h4 class="col-md-12">Current Assets Inspection - Stock</h4>
                <div class="col-md-4 form-group">
                    <label class="title" for="dateOfInspection">Date Of Inspection</label>
                    <input [nbDatepicker]="datepicker1" class="form-control"
                           [ngClass]="{ 'is-invalid': (current) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('dateOfInspection')?.errors }"
                           formControlName="dateOfInspection"
                           id="dateOfInspection" placeholder="date of inspection">
                    <nb-datepicker #datepicker1 ></nb-datepicker>
                    <div *ngIf="(current) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('dateOfInspection')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('dateOfInspection')?.errors.required">Date is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="particularsOfGoodInspected">Particulars Of Good
                        Inspected</label>
                    <input class="form-control" formControlName="particularsOfGoodInspected"
                           id="particularsOfGoodInspected" name="particularsOfGoodInspected"
                           placeholder="particulars of good inspected">
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="stockValueReported">Stock Value Reported</label>
                    <input class="form-control" formControlName="stockValueReported"
                           id="stockValueReported" name="stockValueReported"
                           placeholder="0.0" type="number">
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="rents">Is the Premise self owned or rented?</label>
                    <select class="custom-select" formControlName="rents"
                            id="rents" name="rents">
                        <option [ngValue]="''" hidden>Select Rent</option>
                        <option value="Self owned">Self owned</option>
                        <option value="Rented/Leased">Rented/Leased</option>
                    </select>
                </div>
                <div class="col-md-4 form-group" *ngIf="siteVisitFormGroup.get(['currentAssetsInspectionDetails','rents']).value === 'Rented/Leased'">
                    <label class="title" for="rents">Is copy of rental/leased agreement obtained?</label>
                    <select class="custom-select" formControlName="rentLeased"
                            id="rentLeased" name="rentLeased">
                        <option [ngValue]="null" hidden>Is copy of rental/leased agreement obtained?</option>
                        <option *ngFor="let data of yesNo" [ngValue]="data">{{data}}</option>
                    </select>
                </div>
                <div class="col-md-4 form-group" *ngIf="siteVisitFormGroup.get(['currentAssetsInspectionDetails','rents']).value === 'Rented/Leased'">
                    <label class="title" for="isRentPmtUpToDate">IS Rent Pmt. Up to Date?</label>
                    <select class="custom-select" formControlName="isRentPmtUpToDate"
                            id="isRentPmtUpToDate" name="isRentPmtUpToDate">
                        <option [ngValue]="''" hidden>Is rent payment up to date?</option>
                        <option *ngFor="let data of yesNo" [ngValue]="data">{{data}}</option>
                    </select>
                </div>
                <div class="col-md-4 form-group" *ngIf="siteVisitFormGroup.get(['currentAssetsInspectionDetails','rents']).value === 'Rented/Leased'">
                    <label class="title" for="isRentReceiptShown">IS Rent Receipt Up to Date?</label>
                    <select class="custom-select" formControlName="isRentReceiptShown"
                            id="isRentReceiptShown" name="isRentReceiptShown">
                        <option [ngValue]="''" hidden>Is rent payment up to date?</option>
                        <option *ngFor="let data of yesNo" [ngValue]="data">{{data}}</option>
                    </select>
                </div>

                <h4 class="col-md-12 mt-3">Insurance Verification</h4>
                <div class="row col-md-12 mt-3" formGroupName="insuranceVerification">
                    <div class="row col-md-6">
                        <div class="col-md-6 form-group">
                            <label class="title" for="assetsMortgaged">Assets Mortgaged</label>
                            <input class="form-control" formControlName="assetsMortgaged" id="assetsMortgaged"
                                   name="assetsMortgaged" placeholder="assets mortgaged">
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="insuredAmount">Insured Amount</label>
                            <input class="form-control" formControlName="insuredAmount" id="insuredAmount"
                                   name="insuredAmount" placeholder="insured amount" type="number">
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="insuranceCompany">Insurance Company</label>
                            <input class="form-control" formControlName="insuranceCompany"
                                   id="insuranceCompany" name="insuranceCompany"
                                   placeholder="insurance company">
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="expiryDate">Expiry Date</label>
                            <input [nbDatepicker]="datepicker2" class="form-control" formControlName="expiryDate"
                                   id="expiryDate" placeholder="expiry date">
                            <nb-datepicker #datepicker2></nb-datepicker>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="clientsOverallRating">clients Overall Rating</label>
                            <select class="custom-select" formControlName="clientsOverallRating"
                                    id="clientsOverallRating"
                                    name="rents">
                                <option [ngValue]="''">Select Rating</option>
                                <option value="POOR">Poor</option>
                                <option value="GOOD">Good</option>
                                <option value="AVERAGE">Average</option>
                                <option value="EXCELLENT">Excellent</option>
                            </select>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="comments">Comments</label>
                            <input class="form-control" formControlName="comments" id="comments"
                                   name="comments" placeholder="comments">
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="stockValueConfirmed">Stock Value Confirmed</label>
                            <input class="form-control" formControlName="stockValueConfirmed"
                                   id="stockValueConfirmed" name="stockValueConfirmed"
                                   placeholder="0.0" type="number">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div *ngFor="let inspectingStaff of inspectingStaffsDetailsForm; let i = index;"
                             formArrayName="inspectingStaffsDetails">
                            <div [formGroupName]="i" class="row">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="inspectingStaff">Inspecting Staff</label>
                                    <input class="form-control" formControlName="name"
                                           id="inspectingStaff"
                                           name="inspectingStaff" placeholder="inspecting staff">
                                </div>
                                <div class="col-md-5 form-group">
                                    <label class="title" for="position">Position</label>
                                    <input class="form-control" formControlName="position" id="position"
                                           name="position" placeholder="position">
                                </div>
                                <div *ngIf="inspectingStaffsDetailsLength()>1" class="col-md-1 pt-4">
                                    <input (click)="deleteInspectingStaffsDetails(i)"
                                           class="align-self-end btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <button
                                (click)="addInspectingStaffsDetails()"
                                class="btn btn-sm btn-flat btn-primary"
                            >Add Staff
                            </button>
                        </div>
                    </div>
                </div>
                <h4 class="col-md-12 mt-3">Current Assets Inpsection - Stock Checklist Questionaire</h4>
                <div class="row col-md-12 mt-3" formGroupName="stockCheckListQuestionaire">
                    <table class="table table-sm sb-small text-center">
                        <tr class="text-white sb-bg-dark">
                            <th>SN</th>
                            <th>Particulars</th>
                            <th>Yes Or No</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>Is the customer upto date with other charges,chargeable to the other premises ?
                            </td>
                            <td><input
                                    formControlName="uptoDateWithCharges"
                                    type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>All goods belongs to the borrowers and non are hold on account of third parties
                            </td>
                            <td><input
                                    formControlName="borrowersPossession"
                                    type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Confirm that valuation of stocks does not include and goods under TR</td>
                            <td><input formControlName="notUnderTR"
                                       type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>There is no evidence of any other bank interested in the goods</td>
                            <td><input formControlName="otherBankNotInterested"
                                       type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>Was the security in order ?</td>
                            <td><input formControlName="securityOrder" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>Are the goods saleable ?</td>
                            <td><input formControlName="goodsSaleable" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>Are the stocks registered upto date ?</td>
                            <td><input formControlName="stocksUptoDate" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>Does the stocks registered match with the stock list ?</td>
                            <td><input formControlName="matchWithTheStockList"
                                       type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td> Is the storage condition satisfactory ?</td>
                            <td><input formControlName="storageConditionSatisfactory" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>Is fire fighting evidence through arrangement ?</td>
                            <td><input formControlName="fireFightingEvidence" type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>11</td>
                            <td>Are the building/store in the good condition?</td>
                            <td><input formControlName="buildingStoreCondition" type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>12</td>
                            <td>Are the special warranties in the insurance policy upto date ?</td>
                            <td><input formControlName="warrantiesUptoDate"
                                       type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>13</td>
                            <td>There is no evidence of goods hazardous nature in the premises</td>
                            <td><input formControlName="noHazardousNature"
                                       type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>14</td>
                            <td>Were our name board properly displayed ?</td>
                            <td><input formControlName="nameBoardProperlyDisplayed" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>15</td>
                            <td> Were our padlocks in use ?</td>
                            <td><input formControlName="padlocksUse" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>15</td>
                            <td> Is the PAN/Registration Certificate of the business is displayed? </td>
                            <td><input formControlName="certificate" type="checkbox"></td>
                        </tr>
                    </table>
                    <div class="col-md-6 form-group">
                        <label class="title" for="findingAndComments">Finding & Comments</label>
                        <textarea class="form-control" formControlName="findingAndComments"
                                  id="findingAndComments" name="findingAndComments"
                                  placeholder="findings and comments"
                                  row="3" type="text"></textarea>
                    </div>
                    <div class="col-md-6 form-group">
                        <label class="title" for="remarksForNoOption">Remarks for 'NO' Option</label>
                        <textarea class="form-control" formControlName="remarksForNoOption"
                                  id="remarksForNoOption" name="remarksForNoOption" placeholder="remarks"
                                  row="3" type="text"></textarea>
                    </div>
                </div>
                <h4 class="col-md-12 mt-3">Current Assets Inspection - Receivables & Payables</h4>
                <div class="row col-md-12 mt-3" formGroupName="receivablesAndPayables">
                    <div *ngFor="let party of partyForm; let i = index;"
                         formArrayName="parties">
                        <div [formGroupName]="i" class="row">
                            <div class="col-md-2 form-group ml-3">
                                <label class="title" for="party">Party</label>
                                <input class="form-control" formControlName="party" id="party"
                                       name="party" placeholder="party">
                            </div>
                            <div class="col-md-2 form-group">
                                <label class="title" for="withinThreeMonths">Within 3 Months</label>
                                <input (keyup)="onChangeValue('withinThreeMonths','threeMonthTotal')"
                                       class="form-control"
                                       formControlName="withinThreeMonths" id="withinThreeMonths"
                                       name="party"
                                       placeholder="0.0" type="number">
                            </div>
                            <div class="col-md-2 form-group">
                                <label class="title" for="sixMonth">6 Month</label>
                                <input (keyup)="onChangeValue('sixMonth', 'sixMonthTotal')" class="form-control"
                                       formControlName="sixMonth"
                                       id="sixMonth" name="sixMonth"
                                       placeholder="0.0" type="number">
                            </div>
                            <div class="col-md-2 form-group">
                                <label class="title" for="oneYear">One year</label>
                                <input (keyup)="onChangeValue('oneYear', 'oneYearTotal')" class="form-control"
                                       formControlName="oneYear"
                                       id="oneYear" name="oneYear"
                                       placeholder="0.0" type="number">
                            </div>
                            <div class="col-md-2 form-group">
                                <label class="title" for="oneYearPlus">1+ year</label>
                                <input (keyup)="onChangeValue('oneYearPlus', 'moreThanOneYearTotal')"
                                       class="form-control" formControlName="oneYearPlus"
                                       id="oneYearPlus" name="oneYeaPlus"
                                       placeholder="0.0" type="number">
                            </div>
                            <div *ngIf="partyLength()>1" class="col-md-1 pt-4">
                                <input (click)="deletePartyForm(i)"
                                       class="align-self-end btn btn-sm btn-danger btn-primary"
                                       type="button" value="Delete"/>

                            </div>
                        </div>
                    </div>
                    <div class="row col-md-12 justify-content-end">
                        <input (click)="addPartyForm()"
                                class="btn btn-sm btn-flat btn-primary"
                               type="button"
                               value="Add Party"/>
                    </div>
                    <div class="col-md-12 pl-4">
                        <div class="row">
                            <div class="col-md-2 form-group"><label class="title">Total:</label></div>
                            <div class="col-md-2 form-group">
                                <input class="form-control" disabled formControlName="threeMonthTotal" placeholder="0.0"
                                       type="text">
                            </div>
                            <div class="col-md-2 form-group">
                                <input class="form-control" disabled formControlName="sixMonthTotal" placeholder="0.0"
                                       type="text">
                            </div>
                            <div class="col-md-2 form-group">
                                <input class="form-control" disabled formControlName="oneYearTotal" placeholder="0.0"
                                       type="text">
                            </div>
                            <div class="col-md-2 form-group">
                                <input class="form-control" disabled formControlName="moreThanOneYearTotal"
                                       placeholder="0.0"
                                       type="text">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 form-group">
                        <label class="title" for="findingsAndCommentsForCurrentAssetsInspection">Findings &
                            Comments</label>
                        <textarea class="form-control"
                                  formControlName="findingsAndCommentsForCurrentAssetsInspection"
                                  id="findingsAndCommentsForCurrentAssetsInspection"
                                  name="findingsAndCommentsForCurrentAssetsInspection"
                                  placeholder="findings and comments"
                                  row="3" type="text"></textarea>
                    </div>
                </div>
                <h4 class="col-md-12 mt-3">Other Current Assets</h4>
                <div class="row col-md-12" formGroupName="otherCurrentAssets">
                    <div class="col-md-6 border-right">
                        <h5 class="col-md-12 mt-3">Receivable Assets</h5>
                        <div *ngFor="let asset of receivableAssetsForm; let i = index;"
                             formArrayName="receivableAssets">
                            <div [formGroupName]="i" class="row col-md-12">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="particulars">Particulars</label>
                                    <input class="form-control" formControlName="particulars" id="particulars"
                                           name="party" placeholder="particular">
                                </div>
                                <div class="col-md-4 form-group ml-3">
                                    <label class="title" for="amount">Amount</label>
                                    <input (keyup)="onReceivableAssetValueChange('amount', 'receivableCurrentAssetsTotal')"
                                           class="form-control" formControlName="amount"
                                           id="amount" name="amount"
                                           placeholder="0.0" type="number">
                                </div>
                                <div *ngIf="receivableAssetsLength()>1" class="col-md-2 form-group pt-4">
                                    <input (click)="deleteReceivableAssets(i)"
                                           class="btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-5 justify-content-end">
                                <button (click)="addReceivableAssets()" class="col-md-12 btn btn-sm btn-primary mt-4"
                                       >+Add Receivable Assets</button>
                            </div>
                            <div class="col-md-4 justify-content-end ml-3">
                                <label class="title" for="total">Total</label>
                                <input class="form-control" disabled formControlName="receivableCurrentAssetsTotal"
                                       id="total" name="amount"
                                       placeholder="0.0" type="text">
                            </div>
                        </div>
                        <h5 class="col-md-12 mt-3">Inspecting Staffs</h5>
                        <div *ngFor="let asset of inspectingStaffsForm; let i = index;"
                             formArrayName="inspectingStaffs">
                            <div [formGroupName]="i" class="row col-md-12">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="inspectingStaff">Name</label>
                                    <input class="form-control" formControlName="name"
                                           id="inspectingStaff"
                                           name="inspectingStaff" placeholder="name">
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="title" for="position">Position</label>
                                    <input class="form-control" formControlName="position" id="position"
                                           name="position" placeholder="possition">
                                </div>
                                <div *ngIf="inspectingStaffsLength()>1" class="col-md-2 form-group pt-4">
                                    <input (click)="deleteInspectingStaffs(i)"
                                           class="btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12 justify-content-start">
                            <button (click)="addInspectingStaffs()"
                                   class="col-md-9 btn btn-sm btn-flat btn-primary"
                                 >+Add Inspecting Staffs</button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h5 class="col-md-12 mt-3">Payable Assets</h5>
                        <div *ngFor="let asset of payableAssetsForm; let i = index;"
                             formArrayName="payableAssets">
                            <div [formGroupName]="i" class="row col-md-12">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="particulars">Particulars</label>
                                    <input class="form-control" formControlName="particulars" id="particulars"
                                           name="party" placeholder="particular">
                                </div>
                                <div class="col-md-4 form-group ml-3">
                                    <label class="title" for="amount">Amount</label>
                                    <input (keyup)="onPayableAssetsValueChange('amount', 'payableCurrentAssetsTotal')"
                                           class="form-control" formControlName="amount"
                                           id="amount" name="amount"
                                           placeholder="0.0" type="number">
                                </div>
                                <div *ngIf="payableAssetsLength()>1" class="col-md-2 form-group pt-4">
                                    <input (click)="deletePayableAssets(i)" class="btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-5 justify-content-end">
                                <button (click)="addPayableAssets()" class="col-md-12 btn btn-sm btn-primary mt-4">+Add Payable Assets</button>
                            </div>
                            <div class="col-md-4 justify-content-end ml-3">
                                <label class="title" for="total">Total</label>
                                <input class="form-control" disabled formControlName="payableCurrentAssetsTotal"
                                       id="total" name="amount"
                                       placeholder="0.0" type="text">
                            </div>
                        </div>
                        <h5 class="col-md-12 mt-3">Bank Exposure</h5>
                        <div *ngFor="let asset of bankExposureForm; let i = index;"
                             formArrayName="bankExposures">
                            <div [formGroupName]="i" class="row col-md-12">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="bankName">Bank Name</label>
                                    <input class="form-control" formControlName="bankName" id="bankName"
                                           name="bankName">
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="title" for="amount">Amount</label>
                                    <input class="form-control" formControlName="amount" id="amount"
                                           name="amount" placeholder="0.0" type="number">
                                </div>
                                <div *ngIf="bankExposureLength()>1" class="col-md-2 form-group pt-4">
                                    <input (click)="deleteBankExposure(i)" class="btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12 justify-content-start">
                            <button (click)="addBankExposure()" class="col-md-9 btn btn-sm btn-flat btn-primary"
                                   >+Add Bank Exposure</button>
                        </div>
                    </div>
                    <div class="col-md-12 mt-4">
                        <div class="form-group">
                            <label class="title" for="overallFindings">Overall Findings / Comment of CAI</label>
                            <textarea class="form-control" formControlName="overAllFindings"
                                      id="overAllFindings" name="overAllFindings"
                                      placeholder="overall findings / comments of CAI"
                                      row="3" type="text"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="fromProfile" class="py-4 d-flex justify-content-end">
                <button (click)="onSubmit()" nbButton type="button">save</button>
            </div>
        </form>
    </nb-card-body>
</nb-card>
