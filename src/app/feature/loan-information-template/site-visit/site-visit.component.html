<nb-card>
    <nb-card-body>
        <form [formGroup]="siteVisitFormGroup" class="form-horizontal">
            <div class="row justify-content-around">
                <div class="col-md-3">
                    <nb-checkbox [checked]="currentResidentForm"
                                 (change)="checkboxSelected('currentResident',$event.target.checked)">
                        Current Resident
                    </nb-checkbox>
                </div>
                <div class="col-md-3">
                    <nb-checkbox [checked]="businessSiteVisitForm"
                                 (change)="checkboxSelected('businessSiteVisit',$event.target.checked)">
                        Business Site Visit
                    </nb-checkbox>
                </div>
                <div class="col-md-3">
                    <nb-checkbox [checked]="fixedAssetCollateralForm"
                                 (change)="checkboxSelected('fixedAssetCollateral',$event.target.checked)">
                        Fixed Asset Collateral
                    </nb-checkbox>
                </div>
                <div class="col-md-3">
                    <nb-checkbox [checked]="currentAssetsInspectionForm"
                                 (change)="checkboxSelected('currentAssetsInspection',$event.target.checked)">
                        Current Assets Inspection
                    </nb-checkbox>
                </div>
            </div>
            <div [hidden]="!currentResidentForm" class="row mt-3" formGroupName="currentResidentDetails">
                <h4 class="col-md-12">Current Resident</h4>
                <div class="col-md-4 form-group">
                    <label class="title" for="houseNumber">House Number</label>
                    <input class="form-control" formControlName="houseNumber" id="houseNumber"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('houseNumber')?.errors }"
                           name="houseNumber"
                           placeholder="house number" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('houseNumber')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('houseNumber')?.errors.required">House number is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="streetName">Street Name</label>
                    <input class="form-control" formControlName="streetName" id="streetName" name="streetName"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('streetName')?.errors }"
                           placeholder="street name" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('streetName')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('streetName')?.errors.required">Street Name is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="address">Address</label>
                    <input class="form-control" formControlName="address" id="address" name="address"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails').get('address')?.errors }"
                           placeholder="address" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails').get('address')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails').get('address')?.errors.required">address is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="nearBy">Near By</label>
                    <input class="form-control" formControlName="nearBy" id="nearBy" name="nearBy"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('nearBy')?.errors }"
                           placeholder="near by" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('nearBy')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('nearBy')?.errors.required">Value is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="ownerName" for="address">Owner Name</label>
                    <input class="form-control" formControlName="ownerName" id="ownerName" name="ownerName"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('ownerName')?.errors }"
                           placeholder="owner name" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentResidentDetails')?.get('ownerName')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentResidentDetails')?.get('ownerName')?.errors.required">owner Name is required</span>
                    </div>
                </div>
                <div class=" input-group mb-3">
                    <input class="form-control pr-0" formControlName="locationPreview" id="locationPreview1"
                           name="locationPreview"
                           type="text">
                    <div class=" input-group-append">
                        <button (click)="findLocation1()" class="btn btn-light">Find Location</button>
                    </div>
                </div>
                <agm-map (mapClick)="placeMaker1($event.coords.lat,$event.coords.lng)"
                         [clickableIcons]='false'
                         [fullscreenControl]='true'
                         [latitude]="latitude"
                         [longitude]="longitude"
                         [mapTypeControl]='true'
                         [zoom]="zoom"
                         style="height: 200px; width: 100%;">
                    <agm-marker [latitude]="markerLatitude" [longitude]="markerLongitude">
                        <agm-info-window [isOpen]="infoWindowOpen.value">
                            {{addressLabel.value}}
                        </agm-info-window>
                    </agm-marker>
                </agm-map>
            </div>
            <div [hidden]="!businessSiteVisitForm" class="row mt-3"
                 formGroupName="businessSiteVisitDetails">
                <h4 class="col-md-12">Business Site Visit</h4>
                <div class="col-md-4 form-group">
                    <label class="title" for="officeAddress">Office Address</label>
                    <input class="form-control" formControlName="officeAddress" id="officeAddress"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('officeAddress')?.errors }"
                           name="officeAddress" placeholder="office address"
                           type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('officeAddress')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('officeAddress')?.errors.required">office address is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="nameOfThePersonContacted">Name Of The Person Contacted</label>
                    <input class="form-control" formControlName="nameOfThePersonContacted"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('nameOfThePersonContacted')?.errors }"
                           id="nameOfThePersonContacted"
                           name="nameOfThePersonContacted" placeholder="name of the person contacted"
                           type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('nameOfThePersonContacted')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('nameOfThePersonContacted')?.errors.required">Name is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="dateOfVisit">Date Of Visit</label>
                    <input [nbDatepicker]="datepicker3" class="form-control" formControlName="dateOfVisit"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('dateOfVisit')?.errors }"
                           id="dateOfVisit" placeholder="date of visit">
                    <nb-datepicker #datepicker3></nb-datepicker>
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('dateOfVisit')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('dateOfVisit')?.errors.required">Date is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="objectiveOfVisit">Objective Of Visit</label>
                    <input class="form-control" formControlName="objectiveOfVisit" id="objectiveOfVisit"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('objectiveOfVisit')?.errors }"
                           name="objectiveOfVisit" placeholder="objective of visit" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('objectiveOfVisit')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('objectiveOfVisit')?.errors.required">objective is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="observation">Observation</label>
                    <input class="form-control" formControlName="observation" id="observation"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('observation')?.errors }"
                           name="observation" placeholder="observation"
                           type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('observation')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('observation')?.errors.required">observation is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="visitedBy">Visited By</label>
                    <input class="form-control" formControlName="visitedBy" id="visitedBy" name="visitedBy"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('visitedBy')?.errors }"
                           placeholder="visited by" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('visitedBy')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('visitedBy')?.errors.required">value is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="conclusion">Conclusion</label>
                    <input class="form-control" formControlName="conclusion" id="conclusion" name="conclusion"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('conclusion')?.errors }"
                           placeholder="conclusion" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('conclusion')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('conclusion')?.errors.required">conclusion is required</span>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <label class="title" for="mapAddress">Address</label>
                    <input class="form-control col-md-12" formControlName="mapAddress" id="mapAddress"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('mapAddress')?.errors }"
                           name="mapAddress" placeholder="address"
                           type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('mapAddress')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('mapAddress')?.errors.required">address is required</span>
                    </div>
                </div>
                <div class="col-md-8 form-group">
                    <label class="title" for="findingsAndComments">Finding And Comments</label>
                    <textarea class="form-control" formControlName="findingsAndComments"
                              [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('findingsAndComments')?.errors }"
                              id="findingsAndComments" name="findingsAndComments"
                              placeholder="findings and comments"
                              row="3"></textarea>
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('businessSiteVisitDetails')?.get('findingsAndComments')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('businessSiteVisitDetails')?.get('findingsAndComments')?.errors.required">comments required</span>
                    </div>
                </div>
                <div class="input-group mb-3">
                    <input class="form-control pr-0" formControlName="locationPreview" id="locationPreview"
                           name="locationPreview"
                           type="text">
                    <div class="input-group-append">
                        <button (click)="findLocation()" class="btn btn-light">Find Location</button>
                    </div>
                </div>
                <agm-map (mapClick)="placeMaker($event.coords.lat,$event.coords.lng)"
                         [clickableIcons]='false'
                         [fullscreenControl]='true'
                         [latitude]="latitude"
                         [longitude]="longitude"
                         [mapTypeControl]='true'
                         [zoom]="zoom"
                         style="height: 200px; width: 100%;">
                    <agm-marker [latitude]="markerLatitude" [longitude]="markerLongitude">
                        <agm-info-window [isOpen]="infoWindowOpen.value">
                            {{addressLabel.value}}
                        </agm-info-window>
                    </agm-marker>
                </agm-map>
            </div>
            <div [hidden]="!fixedAssetCollateralForm" class="row mt-3"
                 formGroupName="fixedAssetCollateralDetails">
                <h4 class="col-md-12">Fixed Assets Collateral</h4>
                <div class="col-md-3 form-group">
                    <label class="title" for="date">Date</label>
                    <input [nbDatepicker]="datepicker4" class="form-control"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('date')?.errors }"
                           formControlName="date" id="date">
                    <nb-datepicker #datepicker4></nb-datepicker>
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('date')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('date')?.errors.required">date is required</span>
                    </div>
                </div>
                <div class="col-md-3 form-group">
                    <label class="title" for="fixedAssetCollateralAddress">Address</label>
                    <input class="form-control" formControlName="address" id="fixedAssetCollateralAddress"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('address')?.errors }"
                           name="fixedAssetCollateralAddress" placeholder="address" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('address')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('address')?.errors.required">address is required</span>
                    </div>
                </div>
                <div class="col-md-3 form-group">
                    <label class="title" for="personContacted">Person Contacted</label>
                    <input class="form-control" formControlName="personContacted" id="personContacted"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('personContacted')?.errors }"
                           name="personContacted" placeholder="person contacted"
                           type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('personContacted')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('personContacted')?.errors.required">person contacted required</span>
                    </div>
                </div>
                <div class="col-md-3 form-group">
                    <label class="title" for="phoneNoOfContact">Phone No. Of Contact</label>
                    <input class="form-control" formControlName="phoneNoOfContact" id="phoneNoOfContact"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('phoneNoOfContact')?.errors }"
                           name="phoneNoOfContact" placeholder="phone no. of contact" type="text">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('phoneNoOfContact')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('phoneNoOfContact')?.errors.required">phone no. required</span>
                    </div>
                </div>
                <h5 class="col-md-12 mt-3">Facilities</h5>
                <div class="row col-md-12 pr-0" formGroupName="facilities">
                    <div class="col-md-3 form-group">
                        <label class="title" for="roadApproach">Road Approach</label>
                        <select class="custom-select" formControlName="roadApproach" id="roadApproach"
                                [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('roadApproach')?.errors }"
                                name="roadApproach">
                            <option [ngValue]="undefined" hidden>Select Road Approach</option>
                            <option value="BLACK_TOPPED_ROAD">Black Topped Road</option>
                            <option value="GRAVELLED_ROAD">Gravelled Road</option>
                            <option value="EARTHEN_ROAD">Earthen Road</option>
                            <option value="OTHERS">Others</option>
                        </select>
                        <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('roadApproach')?.invalid"
                             class="invalid-feedback">
                            <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('roadApproach')?.errors.required"> please select a value</span>
                        </div>
                    </div>
                    <div class="col-md-3 form-group">
                        <label class="title" for="roadWidth">Road Width</label>
                        <input class="form-control" formControlName="roadWidth" id="roadWidth" name="roadWidth"
                               [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('roadWidth')?.errors }"
                               placeholder="road width" type="text">
                        <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('roadWidth')?.invalid"
                             class="invalid-feedback">
                            <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('roadWidth')?.errors.required"> road width is required</span>
                        </div>
                    </div>
                    <div class="col-md-3 form-group">
                        <label class="title" for="prominentPlace">Prominent Place</label>
                        <input class="form-control" formControlName="prominentPlace" id="prominentPlace"
                               [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('prominentPlace')?.errors }"
                               name="prominentPlace" placeholder="prominent place" type="text">
                        <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('prominentPlace')?.invalid"
                             class="invalid-feedback">
                            <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('prominentPlace')?.errors.required">prominent place is required</span>
                        </div>
                    </div>
                    <div class="col-md-3 form-group">
                        <label class="title" for="approachDistance">Approach Distance</label>
                        <input class="form-control" formControlName="approachDistance" id="approachDistance"
                               [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('approachDistance')?.errors }"
                               name="approachDistance" placeholder="approach distance" type="text">
                        <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('approachDistance')?.invalid"
                             class="invalid-feedback">
                            <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('facilities')?.get('approachDistance')?.errors.required"> Approach distance is required</span>
                        </div>
                    </div>
                </div>
                <h5 class="col-md-12 mt-3">Other Facilities</h5>
                <div class="row col-md-12" formGroupName="otherFacilities">
                    <div class="col-md-4 form-group">
                        <table class="table">
                            <tr>
                                <th>SN</th>
                                <th>Particulars</th>
                                <th>Yes or No</th>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>Water Supply</td>
                                <td><input formControlName="waterSupply" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Electricity</td>
                                <td><input formControlName="electricity" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Boundary Wall Construction</td>
                                <td><input formControlName="boundaryWallConstruction" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Boundary Fencing</td>
                                <td><input formControlName="boundaryFencing" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Drainage</td>
                                <td><input formControlName="drainage" type="checkbox"></td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>Open</td>
                                <td><input formControlName="open" type="checkbox"></td>
                            </tr>
                        </table>

                        <label class="title" for="remarksForOtherFacility">Remarks For 'No' Option</label>
                        <textarea class="form-control" formControlName="remarksForOtherFacility"
                                  [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('remarksForOtherFacility')?.errors }"
                                  id="remarksForOtherFacility" name="remarksForOtherFacility"
                                  placeholder="remarks"
                                  row="3" type="text"></textarea>
                        <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('remarksForOtherFacility')?.invalid"
                             class="invalid-feedback">
                            <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('remarksForOtherFacility')?.errors.required"> Remarks required</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="col-md-12 form-group">
                            <label class="title" for="building">Building</label>
                            <select class="custom-select" formControlName="building" id="building"
                                    [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('building')?.errors }"
                                    name="building">
                                <option value="YES">Yes</option>
                                <option value="NO">No</option>
                            </select>
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('building')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('building')?.errors.required"> value required</span>
                            </div>
                        </div>
                        <div class="col-md-12 form-group">
                            <label class="title" for="buildingArea">Building Area</label>
                            <input class="form-control" formControlName="buildingArea" id="buildingArea"
                                   [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('buildingArea')?.errors }"
                                   name="buildingArea" placeholder="building area">
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('buildingArea')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('buildingArea')?.errors.required"> value required</span>
                            </div>
                        </div>
                        <div class="col-md-12 form-group">
                            <label class="title" for="constructionYear">Construction Year</label>
                            <input [nbDatepicker]="datepicker5" class="form-control"
                                   formControlName="constructionYear" id="constructionYear"
                                   [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('constructionYear')?.errors }"
                                   name="constructionYear" placeholder="construction year">
                            <nb-datepicker #datepicker5></nb-datepicker>
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('constructionYear')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('constructionYear')?.errors.required"> Construction year required</span>
                            </div>
                        </div>
                        <div class="col-md-12 form-group">
                            <label class="title" for="qualityOfConstructionRemarks">Remarks For 'No'
                                Option</label>
                            <textarea class="form-control" formControlName="qualityOfConstructionRemarks"
                                      id="qualityOfConstructionRemarks" name="qualityOfConstructionRemarks"
                                      [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('qualityOfConstructionRemarks')?.errors }"
                                      placeholder="remarks"
                                      row="3" type="text"></textarea>
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('qualityOfConstructionRemarks')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('otherFacilities')?.get('qualityOfConstructionRemarks')?.errors.required"> Remarks required</span>
                            </div>
                        </div>
                    </div>
                    <table class="table col-md-4">
                        <tr>
                            <th>SN</th>
                            <th>Particulars</th>
                            <th>Yes or No</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>Load Bearing Wall</td>
                            <td><input formControlName="loadBearingWall" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Mortar Cement</td>
                            <td><input formControlName="mortarCement" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Other Roofing</td>
                            <td><input formControlName="otherRoofing" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Inside Furniture</td>
                            <td><input formControlName="insideFurniture" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>Frame Structure</td>
                            <td><input formControlName="frameStructure" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>RCC Roofing</td>
                            <td><input formControlName="rccRoofing" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>Bathroom And Toilet</td>
                            <td><input formControlName="bathroomAndToilet" type="checkbox"></td>
                        </tr>
                    </table>
                </div>
                <h5 class="col-md-12 mt-3">Vicinity to the Basic Amenities</h5>
                <div class="row col-md-12 mt-3" formGroupName="vicinityToTheBasicAmenities">
                    <div class="col-md-6">
                        <table class="table">
                            <tr>
                                <th>SN</th>
                                <th>Particulars</th>
                                <th>Yes or No</th>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>Major Market Places</td>
                                <td><input class="form-control" formControlName="majorMarketPlaces"
                                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('majorMarketPlaces')?.errors }"
                                           placeholder="eg: 4.2 km"
                                           type="text">
                                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('majorMarketPlaces')?.invalid"
                                         class="invalid-feedback">
                                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('majorMarketPlaces')?.errors.required"> value required</span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>School/Colleges</td>
                                <td><input class="form-control"
                                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('schoolOrCollege')?.errors }"
                                           formControlName="schoolOrCollege" type="text">
                                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('schoolOrCollege')?.invalid"
                                         class="invalid-feedback">
                                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('schoolOrCollege')?.errors.required"> value required</span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Hospital/Nursing Home</td>
                                <td><input class="form-control"
                                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('hospitalOrNursingHome')?.errors }"
                                           formControlName="hospitalOrNursingHome" type="text">
                                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('hospitalOrNursingHome')?.invalid"
                                         class="invalid-feedback">
                                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('hospitalOrNursingHome')?.errors.required"> value required</span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Electricity Line</td>
                                <td><input class="form-control"
                                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('electricityLine')?.errors }"
                                           formControlName="electricityLine" type="text">
                                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('electricityLine')?.invalid"
                                         class="invalid-feedback">
                                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('electricityLine')?.errors.required"> value required</span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Telephone Line</td>
                                <td><input class="form-control"
                                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('telephoneLine')?.errors }"
                                           formControlName="telephoneLine" type="text">
                                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('telephoneLine')?.invalid"
                                         class="invalid-feedback">
                                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('telephoneLine')?.errors.required"> value required</span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>Water Pipeline</td>
                                <td><input class="form-control"
                                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('waterPipeline')?.errors }"
                                           formControlName="waterPipeline" type="text">
                                    <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('waterPipeline')?.invalid"
                                         class="invalid-feedback">
                                        <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('waterPipeline')?.errors.required"> value required</span>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <div *ngFor="let staff of staffsForm; let i = index;"
                             formArrayName="staffs">
                            <div [formGroupName]="i" class="row">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="inspectingStaff">Inspecting Staff</label>
                                    <input class="form-control" formControlName="name"
                                           [ngClass]="{ 'is-invalid': (submitted) && staff.get('name')?.errors }"
                                           id="inspectingStaff" name="inspectingStaff"
                                           placeholder="full name of staff">
                                    <div *ngIf="(submitted) && staff.get('name')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="staff.get('name')?.errors.required">Name is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-5 form-group">
                                    <label class="title" for="position">Position</label>
                                    <input class="form-control" formControlName="position" id="position"
                                           [ngClass]="{ 'is-invalid': (submitted) && staff.get('position')?.errors }"
                                           name="position" placeholder="position">
                                    <div *ngIf="(submitted) && staff.get('position')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="staff.get('position')?.errors.required">Position is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="staffLength()>1" class="col-md-1 pt-4">
                                    <input (click)="deleteStaff(i)"
                                           class="align-self-end btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <input (click)="addStaffs()" class="btn btn-sm btn-flat btn-primary" type="button"
                                   value="Add Staff"/>
                        </div>
                        <div class="form-group">
                            <label class="title" for="commentAboutFAC">Comments About FAC</label>
                            <textarea class="form-control" formControlName="commentAboutFAC"
                                      [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('commentAboutFAC')?.errors }"
                                      id="commentAboutFAC" name="commentsAboutFAC"
                                      placeholder="comments" row="3" type="text"></textarea>
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('commentAboutFAC')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('commentAboutFAC')?.errors.required"> Comments required</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="title" for="branchInchargeComment">Branch Incharge Comment</label>
                            <textarea class="form-control" formControlName="branchInchargeComment"
                                      [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('branchInchargeComment')?.errors }"
                                      id="branchInchargeComment" name="branchInchargeComment"
                                      placeholder="branch incharge comment"
                                      row="3"
                                      type="text"></textarea>
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('branchInchargeComment')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('fixedAssetCollateralDetails')?.get('vicinityToTheBasicAmenities')?.get('branchInchargeComment')?.errors.required"> Comment required</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div [hidden]="!currentAssetsInspectionForm" class="row mt-3"
                 formGroupName="currentAssetsInspectionDetails">
                <h4 class="col-md-12">Current Assets Inspection - Stock</h4>
                <div class="col-md-4 form-group">
                    <label class="title" for="dateOfInspection">Date Of Inspection</label>
                    <input [nbDatepicker]="datepicker1" class="form-control"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('dateOfInspection')?.errors }"
                           formControlName="dateOfInspection"
                           id="dateOfInspection" placeholder="date of inspection">
                    <nb-datepicker #datepicker1></nb-datepicker>
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('dateOfInspection')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('dateOfInspection')?.errors.required">Date is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="particularsOfGoodInspected">Particulars Of Good
                        Inspected</label>
                    <input class="form-control" formControlName="particularsOfGoodInspected"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('particularsOfGoodInspected')?.errors }"
                           id="particularsOfGoodInspected" name="particularsOfGoodInspected"
                           placeholder="particulars of good inspected">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('particularsOfGoodInspected')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('particularsOfGoodInspected')?.errors.required">particulars Of Good Inspected is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="stockValueReported">Stock Value Reported</label>
                    <input class="form-control" formControlName="stockValueReported"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockValueReported')?.errors }"
                           id="stockValueReported" name="stockValueReported"
                           placeholder="0.0">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockValueReported')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockValueReported')?.errors.required">value is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="rents">Rents</label>
                    <select class="custom-select" formControlName="rents"
                            [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('rents')?.errors }"
                            id="rents" name="rents">
                        <option selected="selected" value="OWNED">Owned</option>
                        <option value="RENTED">Rented</option>
                    </select>
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('rents')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('rents')?.errors.required">value is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="isRentPmtUpToDate">IS Rent Pmt. Up to Date?</label>
                    <input class="form-control" formControlName="isRentPmtUpToDate" id="isRentPmtUpToDate"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('isRentPmtUpToDate')?.errors }"
                           name="isRentPmtUpToDate" placeholder="Is rent payment up to date?">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('isRentPmtUpToDate')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('isRentPmtUpToDate')?.errors.required">value is required</span>
                    </div>
                </div>
                <div class="col-md-4 form-group">
                    <label class="title" for="isRentReceiptShown">IS Rent Receipt Up to Date?</label>
                    <input class="form-control" formControlName="isRentReceiptShown"
                           [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('isRentReceiptShown')?.errors }"
                           id="isRentReceiptShown" name="isRentReceiptShown"
                           placeholder="Is Rent Receipt Shown?">
                    <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('isRentReceiptShown')?.invalid"
                         class="invalid-feedback">
                        <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('isRentReceiptShown')?.errors.required">value is required</span>
                    </div>
                </div>

                <h4 class="col-md-12 mt-3">Insurance Verification</h4>
                <div class="row col-md-12 mt-3" formGroupName="insuranceVerification">
                    <div class="row col-md-6">
                        <div class="col-md-6 form-group">
                            <label class="title" for="assetsMortgaged">Assets Mortgaged</label>
                            <input class="form-control" formControlName="assetsMortgaged" id="assetsMortgaged"
                                   [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('assetsMortgaged')?.errors }"
                                   name="assetsMortgaged" placeholder="assets mortgaged">
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('assetsMortgaged')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('assetsMortgaged')?.errors.required">Asstes Mortgaged required</span>
                            </div>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="insuredAmount">Insured Amount</label>
                            <input class="form-control" formControlName="insuredAmount" id="insuredAmount"
                                   [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('insuredAmount')?.errors }"
                                   name="insuredAmount" placeholder="insured amount">
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('insuredAmount')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('insuredAmount')?.errors.required">insuredAmount required</span>
                            </div>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="insuranceCompany">Insurance Company</label>
                            <input class="form-control" formControlName="insuranceCompany"
                                   [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('insuranceCompany')?.errors }"
                                   id="insuranceCompany" name="insuranceCompany"
                                   placeholder="insurance company">
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('insuranceCompany')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('insuranceCompany')?.errors.required">insuranceCompany required</span>
                            </div>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="expiryDate">Expiry Date</label>
                            <input [nbDatepicker]="datepicker2" class="form-control" formControlName="expiryDate"
                                   [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('expiryDate')?.errors }"
                                   id="expiryDate" placeholder="expiry date">
                            <nb-datepicker #datepicker2></nb-datepicker>
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('expiryDate')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('expiryDate')?.errors.required">expiryDate required</span>
                            </div>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="clientsOverallRating">clients Overall Rating</label>
                            <select class="custom-select" formControlName="clientsOverallRating"
                                    [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('clientsOverallRating')?.errors }"
                                    id="clientsOverallRating"
                                    name="rents">
                                <option value="POOR">Poor</option>
                                <option value="GOOD">Good</option>
                                <option value="AVERAGE">Average</option>
                                <option value="EXCELLENT">Excellent</option>
                            </select>
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('clientsOverallRating')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('clientsOverallRating')?.errors.required">clients Overall Rating required</span>
                            </div>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="comments">Comments</label>
                            <input class="form-control" formControlName="comments" id="comments"
                                   [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('comments')?.errors }"
                                   name="comments" placeholder="comments">
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('comments')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('comments')?.errors.required">comments required</span>
                            </div>
                        </div>
                        <div class="col-md-6 form-group">
                            <label class="title" for="stockValueConfirmed">Stock Value Confirmed</label>
                            <input class="form-control" formControlName="stockValueConfirmed"
                                   [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('stockValueConfirmed')?.errors }"
                                   id="stockValueConfirmed" name="stockValueConfirmed"
                                   placeholder="0.0">
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('stockValueConfirmed')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('insuranceVerification')?.get('stockValueConfirmed')?.errors.required">Stock Value Confirmed required</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div *ngFor="let inspectingStaff of inspectingStaffsDetailsForm; let i = index;"
                             formArrayName="inspectingStaffsDetails">
                            <div [formGroupName]="i" class="row">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="inspectingStaff">Inspecting Staff</label>
                                    <input class="form-control" formControlName="name"
                                           [ngClass]="{ 'is-invalid': (submitted) && inspectingStaff.get('name')?.errors }"
                                           id="inspectingStaff"
                                           name="inspectingStaff" placeholder="inspecting staff">
                                    <div *ngIf="(submitted) && inspectingStaff.get('name')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="inspectingStaff.get('name')?.errors.required">Name is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-5 form-group">
                                    <label class="title" for="position">Position</label>
                                    <input class="form-control" formControlName="position" id="position"
                                           [ngClass]="{ 'is-invalid': (submitted) && inspectingStaff.get('position')?.errors }"
                                           name="position" placeholder="position">
                                    <div *ngIf="(submitted) && inspectingStaff.get('position')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="inspectingStaff.get('position')?.errors.required">position is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="inspectingStaffsDetailsLength()>1" class="col-md-1 pt-4">
                                    <input (click)="deleteInspectingStaffsDetails(i)"
                                           class="align-self-end btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <input (click)="addInspectingStaffsDetails()" class="btn btn-sm btn-flat btn-primary"
                                   type="button"
                                   value="Add Staff"/>
                        </div>
                    </div>
                </div>
                <h4 class="col-md-12 mt-3">Current Assets Inpsection - Stock Checklist Questionaire</h4>
                <div class="row col-md-12 mt-3" formGroupName="stockCheckListQuestionaire">
                    <table class="table">
                        <tr>
                            <th>SN</th>
                            <th>Particulars</th>
                            <th>Yes Or No</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>Is the customer upto date with other charges,chargeable to the other premises ?
                            </td>
                            <td><input
                                    formControlName="uptoDateWithCharges"
                                    type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>All goods belongs to the borrowers and non are hold on account of third parties
                            </td>
                            <td><input
                                    formControlName="borrowersPossession"
                                    type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Confirm that valuation of stocks does not include and goods under TR</td>
                            <td><input formControlName="notUnderTR"
                                       type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>There is no evidence of any other bank interested in the goods</td>
                            <td><input formControlName="otherBankNotInterested"
                                       type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>Was the security in order ?</td>
                            <td><input formControlName="securityOrder" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>Are the goods saleable ?</td>
                            <td><input formControlName="goodsSaleable" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>Are the stocks registered upto date ?</td>
                            <td><input formControlName="stocksUptoDate" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>Does the stocks registered match with the stock list ?</td>
                            <td><input formControlName="matchWithTheStockList"
                                       type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td> Is the storage condition satisfactory ?</td>
                            <td><input formControlName="storageConditionSatisfactory" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>Is fire fighting evidence through arrangement ?</td>
                            <td><input formControlName="fireFightingEvidence" type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>11</td>
                            <td>Are the building/store in the good condition?</td>
                            <td><input formControlName="buildingStoreCondition" type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>12</td>
                            <td>Are the special warranties in the insurance policy upto date ?</td>
                            <td><input formControlName="warrantiesUptoDate"
                                       type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>13</td>
                            <td>There is no evidence of goods hazardous nature in the premises</td>
                            <td><input formControlName="noHazardousNature"
                                       type="checkbox">
                            </td>
                        </tr>
                        <tr>
                            <td>14</td>
                            <td>Were our name board properly displayed ?</td>
                            <td><input formControlName="nameBoardProperlyDisplayed" type="checkbox"></td>
                        </tr>
                        <tr>
                            <td>15</td>
                            <td> Were our padlocks in use ?</td>
                            <td><input formControlName="padlocksUse" type="checkbox"></td>
                        </tr>
                    </table>
                    <div class="col-md-6 form-group">
                        <label class="title" for="findingAndComments">Finding & Comments</label>
                        <textarea class="form-control" formControlName="findingAndComments"
                                  [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockCheckListQuestionaire')?.get('findingAndComments')?.errors }"
                                  id="findingAndComments" name="findingAndComments"
                                  placeholder="findings and comments"
                                  row="3" type="text"></textarea>
                        <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockCheckListQuestionaire')?.get('findingAndComments')?.invalid"
                             class="invalid-feedback">
                            <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockCheckListQuestionaire')?.get('findingAndComments')?.errors.required">Comments required</span>
                        </div>
                    </div>
                    <div class="col-md-6 form-group">
                        <label class="title" for="remarksForNoOption">Remarks for 'NO' Option</label>
                        <textarea class="form-control" formControlName="remarksForNoOption"
                                  [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockCheckListQuestionaire')?.get('remarksForNoOption')?.errors }"
                                  id="remarksForNoOption" name="remarksForNoOption" placeholder="remarks"
                                  row="3" type="text"></textarea>
                        <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockCheckListQuestionaire')?.get('remarksForNoOption')?.invalid"
                             class="invalid-feedback">
                            <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('stockCheckListQuestionaire')?.get('remarksForNoOption')?.errors.required">Remarks required</span>
                        </div>
                    </div>
                </div>
                <h4 class="col-md-12 mt-3">Current Assets Inspection - Receivables & Payables</h4>
                <div class="row col-md-12 mt-3" formGroupName="receivablesAndPayables">
                    <div *ngFor="let party of partyForm; let i = index;"
                         formArrayName="parties">
                        <div [formGroupName]="i" class="row">
                            <div class="col-md-2 form-group ml-3">
                                <label class="title" for="party">Party</label>
                                <input class="form-control" formControlName="party" id="party"
                                       [ngClass]="{ 'is-invalid': (submitted) && party.get('party')?.errors }"
                                       name="party" placeholder="party">
                                <div *ngIf="(submitted) && party.get('party')?.invalid"
                                     class="invalid-feedback">
                                    <div *ngIf="party.get('party')?.errors.required">party is
                                        required
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 form-group">
                                <label class="title" for="withinThreeMonths">Within 3 Months</label>
                                <input (keyup)="onChangeValue('withinThreeMonths','threeMonthTotal')"
                                       class="form-control"
                                       [ngClass]="{ 'is-invalid': (submitted) && party.get('withinThreeMonths')?.errors }"
                                       formControlName="withinThreeMonths" id="withinThreeMonths"
                                       name="party"
                                       placeholder="0.0">
                                <div *ngIf="(submitted) && party.get('withinThreeMonths')?.invalid"
                                     class="invalid-feedback">
                                    <div *ngIf="party.get('withinThreeMonths')?.errors.required">value is
                                        required
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 form-group">
                                <label class="title" for="sixMonth">6 Month</label>
                                <input (keyup)="onChangeValue('sixMonth', 'sixMonthTotal')" class="form-control"
                                       formControlName="sixMonth"
                                       [ngClass]="{ 'is-invalid': (submitted) && party.get('sixMonth')?.errors }"
                                       id="sixMonth" name="sixMonth"
                                       placeholder="0.0">
                                <div *ngIf="(submitted) && party.get('sixMonth')?.invalid"
                                     class="invalid-feedback">
                                    <div *ngIf="party.get('sixMonth')?.errors.required">value is
                                        required
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 form-group">
                                <label class="title" for="oneYear">One year</label>
                                <input (keyup)="onChangeValue('oneYear', 'oneYearTotal')" class="form-control"
                                       formControlName="oneYear"
                                       [ngClass]="{ 'is-invalid': (submitted) && party.get('oneYear')?.errors }"
                                       id="oneYear" name="oneYear"
                                       placeholder="0.0">
                                <div *ngIf="(submitted) && party.get('oneYear')?.invalid"
                                     class="invalid-feedback">
                                    <div *ngIf="party.get('oneYear')?.errors.required">value is
                                        required
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 form-group">
                                <label class="title" for="oneYearPlus">1+ year</label>
                                <input (keyup)="onChangeValue('oneYearPlus', 'moreThanOneYearTotal')"
                                       class="form-control" formControlName="oneYearPlus"
                                       [ngClass]="{ 'is-invalid': (submitted) && party.get('oneYearPlus')?.errors }"
                                       id="oneYearPlus" name="oneYeaPlus"
                                       placeholder="0.0">
                                <div *ngIf="(submitted) && party.get('oneYearPlus')?.invalid"
                                     class="invalid-feedback">
                                    <div *ngIf="party.get('oneYearPlus')?.errors.required">value is
                                        required
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="partyLength()>1" class="col-md-1 pt-4">
                                <input (click)="deletePartyForm(i)"
                                       class="align-self-end btn btn-sm btn-danger btn-primary"
                                       type="button" value="Delete"/>

                            </div>
                        </div>
                    </div>
                    <div class="row col-md-12 justify-content-end">
                        <input (click)="addPartyForm()" class="btn btn-sm btn-flat btn-primary" type="button"
                               value="Add Party"/>
                    </div>
                    <div class="col-md-12 pl-4">
                        <div class="row">
                            <div class="col-md-2 form-group"><label class="title">Total:</label></div>
                            <div class="col-md-2 form-group">
                                <input class="form-control" disabled formControlName="threeMonthTotal" placeholder="0.0"
                                       type="text">
                            </div>
                            <div class="col-md-2 form-group">
                                <input class="form-control" disabled formControlName="sixMonthTotal" placeholder="0.0"
                                       type="text">
                            </div>
                            <div class="col-md-2 form-group">
                                <input class="form-control" disabled formControlName="oneYearTotal" placeholder="0.0"
                                       type="text">
                            </div>
                            <div class="col-md-2 form-group">
                                <input class="form-control" disabled formControlName="moreThanOneYearTotal"
                                       placeholder="0.0"
                                       type="text">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 form-group">
                        <label class="title" for="findingsAndCommentsForCurrentAssetsInspection">Findings &
                            Comments</label>
                        <textarea class="form-control"
                                  formControlName="findingsAndCommentsForCurrentAssetsInspection"
                                  [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('receivablesAndPayables')?.get('findingsAndCommentsForCurrentAssetsInspection')?.errors }"
                                  id="findingsAndCommentsForCurrentAssetsInspection"
                                  name="findingsAndCommentsForCurrentAssetsInspection"
                                  placeholder="findings and comments"
                                  row="3" type="text"></textarea>
                        <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('receivablesAndPayables')?.get('findingsAndCommentsForCurrentAssetsInspection')?.invalid"
                             class="invalid-feedback">
                            <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('receivablesAndPayables')?.get('findingsAndCommentsForCurrentAssetsInspection')?.errors.required">Remarks required</span>
                        </div>
                    </div>
                </div>
                <h4 class="col-md-12 mt-3">Other Current Assets</h4>
                <div class="row col-md-12" formGroupName="otherCurrentAssets">
                    <div class="col-md-6 border-right">
                        <h5 class="col-md-12 mt-3">Receivable Assets</h5>
                        <div *ngFor="let asset of receivableAssetsForm; let i = index;"
                             formArrayName="receivableAssets">
                            <div [formGroupName]="i" class="row col-md-12">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="particulars">Particulars</label>
                                    <input class="form-control" formControlName="particulars" id="particulars"
                                           [ngClass]="{ 'is-invalid': (submitted) && asset.get('particulars')?.errors }"
                                           name="party">
                                    <div *ngIf="(submitted) && asset.get('particulars')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="asset.get('particulars')?.errors.required">particulars is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 form-group ml-3">
                                    <label class="title" for="amount">Amount</label>
                                    <input (keyup)="onReceivableAssetValueChange('amount', 'receivableCurrentAssetsTotal')"
                                           class="form-control" formControlName="amount"
                                           [ngClass]="{ 'is-invalid': (submitted) && asset.get('amount')?.errors }"
                                           id="amount" name="amount"
                                           placeholder="0.0">
                                    <div *ngIf="(submitted) && asset.get('amount')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="asset.get('amount')?.errors.required">amount is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="receivableAssetsLength()>1" class="col-md-2 form-group pt-4">
                                    <input (click)="deleteReceivableAssets(i)"
                                           class="btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-5 justify-content-end">
                                <input (click)="addReceivableAssets()" class="col-md-12 btn-sm btn-primary mt-4"
                                       type="button"
                                       value="+Add Receivable Assets"/>
                            </div>
                            <div class="col-md-4 justify-content-end ml-3">
                                <label class="title" for="total">Total</label>
                                <input class="form-control" disabled formControlName="receivableCurrentAssetsTotal"
                                       id="total" name="amount"
                                       placeholder="0.0" type="text">
                            </div>
                        </div>
                        <h5 class="col-md-12 mt-3">Inspecting Staffs</h5>
                        <div *ngFor="let asset of inspectingStaffsForm; let i = index;"
                             formArrayName="inspectingStaffs">
                            <div [formGroupName]="i" class="row col-md-12">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="inspectingStaff">Name</label>
                                    <input class="form-control" formControlName="name"
                                           [ngClass]="{ 'is-invalid': (submitted) && asset.get('name')?.errors }"
                                           id="inspectingStaff"
                                           name="inspectingStaff">
                                    <div *ngIf="(submitted) && asset.get('name')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="asset.get('name')?.errors.required">Name is
                                            required
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="title" for="position">Position</label>
                                    <input class="form-control" formControlName="position" id="position"
                                           [ngClass]="{ 'is-invalid': (submitted) && asset.get('position')?.errors }"
                                           name="position">
                                    <div *ngIf="(submitted) && asset.get('position')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="asset.get('position')?.errors.required">position is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="inspectingStaffsLength()>1" class="col-md-2 form-group pt-4">
                                    <input (click)="deleteInspectingStaffs(i)"
                                           class="btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12 justify-content-start">
                            <input (click)="addInspectingStaffs()"
                                   class="col-md-9 btn btn-sm btn-flat btn-primary"
                                   type="button"
                                   value="+Add Inspecting Staffs"/>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h5 class="col-md-12 mt-3">Payable Assets</h5>
                        <div *ngFor="let asset of payableAssetsForm; let i = index;"
                             formArrayName="payableAssets">
                            <div [formGroupName]="i" class="row col-md-12">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="particulars">Particulars</label>
                                    <input class="form-control" formControlName="particulars" id="particulars"
                                           [ngClass]="{ 'is-invalid': (submitted) && asset.get('particulars')?.errors }"
                                           name="party">
                                    <div *ngIf="(submitted) && asset.get('particulars')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="asset.get('particulars')?.errors.required">particulars is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 form-group ml-3">
                                    <label class="title" for="amount">Amount</label>
                                    <input (keyup)="onPayableAssetsValueChange('amount', 'payableCurrentAssetsTotal')"
                                           class="form-control" formControlName="amount"
                                           [ngClass]="{ 'is-invalid': (submitted) && asset.get('amount')?.errors }"
                                           id="amount" name="amount"
                                           placeholder="0.0">
                                    <div *ngIf="(submitted) && asset.get('amount')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="asset.get('amount')?.errors.required">amount is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="payableAssetsLength()>1" class="col-md-2 form-group pt-4">
                                    <input (click)="deletePayableAssets(i)" class="btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12">
                            <div class="col-md-5 justify-content-end">
                                <input (click)="addPayableAssets()" class="col-md-12 btn-sm btn-primary mt-4"
                                       type="button"
                                       value="+Add Payable Assets"/>
                            </div>
                            <div class="col-md-4 justify-content-end ml-3">
                                <label class="title" for="total">Total</label>
                                <input class="form-control" disabled formControlName="payableCurrentAssetsTotal"
                                       id="total" name="amount"
                                       placeholder="0.0" type="text">
                            </div>
                        </div>
                        <h5 class="col-md-12 mt-3">Bank Exposure</h5>
                        <div *ngFor="let asset of bankExposureForm; let i = index;"
                             formArrayName="bankExposures">
                            <div [formGroupName]="i" class="row col-md-12">
                                <div class="col-md-5 form-group">
                                    <label class="title" for="bankName">Bank Name</label>
                                    <input class="form-control" formControlName="bankName" id="bankName"
                                           [ngClass]="{ 'is-invalid': (submitted) && asset.get('bankName')?.errors }"
                                           name="bankName">
                                    <div *ngIf="(submitted) && asset.get('bankName')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="asset.get('bankName')?.errors.required">bank Name is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="title" for="amount">Amount</label>
                                    <input class="form-control" formControlName="amount" id="amount"
                                           [ngClass]="{ 'is-invalid': (submitted) && asset.get('amount')?.errors }"
                                           name="amount" placeholder="0.0">
                                    <div *ngIf="(submitted) && asset.get('amount')?.invalid"
                                         class="invalid-feedback">
                                        <div *ngIf="asset.get('amount')?.errors.required">amount is
                                            required
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="bankExposureLength()>1" class="col-md-2 form-group pt-4">
                                    <input (click)="deleteBankExposure(i)" class="btn btn-sm btn-danger btn-primary"
                                           type="button" value="Delete"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12 justify-content-start">
                            <input (click)="addBankExposure()" class="col-md-9 btn btn-sm btn-flat btn-primary"
                                   type="button"
                                   value="+Add Bank Exposure"/>
                        </div>
                    </div>
                    <div class="col-md-12 mt-4">
                        <div class="form-group">
                            <label class="title" for="overallFindings">Overall Findings / Comment of CAI</label>
                            <textarea class="form-control" formControlName="overAllFindings"
                                      id="overAllFindings" name="overAllFindings"
                                      [ngClass]="{ 'is-invalid': (submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('overAllFindings')?.errors }"
                                      placeholder="overall findings / comments of CAI"
                                      row="3" type="text"></textarea>
                            <div *ngIf="(submitted) && siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('overAllFindings')?.invalid"
                                 class="invalid-feedback">
                                <span *ngIf="siteVisitFormGroup.get('currentAssetsInspectionDetails')?.get('overAllFindings')?.errors.required">Comments required</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="fromProfile" class="py-4 d-flex justify-content-end">
                <button (click)="onSubmit()" nbButton type="button">save</button>
            </div>
        </form>
    </nb-card-body>
</nb-card>
