<div class="row">
    <div class="col-md-12" >
        <nb-card>
            <nb-card-header>
                COUNTER PARTY RISK RATING
            </nb-card-header>
            <nb-card-body>
                <div class="col-sm-12">
                    <div class="col-sm-6 float-left">
                        <label><b>Sign Sheet Upload</b></label>
                        <br>
                        <input *ngIf="fromProfile"
                               type="file"
                               accept="application/pdf"
                               placeholder="Upload"
                               nbButton (input)="upload($event, 'crg')">
                        <span *ngIf="data?.file" class="col-md-3 img-hover flex-wrap"
                              nbTooltip="CRG CCBL">
                            <a (click)="commonService.openDocument(data?.file?.docPath)" class="cursor"><em
                                    [className]="commonService.SET_CLASS_NAME"></em></a>
                        </span>
                        <br><br>
                        <div>
                            <label for="score"><b>Obtained Score :</b></label>
                            <input [readOnly]="!fromProfile" [(ngModel)]="obtainedScore" (change)="calculateCCBL()" name="obtainedScore" id="score" nbInput>
                            <br>
                            <br>
                            <label><b>Fiscal Year :</b></label>
                            <nb-select placeholder="Select Fiscal Year" [(ngModel)]="selectedFiscalYear">
                                <nb-option name="selectedFiscalYear" [hidden]="!fromProfile"
                                           *ngFor="let fiscalYear of fiscalYearArray" [value]="fiscalYear.year">{{fiscalYear.year}}
                                    <ng-container *ngIf="fiscalYear?.isCurrentYear"> (Current Year)</ng-container>
                                </nb-option>
                            </nb-select>
                            <br>
                            <br>
                            <table class="table table-responsive-sm sb-small table-sm table-bordered">
                                <tr>
                                    <th style="width: 50%" class="sb-bg-dark">Credit Scoring</th>
                                    <td style="width: 50%">{{obtainedScore}}</td>
                                </tr>
                                <tr>
                                    <th style="width: 50%" class="sb-bg-dark">CCBL Rating</th>
                                    <td style="width: 50%">{{thresholdPoint}}</td>
                                </tr>
                                <tr>
                                    <th style="width: 50%" class="sb-bg-dark">Outcome</th>
                                    <td style="width: 50%">{{thresholdOutcome}}</td>
                                </tr>
                            </table>
                            <br>
                            <ng-container *ngIf="isWaiver">
                                <label>Proceed for waiver?</label>
                                <nb-select placeholder="Select Yes/No" [(ngModel)]="waiverValue">
                                    <nb-option name="yesNo" [hidden]="!fromProfile"
                                               *ngFor="let ans of yesNo" [value]="ans">{{ans}}
                                    </nb-option>
                                </nb-select>
                            </ng-container>
                        </div>
                    </div>
                    <div class="col-sm-6 float-right">
                        <label><b>Sign Sheet Upload of ESRM</b></label>
                        <br>
                        <input *ngIf="fromProfile"
                               type="file"
                               accept="application/pdf"
                               placeholder="Upload"
                               nbButton (input)="upload($event, 'esrm')">
                        <span *ngIf="data?.esrmFile" class="col-md-3 img-hover flex-wrap"
                              nbTooltip="CRG CCBL">
                            <a (click)="commonService.openDocument(data?.esrmFile?.docPath)" class="cursor"><em
                                    [className]="commonService.SET_CLASS_NAME"></em></a>
                        </span>
                        <br>
                        <br>
                        <label><b>ESRM RATING :</b></label>
                        <nb-select placeholder="Select Rating" [(ngModel)]="esrmRating">
                            <nb-option name="esrmRating" [hidden]="!fromProfile"
                                       *ngFor="let es of esrm" [value]="es">{{es}}</nb-option>
                        </nb-select>
                        <br> <br>
                        <label><b>External Rating:</b></label>
                        <input name="externalRating" id="externalRating" [(ngModel)]="externalRating" nbInput>
                    </div>

                </div>
            </nb-card-body>
        </nb-card>
        <button *ngIf="fromProfile" class="float-right" nbButton (click)="save()">Save</button>
    </div>
</div>
