<div class="col-md-12">
    <app-view-security-table [customerInfo]="customerInfo"
    (security)="onEdit($event)" (emitter)="onEmitRefresh($event)"
    (securityForSiteVisit)="onSiteVisit($event)" (shareSecurity)="onEditShareSecurity($event)"></app-view-security-table>
</div>
<div *ngIf="isSiteVisit">
    <app-fix-asset-collateral (emitter)="onEmitRefresh($event)" [securityData]="securityValue"></app-fix-asset-collateral>
</div>
<nb-card *ngIf="!isSiteVisit">
    <nb-card-body>
        <h2>Security</h2>
<div class="row">
    <div class="col-md-12 text-right">
        <nb-radio-group [(ngModel)]="calendarType" class="d-inline-flex"
                        name="securityInitialInfoCalendarType">
            <nb-radio value="AD">AD</nb-radio>
            <nb-radio value="BS">BS</nb-radio>
        </nb-radio-group>
    </div>
</div>
<div class="d-flex justify-content-end">
</div>
    <div class="row" id="security">
        <div class="col-md-12">
    <div class="form-group">

        <div class="font-weight-bold" *ngIf="!isEdit">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Choose Security Type</label>
                        <select class="form-control" (change)="change(selectedSecurity)" [(ngModel)]="selectedSecurity"
                                (ngModelChange)="clearValidationState()"
                                [ngModelOptions]="{standalone: true}">
                            <option *ngFor="let type of securityTypes" [value]="type?.key">
                                {{type?.value === 'Hypothecation of Stock' ? 'Hypothecation of Stocks & Receivables' :type?.value}}
                            </option>
                        </select>
                    </div>
                </div>
            </div>
            <hr>
        </div>
        <nb-checkbox *ngIf="newSecurity && !shareSelected" [(ngModel)]="isApprovedSecurity" name="approved"> Is it Approved Security ? <i style="color: red">(If YES please Tick)</i></nb-checkbox>
        <app-vehicle #vehicleSecurity *ngIf="vehicleSelected" [calendarType]="calendarType"
                     [security]="securityValue" [customerType]="customerType" [isEdit]="isEdit"></app-vehicle>
        <app-apartment #apartmentSecurity *ngIf="apartmentSelected" [calendarType]="calendarType"
                       [security]="securityValue" [isEdit]="isEdit"></app-apartment>
        <app-land #landSecurity *ngIf="landSelected" [calendarType]="calendarType"
                  [security]="securityValue" [isEdit]="isEdit"></app-land>
        <app-land-building #landBuildingSecurity *ngIf="landBuildingSelected" [calendarType]="calendarType"
                           [security]="securityValue" [customerType]="customerType" [isEdit]="isEdit"></app-land-building>
        <app-plant-machinery #plantMachinerySecurity *ngIf="plantSelected" [calendarType]="calendarType"
                             [security]="securityValue" [isEdit]="isEdit"></app-plant-machinery>
        <app-fixed-deposit #fixedDepositSecurity *ngIf="depositSelected"
                           [calendarType]="calendarType" [security]="securityValue"
                           [isEdit]="isEdit"></app-fixed-deposit>
        <app-share #shareSecurityComponent *ngIf="shareSelected"
                   [security]="securityValue" [isEdit]="isEdit" [calendarType]="calendarType" [customerBatch]="customerInfo?.customerShareBatches"></app-share>
        <app-hypothecation-of-stock #hypothecationSecurity *ngIf="hypothecationOfStockSelected"
                                    [security]="securityValue" [isEdit]="isEdit" [calendarType]="calendarType"></app-hypothecation-of-stock>
        <app-corporation-guarantee #corporateGuaranteeSecurity *ngIf="corporateGuaranteeSelected"
                                   [security]="securityValue" [isEdit]="isEdit" [calendarType]="calendarType"></app-corporation-guarantee>
        <app-personal-guarantee #personalGuaranteeSecurity *ngIf="personalGuaranteeSelected"
                                [security]="securityValue" [isEdit]="isEdit" [calendarType]="calendarType"></app-personal-guarantee>
        <app-insurance-policy #insurancePolicySecurity *ngIf="insurancePolicySelected"
                              [calendarType]="calendarType" [security]="securityValue"
                              [isEdit]="isEdit" [calendarType]="calendarType"></app-insurance-policy>
        <app-assignment-of-receivable #assignmentOfReceivableSecurity *ngIf="assignmentOfReceivableSelected"
                                      [security]="securityValue" [isEdit]="isEdit" [calendarType]="calendarType"></app-assignment-of-receivable>
        <app-lease-assignment #leaseAssignmentSecurity *ngIf="leaseAssignmentSelected"
                              [security]="securityValue" [isEdit]="isEdit" [calendarType]="calendarType"></app-lease-assignment>
        <app-other-security #otherSecurity *ngIf="otherSecuritySelected"
                            [security]="securityValue" [isEdit]="isEdit" [calendarType]="calendarType"></app-other-security>

    </div>
</div>
</div>
<div *ngIf="fromProfile || !isSiteVisit" class="py-4 d-flex justify-content-end">
    <button (click)="onSubmit()" nbButton>save</button>
</div>
</nb-card-body>
</nb-card>
