<nb-card class="p-3">
    <div class="box-header with-border">
        <h2 class="box-title title">Details Of Plant And Machinery Security Before Completion</h2>
    </div>
    <div [formGroup]="plantMachineryForm">
        <div *ngFor="let plant of plantMachineryForm.get('plantMachinery')['controls']; let i = index"
             class="font-weight-bold"
             formArrayName="plantMachinery">
            <div [formGroupName]="i">
                <input type="checkbox" formControlName="plantOtherBranchChecked"> Property on another branch
                location
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="model">Model No.</label>
                            <input class="form-control rounded" formControlName="model"
                                   id="model"
                                   name="model" placeholder="Model No."
                                   type="text" required/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="quotation">Quotation/Valuation Amount</label>
                            <input class="form-control rounded" formControlName="quotation"
                                   id="quotation"
                                   name="quotation" placeholder="Quotation/Valuation Amount"
                                   type="text"/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="supplier">Supplier</label>
                            <input class="form-control rounded" formControlName="supplier"
                                   id="supplier"
                                   name="supplier" placeholder="Supplier"
                                   type="text"/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="downPay">Down payment</label>
                            <input class="form-control rounded" formControlName="downPay"
                                   id="downPay"
                                   name="downPay" placeholder="Down payment"
                                   type="text"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="loanExp">Loan Exposure</label>
                            <input class="form-control rounded" formControlName="loanExp"
                                   id="loanExp"
                                   name="loanExp" placeholder="0.00"
                                   type="text"/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div *ngIf="plantMachineryForm.get(['plantMachinery',i,'plantOtherBranchChecked']).value">
                            <div class="form-group">
                                <label>Select Branch</label>
                                <ng-select
                                        [multiple]="false"
                                        bindLabel="name"
                                        formControlName="plantBranch"
                                        placeholder="">
                                    <ng-option *ngFor="let branch of branchLists"
                                               [value]="branch">{{branch.name}}</ng-option>
                                </ng-select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Valuator Name</label>
                            <ng-select [multiple]="false"
                                       bindLabel="name"
                                       placeholder=""
                                       formControlName="plantMachineryValuator" (click)="valuator(i)">
                                <ng-option [value]="null">Select Valuator Name</ng-option>
                                <ng-option *ngFor="let valuator of securityValuator.plantValuator[i]"
                                           [value]="valuator">{{valuator.name}}</ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="plantMachineryValuatorDate">Valuated Date</label>
                            <input *ngIf="calendarType === 'AD'" class="form-control rounded"
                                   formControlName="plantMachineryValuatorDate"
                                   id="plantMachineryValuatorDate"
                                   name="plantMachineryValuatorDate" placeholder="Valuated Date"
                                   [nbDatepicker]="plantMachineryValuatorDate"
                                   type="text"/>
                            <app-calendar
                                    (messageToEmit)="plantMachineryForm.get(['plantMachinery',i,'plantMachineryValuatorDate']).patchValue($event?.eDate)"
                                    *ngIf="calendarType === 'BS'"
                                    [ePreDate]="plantMachineryForm.get(['plantMachinery',i,'plantMachineryValuatorDate']).value"></app-calendar>
                            <nb-datepicker #plantMachineryValuatorDate></nb-datepicker>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="plantMachineryValuatorRepresentative">Valuator Representative
                                Name</label>
                            <input class="form-control rounded"
                                   formControlName="plantMachineryValuatorRepresentative"
                                   id="plantMachineryValuatorRepresentative"
                                   name="plantMachineryValuatorRepresentative"
                                   placeholder="Valuator Representative Name"
                                   type="text"/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="plantMachineryStaffRepresentativeDesignation">Staff
                                Representative Designation 1</label>
                            <select class="form-control rounded"
                                    formControlName="plantMachineryStaffRepresentativeDesignation"
                                    id="plantMachineryStaffRepresentativeDesignation"
                                    name="plantMachineryStaffRepresentativeDesignation">
                                <option [ngValue]="null" hidden>Staff Representative Designation 1</option>
                                <option *ngFor="let designation of designationList"
                                        [ngValue]="designation?.roleName">{{designation?.roleName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="plantMachineryStaffRepresentativeName">Staff Representative
                                Name 1</label>
                            <input class="form-control rounded"
                                   formControlName="plantMachineryStaffRepresentativeName"
                                   id="plantMachineryStaffRepresentativeName"
                                   name="plantMachineryStaffRepresentativeName"
                                   placeholder="Staff Representative Name 1"
                                   type="text"/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="plantMachineryStaffRepresentativeDesignation2">Staff
                                Representative Designation 2</label>
                            <select class="form-control rounded"
                                    formControlName="plantMachineryStaffRepresentativeDesignation2"
                                    id="plantMachineryStaffRepresentativeDesignation2"
                                    name="plantMachineryStaffRepresentativeDesignation2">
                                <option [ngValue]="null">Staff Representative Designation 2</option>
                                <option *ngFor="let designation of designationList"
                                        [ngValue]="designation?.roleName">{{designation?.roleName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="title" for="plantMachineryStaffRepresentativeName2">Staff Representative
                                Name 2</label>
                            <input class="form-control rounded"
                                   formControlName="plantMachineryStaffRepresentativeName2"
                                   id="plantMachineryStaffRepresentativeName2"
                                   name="plantMachineryStaffRepresentativeName2"
                                   placeholder="Staff Representative Name2"
                                   type="text"/>
                        </div>
                    </div>

                    <div *ngIf="plantMachineryForm.get('plantMachinery')['length'] > 1" class="col-md-1 pt-4">
                        <input (click)="removePlantMachineryForm(i)"
                               class="align-self-end btn btn-sm btn-danger btn-primary"
                               type="button" value="Delete"/>
                    </div>
                </div>
            </div>
            <hr>
        </div>
        <div class="text-right">
            <input (click)="addPlantAndMachineryForm()" class="btn btn-sm btn-flat btn-primary"
                   type="button"
                   value="Add Plant and Machine"/>
        </div>
    </div>
</nb-card>
