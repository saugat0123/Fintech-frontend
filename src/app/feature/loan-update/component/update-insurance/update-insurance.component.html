<nb-card>
  <nb-card-header>Update Insurance</nb-card-header>
  <nb-card-body>
    <form (ngSubmit)="submit()" [formGroup]="form">
      <div formArrayName="insurances">
        <div *ngFor="let control of form.get('insurances')['controls']">
          <div [formGroup]="control">
            <div class="row">
              <div class="col-md-4 form-group">
                <label for="insuranceCompany"><strong>Policy Number</strong></label>
                <input class="form-control" formControlName="policyNumber" id="policyNumber"
                       placeholder="Policy Number"
                       type="text">
              </div>
            </div>
            <div class="form-group">
              <label for="insuranceCompany"><strong>Insurance Company</strong></label>
              <select class="form-control" formControlName="company" id="insuranceCompany">
                <option [ngValue]="null" hidden>Select Insurance Company</option>
                <option *ngFor="let insuranceCompany of insuranceCompanyList"
                        [ngValue]="insuranceCompany.id">{{insuranceCompany.name}}</option>
              </select>
            </div>
            <div class="row">
              <div class="col form-group">
                <label for="insuredAmount"><strong>Insured Amount</strong></label>
                <input class="form-control" formControlName="insuredAmount" id="insuredAmount"
                       type="text">
              </div>
              <div class="col form-group">
                <label for="premiumAmount"><strong>Premium Amount</strong></label>
                <input class="form-control" formControlName="premiumAmount" id="premiumAmount"
                       type="text">
              </div>

              <div class="col form-group">
                <label for="issuedDate"><strong>Issued Date</strong></label>
                <input [nbDatepicker]="issuedDate"
                       [ngClass]="{ 'is-invalid': (isSubmitted) && insuranceControls.issuedDate.errors}"
                       class="form-control" formControlName="issuedDate"
                       id="issuedDate" placeholder="03/04/2020"
                       type="text">
                <nb-datepicker #issuedDate></nb-datepicker>
              </div>
              <div class="col form-group">
                <label for="expiryDate"><strong>Expiry Date</strong></label>
                <input [nbDatepicker]="expiryDate"
                       [ngClass]="{ 'is-invalid': (isSubmitted) && insuranceControls.expiryDate.errors}"
                       class="form-control"
                       formControlName="expiryDate"
                       id="expiryDate" placeholder="03/04/2021"
                       required type="text">
                <nb-datepicker #expiryDate [min]="returnTodayDate()"></nb-datepicker>
              </div>
            </div>
            <div class="form-group">
              <label for="policyType"><strong>Insurance Policy Type</strong></label>
              <textarea class="form-control" formControlName="policyType"
                        id="policyType"
                        rows="4">
                </textarea>
            </div>
          </div>
          <hr />
        </div>
      </div>
      <div class="form-group">
        <button nbButton type="submit" [disabled]="form.invalid"><i class="fa fa-save"></i></button>
      </div>
    </form>
  </nb-card-body>
</nb-card>
