<nb-card>
    <nb-card-header>
        <h3>{{memoTask}} Memo</h3>
    </nb-card-header>
    <form (ngSubmit)="onSubmit()" [formGroup]="memoComposeForm">
        <nb-card-body>
            <div class="col-md-12">
                <div class="form-group">
                    <input type="hidden" formControlName="id" [hidden]="true">
                </div>
                <div class="form-group">
                    <input class="form-control" formControlName="subject" placeholder="Subject:" [ngClass]="{
                               'is-invalid': subject.invalid && (subject.dirty || subject.touched),
                                'is-valid': !subject.invalid && (subject.dirty || subject.touched)
                                }">
                </div>
                <div class="form-group">
                    <input class="form-control" formControlName="refNumber" placeholder="Reference No:" [ngClass]="{
                               'is-invalid': refNumber.invalid && (refNumber.dirty || refNumber.touched),
                                'is-valid': !refNumber.invalid && (refNumber.dirty || refNumber.touched)
                                }">
                </div>
                <div class="form-group">
                    <ng-select
                            [closeOnSelect]="true"
                            [hideSelected]="true"
                            [items]="memoTypes$"
                            [multiple]="false"
                            bindLabel="name"
                            formControlName="memoType"
                            placeholder="Select Memo Type" [ngClass]="{
                               'is-invalid': memoType.invalid && (memoType.dirty || memoType.touched),
                                'is-valid': !memoType.invalid && (memoType.dirty || memoType.touched)
                                }">
                    </ng-select>
                </div>
                <div class="form-group">
                    <ng-select
                            [closeOnSelect]="true"
                            [hideSelected]="true"
                            [items]="users$"
                            [multiple]="false"
                            bindLabel="name"
                            formControlName="sentBy"
                            placeholder="Sending By:" [ngClass]="{
                               'is-invalid': sentBy.invalid && (sentBy.dirty || sentBy.touched),
                                'is-valid': !sentBy.invalid && (sentBy.dirty || sentBy.touched)
                                }">
                    </ng-select>
                </div>
                <div class="form-group">
                    <ng-select
                            [closeOnSelect]="true"
                            [hideSelected]="true"
                            [items]="users$"
                            [multiple]="false"
                            bindLabel="name"
                            formControlName="sentTo"
                            placeholder="Sending To:" [ngClass]="{
                               'is-invalid': sentTo.invalid && (sentTo.dirty || sentTo.touched),
                                'is-valid': !sentTo.invalid && (sentTo.dirty || sentTo.touched)
                                }">
                    </ng-select>
                </div>
                <div class="form-group">
                    <ng-select
                            [closeOnSelect]="false"
                            [hideSelected]="true"
                            [items]="users$"
                            [multiple]="true"
                            bindLabel="name"
                            formControlName="cc"
                            placeholder="CC:">
                    </ng-select>
                </div>
                <div class="form-group">
                    <ng-select
                            [closeOnSelect]="false"
                            [hideSelected]="true"
                            [items]="users$"
                            [multiple]="true"
                            bindLabel="name"
                            formControlName="bcc"
                            placeholder="BCC:">
                    </ng-select>
                </div>
                <div class="form-group">
                    <quill-editor formControlName="content"
                                  placeholder="Insert memo content..." [ngClass]="{
                               'is-invalid': content.invalid && (content.dirty || content.touched),
                                'is-valid': !content.invalid && (content.dirty || content.touched)
                                }"></quill-editor>
                </div>
                <div class="form-group">
                    <div class="btn btn-default btn-file">
                        <i class="fa fa-paperclip"></i> Attachment
                        <input name="attachment" type="file">
                    </div>
                    <p class="help-block">Max. 32MB</p>
                </div>
            </div>

        </nb-card-body>
        <nb-card-footer>
            <div class="col-md-12">
                <div class="float-left">
                    <button nbButton status="warning" size="small" type="reset"><i class="fa fa-times"></i>
                        Discard
                    </button>
                </div>

                <div class="float-right">
                    <button nbButton status="primary" size="small" type="button">
                        <i class="fa fa-pencil"></i> Draft
                    </button>
                    <span class="m-1"></span>
                    <button nbButton status="success" size="small" type="submit" [disabled]="!memoComposeForm.valid">
                        <i class="fa fa-envelope-o"></i> Send
                    </button>
                </div>
            </div>
            <div class="clearfix"></div>
        </nb-card-footer>
    </form>
</nb-card>
