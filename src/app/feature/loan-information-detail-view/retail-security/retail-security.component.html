<div class="row mt-3">
    <div class="col-md-12">
        <table class="table-bordered table sb-small table-responsive-md table-sm">
            <tr class="sb-bg-dark text-white">
                <th>Security Type</th>
                <th>Particulars</th>
                <th>Fair Market Value</th>
            </tr>
                  <tr *ngIf="landSelected">
                      <td>Land Security</td>
                      <td>
                          <table class="table-bordered table sb-small table-responsive-md table-sm">
                              <thead>
                              <tr class="sb-bg-dark text-white">
                                  <th>Security</th>
                                  <th>Owner</th>
                                  <th>Location</th>
                                  <th>{{formData['initialForm']['landDetails'][0]['locationDetail'] ? 'Plot No., Area Format, Area' : 'Plot No.'}}</th>
                                  <th>Valuation Date and Valuator Name</th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let landDetails of formData['initialForm']['landDetails']; let i= index">
                                  <td>Land - {{i+1}}</td>
                                  <td>{{landDetails?.owner || 'NA'}}</td>
                                  <td>{{landDetails?.location || 'NA'}}</td>
                                  <td>
                                      <ng-container *ngIf="landDetails['locationDetail']; else oldFormat">
                                          <span *ngFor="let loDetail of landDetails['locationDetail']">
                                              {{loDetail?.plotNumber}}, {{loDetail?.areaFormat}}, {{loDetail?.area}}
                                              <br>
                                          </span>
                                      </ng-container>

                                      <ng-template #oldFormat>
                                          <span>{{landDetails?.plotNumber || 'NA'}}</span>
                                      </ng-template>
                                  </td>
                                  <td>{{landDetails?.landValuatorDate ? (landDetails?.landValuatorDate | date) : 'NA'}}, {{landDetails?.landValuator?.name || 'NA'}}</td>
                              </tr>
                              </tbody>
                          </table>
                          <table class="table-bordered table sb-small table-responsive-md table-sm">
                              <thead>
                              <tr class="sb-bg-dark text-white">
                                  <th>Particulars</th>
                                  <th>MV</th>
                                  <th *ngIf="isVisible">GV</th>
                                  <th>FMV</th>
                                  <th>DV</th>
                              </tr>
                              </thead>
                              <tr *ngFor="let landDetails of formData['initialForm']['landDetails']; let i= index">
                                  <td>Land {{i+1}}</td>
                                  <td>{{(landDetails?.landConsideredValue | currencyFormatter) || 'NA'}}</td>
                                  <td *ngIf="isVisible">{{(landDetails?.governmentValue | currencyFormatter) || 'NA'}}</td>
                                  <td>{{(landDetails?.marketValue | currencyFormatter) || 'NA'}}</td>
                                  <td>{{(landDetails?.distressValue | currencyFormatter) || 'NA'}}</td>
                              </tr>
                              <tr>
                                  <td class="font-weight-bold">Total</td>
                                  <td class="font-weight-bold">{{(getTotal('landDetails', 'landConsideredValue')) | currencyFormatter}}</td>
                                  <td *ngIf="isVisible" class="font-weight-bold">{{(getTotal('landDetails', 'governmentValue')) | currencyFormatter}}</td>
                                  <td class="font-weight-bold">{{(getTotal('landDetails', 'marketValue')) | currencyFormatter}}</td>
                                  <td class="font-weight-bold">{{(getTotal('landDetails', 'distressValue')) | currencyFormatter}}</td>
                              </tr>
                          </table>
                      </td>
                      <td class="font-weight-bold">{{(getTotal('landDetails', 'marketValue')) | currencyFormatter}}</td>
                  </tr>
                  <tr *ngIf="landBuilding">
                      <td>Land & Building Security</td>
                      <td>
                          <table class="table-bordered table sb-small table-responsive-md table-sm">
                              <thead>
                              <tr class="sb-bg-dark text-white">
                                  <th>Security</th>
                                  <th>Owner</th>
                                  <th>Location</th>
                                  <th>{{formData['initialForm']['landBuilding'][0]['locationDetail'] ? 'Plot No., Area Format, Area' : 'Plot No.'}}</th>
                                  <th>Valuation Date and Valuator Name</th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let landBuilding of formData['initialForm']['landBuilding']; let i= index">
                                  <td>Land Building - {{i+1}}</td>
                                  <td>{{landBuilding?.owner || 'NA'}}</td>
                                  <td>{{landBuilding?.location || 'NA'}}</td>
                                  <td>
                                      <ng-container *ngIf="landBuilding['locationDetail']; else oldFormatlb">
                                          <span *ngFor="let loDetail of landBuilding['locationDetail']">
                                              {{loDetail?.plotNumber}}, {{loDetail?.areaFormat}}, {{loDetail?.area}}
                                          </span>
                                      </ng-container>
                                      <ng-template #oldFormatlb>
                                          {{landBuilding?.plotNumber || 'NA'}}
                                      </ng-template>
                                  </td>
                                  <td>{{landBuilding?.buildingValuatorDate ? (landBuilding?.buildingValuatorDate | date) : 'NA'}}, {{landBuilding?.buildingValuatorDate?.name || 'NA'}}</td>
                              </tr>
                              </tbody>
                          </table>
                          <table class="table-bordered table sb-small table-responsive-md table-sm">
                              <thead>
                              <tr class="sb-bg-dark text-white">
                                  <th>Particulars</th>
                                  <th>MV</th>
                                  <th *ngIf="isVisible">GV</th>
                                  <th>FMV</th>
                                  <th>DV</th>
                              </tr>
                              </thead>
                              <tr *ngFor="let landBuilding of formData['initialForm']['landBuilding']; let i= index">
                                  <td>Land & Building {{i+1}}</td>
                                  <td>{{(landBuilding?.considerValue | currencyFormatter)|| 'NA'}}</td>
                                  <td *ngIf="isVisible">{{(landBuilding?.buildingGovernmentValue | currencyFormatter) || 'NA'}}</td>
                                  <td>{{(landBuilding?.marketValue | currencyFormatter) || 'NA'}}</td>
                                  <td>{{(landBuilding?.distressValue | currencyFormatter) || 'NA'}}</td>
                              </tr>
                              <tr>
                                  <td class="font-weight-bold">Total</td>
                                  <td class="font-weight-bold">{{(getTotal('landBuilding', 'landConsideredValue')) | currencyFormatter}}</td>
                                  <td *ngIf="isVisible" class="font-weight-bold">{{(getTotal('landBuilding', 'buildingGovernmentValue')) | currencyFormatter}}</td>
                                  <td class="font-weight-bold">{{(getTotal('landBuilding', 'marketValue')) | currencyFormatter}}</td>
                                  <td class="font-weight-bold">{{(getTotal('landBuilding', 'distressValue')) | currencyFormatter}}</td>
                              </tr>
                          </table>
                      </td>
                      <td class="font-weight-bold">{{getTotal('landBuilding', 'marketValue') | currencyFormatter}}</td>
                  </tr>
                  <tr *ngIf="apartmentSelected">
                      <td>Apartment  Security</td>
                      <td>
                          <table class="table-bordered table sb-small table-responsive-md table-sm">
                              <thead>
                              <tr class="sb-bg-dark text-white">
                                  <th>Security</th>
                                  <th>Apartment Name</th>
                                  <th>Apartment Description</th>
                                  <th>Build Area.</th>
                                  <th>Valuation Date and Valuator Name</th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let buildingDetails of formData['initialForm']['buildingDetails']; let i= index">
                                  <td>Apartment - {{i+1}}</td>
                                  <td>{{buildingDetails?.buildingName || 'NA'}}</td>
                                  <td>{{buildingDetails?.buildingDescription || 'NA'}}</td>
                                  <td>{{buildingDetails?.buildArea || 'NA'}}</td>
                                  <td>{{buildingDetails?.ApartmentValuatorDate ? (buildingDetails?.ApartmentValuatorDate | date) : 'NA'}}, {{buildingDetails?.ApartmentValuator?.name || 'NA'}}</td>
                              </tr>
                              </tbody>
                          </table>
                          <table class="table-bordered table sb-small table-responsive-md table-sm">
                              <thead>
                              <tr class="sb-bg-dark text-white">
                                  <th>Particulars</th>
                                  <th>MV</th>
                                  <th>FMV</th>
                                  <th>DV</th>
                              </tr>
                              </thead>
                              <tr *ngFor="let buildingDetails of formData['initialForm']['buildingDetails']; let i= index">
                                  <td>Apartment {{i+1}}</td>
                                  <td>Rs. {{buildingDetails?.totalCost | currencyFormatter}}</td>
                                  <td>Rs. {{buildingDetails?.buildingFairMarketValue | currencyFormatter}}</td>
                                  <td>{{(buildingDetails?.buildingDistressValue | currencyFormatter)|| 'NA'}}</td>
                              </tr>
                              <tr>
                                  <td class="font-weight-bold">Total</td>
                                  <td class="font-weight-bold">{{(getTotal('buildingDetails', 'distressValue')) | currencyFormatter}}</td>
                                  <td class="font-weight-bold">{{(getTotal('buildingDetails', 'buildingFairMarketValue')) | currencyFormatter}}</td>
                                  <td class="font-weight-bold">{{(getTotal('buildingDetails', 'buildingDistressValue')) | currencyFormatter}}</td>
                              </tr>
                          </table>
                      </td>
                      <td class="font-weight-bold">{{getTotal('buildingDetails', 'buildingFairMarketValue') | currencyFormatter}}</td>
                  </tr>
                  <tr *ngIf="vehicleSelected">
                      <td>Vehicle Security</td>
                      <td>
                          <table class="table-bordered table sb-small table-responsive-md table-sm">
                              <thead>
                              <tr class="sb-bg-dark text-white">
                                  <th>Security</th>
                                  <th>Model</th>
                                  <th>Chassis Number</th>
                                  <th>Showroom Commission</th>
                                  <th>Valuation Amount</th>
                                  <th>Down Payment</th>
                                  <th>Registration Number</th>
                                  <th>Registration Date(AD/BS)</th>
                                  <th>Engine Number</th>
                                  <th>Valuation Date and Valuator Name</th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let vehicleDetails of formData['initialForm']['vehicleDetails']; let i= index">
                                  <td>Vehicle - {{i+1}}</td>
                                  <td>{{vehicleDetails?.model || 'NA'}}</td>
                                  <td>{{vehicleDetails?.chasisNo || 'NA'}}</td>
                                  <td>{{vehicleDetails?.showroomCommission ? (vehicleDetails?.showroomCommission | currencyFormatter) : 'NA'}}</td>
                                  <td>{{vehicleDetails?.quotationAmount ? (vehicleDetails?.quotationAmount | currencyFormatter) : 'NA'}}</td>
                                  <td>{{vehicleDetails?.downPayment ? (vehicleDetails?.downPayment | currencyFormatter) : 'NA'}}</td>
                                  <td>{{vehicleDetails?.registrationNumber || 'NA'}}</td>
                                  <td>{{vehicleDetails?.registrationDate ? (vehicleDetails?.registrationDate | date) : 'NA'}}</td>
                                  <td>{{vehicleDetails?.engineNo || 'NA'}}</td>
                                  <td>{{vehicleDetails?.vehicalValuatorDate ? (vehicleDetails?.vehicalValuatorDate | date) : 'NA'}}, {{vehicleDetails?.vehicalValuator?.name || 'NA'}}</td>
                              </tr>
                              </tbody>
                          </table>
                      </td>
                  </tr>
            <tr *ngIf="hypothecation">
                <td>Hypothecation Over Stocks</td>
                <td>
                    <table class="table table-responsive-md sb-small">
                        <tr class="sb-bg-dark text-white">
                            <th class="sn">Security</th>
                            <th>Owner</th>
                            <th>Stock Location</th>
                            <th>Value</th>
                            <th>Collateral Owner Relationship</th>
                        </tr>
                        <tr   *ngFor="let hypoOfStock of formData['initialForm']['hypothecationOfStock']; let i= index">
                            <td>Hypothecation Over Stocks {{i + 1}}</td>
                            <td class="text-left pl-1" >{{hypoOfStock?.owner}}</td>
                            <td class="text-left pl-1" >{{hypoOfStock?.stock}}</td>
                            <td class="text-right pr-1" >Rs. {{hypoOfStock?.value | currencyFormatter}}</td>
                            <td class="text-right pr-1">{{hypoOfStock?.hypothecationOwnerRelationship}}</td>
                        </tr>
                    </table>
                </td>
                <td></td>
            </tr>
            <tr *ngIf="plantSelected">
                <td>Plant and Machinery Security</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>Model No.</th>
                            <th>Quotation/Valuation Amount</th>
                            <th>Supplier</th>
                            <th>Down Payment</th>
                            <th>Loan Exposure</th>
                            <th>Valuation Date and Valuator Name</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let plantDetail of formData['initialForm']['plantDetails']; let i= index">
                            <td>Plant and Machinery - {{i+1}}</td>
                            <td>{{plantDetail?.model || 'NA'}}</td>
                            <td>{{plantDetail?.quotation || 'NA'}}</td>
                            <td>{{plantDetail?.supplier || 'NA'}}</td>
                            <td>{{plantDetail?.downPay || 'NA'}}</td>
                            <td>{{plantDetail?.loanExp || 'NA'}}</td>
                            <td>{{plantDetail?.plantMachineryValuatorDate ? (plantDetail?.plantMachineryValuatorDate | date) : 'NA'}}, {{plantDetail?.plantMachineryValuator?.name || 'NA'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr *ngIf="depositSelected">
                <td>Fixed Deposit Receipt</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>FD Receipt Number</th>
                            <th>FD Account Holder Name</th>
                            <th>FD Account Number</th>
                            <th>FD Tenure Start Date</th>
                            <th>Amount</th>
                            <th>Expiry Date</th>
                            <th>Coupon Rate</th>
                            <th>Beneficiary</th>
                            <th>Remarks</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let depositDetail of formData['initialForm']['fixedDepositDetails']; let i= index">
                            <td>Fixed Deposit Details - {{i+1}}</td>
                            <td>{{depositDetail?.receiptNumber || 'NA'}}</td>
                            <td>{{depositDetail?.accountHolderName || 'NA'}}</td>
                            <td>{{depositDetail?.accountNumber || 'NA'}}</td>
                            <td>{{depositDetail?.tenureStartDate || 'NA'}}</td>
                            <td>{{(depositDetail?.amount | currencyFormatter) || 'NA'}}</td>
                            <td>{{depositDetail?.expiryDate || 'NA'}}</td>
                            <td>{{(depositDetail?.couponRate | currencyFormatter) || 'NA'}}</td>
                            <td>{{(depositDetail?.beneficiary | currencyFormatter) || 'NA'}}</td>
                            <td>{{depositDetail?.remarks || 'NA'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr *ngIf="shareSelected">
                <td>Share Security</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Price Updated Date</th>
                            <th>Average Day's for Share Price</th>
                            <th>Loan Promoter Percent</th>
                            <th>Loan Ordinary Percent</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{shareData?.sharePriceDate || 'NA'}}</td>
                            <td>{{shareData?.avgDaysForPrice || 'NA'}}</td>
                            <td>{{shareData?.loanShareRate?.promoter || 'NA'}}</td>
                            <td>{{shareData?.loanShareRate?.ordinary || 'NA'}}</td>
                        </tr>
                        </tbody>
                    </table>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>Company Name :: Company Code</th>
                            <th>Share Type</th>
                            <th>Number of Share Unit</th>
                            <th>Rate of Each Unit</th>
                            <th>Total</th>
                            <th>Market Value</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let shareSecurityDetail of shareData['shareSecurityDetails']; let i= index">
                            <td>Share - {{i+1}}</td>
                            <td>{{shareSecurityDetail?.companyName || 'NA'}}</td>
                            <td>{{shareSecurityDetail?.shareType || 'NA'}}</td>
                            <td>{{shareSecurityDetail?.totalShareUnit || 'NA'}}</td>
                            <td>{{shareSecurityDetail?.amountPerUnit || 'NA'}}</td>
                            <td>{{(shareSecurityDetail?.total | currencyFormatter) || 'NA'}}</td>
                            <td>{{(shareSecurityDetail?.consideredValue | currencyFormatter) || 'NA'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr *ngIf="assignment">
                <td>Assignment of Receivables</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>Amount</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let assignmentDetail of formData['initialForm']['assignmentOfReceivables']; let i= index">
                            <td>Assignment of Receivable - {{i+1}}</td>
                            <td>{{(assignmentDetail?.amount | currencyFormatter) || 'NA'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr *ngIf="corporate">
                <td>Corporate Guarantee</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>Name of Guarantor</th>
                            <th>Address</th>
                            <th>Key person</th>
                            <th>Email address</th>
                            <th>Phone number</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let assignmentDetail of formData['initialForm']['corporateGuarantee']; let i= index">
                            <td>Corporate Guarantee - {{i+1}}</td>
                            <td>{{assignmentDetail?.name || 'NA'}}</td>
                            <td>{{assignmentDetail?.address || 'NA'}}</td>
                            <td>{{assignmentDetail?.keyPerson || 'NA'}}</td>
                            <td>{{assignmentDetail?.email || 'NA'}}</td>
                            <td>{{assignmentDetail?.phoneNumber || 'NA'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr *ngIf="personal">
                <td>Personal Guarantee</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>Name of Guarantor</th>
                            <th>Address</th>
                            <th>Email address</th>
                            <th>Phone number</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let personalDetail of formData['initialForm']['personalGuarantee']; let i= index">
                            <td>Personal Guarantee - {{i+1}}</td>
                            <td>{{personalDetail?.name || 'NA'}}</td>
                            <td>{{personalDetail?.address || 'NA'}}</td>
                            <td>{{personalDetail?.email || 'NA'}}</td>
                            <td>{{personalDetail?.phoneNumber || 'NA'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr *ngIf="insurancePolicySelected">
                <td>Insurance Policy Security</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>Insured Amount</th>
                            <th>Insurance Company</th>
                            <th>Insurance Policy Start</th>
                            <th>Maturity Date</th>
                            <th>Insurance Policy Type</th>
                            <th>Surrender Value</th>
                            <th>Earliest Surrender Date</th>
                            <th>Market Value</th>
                            <th>Yearly Cash Back Amount</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let insuranceDetail of formData['initialForm']['insurancePolicy']; let i= index">
                            <td>Insurance Policy - {{i+1}}</td>
                            <td>{{(insuranceDetail?.insuredAmount | currencyFormatter) || 'NA'}}</td>
                            <td>{{insuranceDetail?.insuranceCompanyName || 'NA'}}</td>
                            <td>{{insuranceDetail?.policyStartDate || 'NA'}}</td>
                            <td>{{insuranceDetail?.maturityDate || 'NA'}}</td>
                            <td>{{insuranceDetail?.insurancePolicyType || 'NA'}}</td>
                            <td>{{(insuranceDetail?.surrenderValue | currencyFormatter) || 'NA'}}</td>
                            <td>{{insuranceDetail?.earlySurrenderDate || 'NA'}}</td>
                            <td>{{(insuranceDetail?.consideredValue | currencyFormatter) || 'NA'}}</td>
                            <td>{{(insuranceDetail?.cashBackAmount | currencyFormatter) || 'NA'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr *ngIf="assignments">
                <td>Lease Assignment</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>Other Detail</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let leaseDetail of formData['initialForm']['leaseAssignment']; let i= index">
                            <td>Lease Assignment - {{i+1}}</td>
                            <td [innerHTML]="leaseDetail?.otherDetail || 'NA'"></td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr *ngIf="securityOther">
                <td>Other Security</td>
                <td>
                    <table class="table-bordered table sb-small table-responsive-md table-sm">
                        <thead>
                        <tr class="sb-bg-dark text-white">
                            <th>Security</th>
                            <th>Other Detail</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let otherDetail of formData['initialForm']['otherSecurity']; let i= index">
                            <td>Other - {{i+1}}</td>
                            <td [innerHTML]="otherDetail?.otherDetail || 'NA'"></td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
                  <tr>
                      <td></td>
                      <td class="font-weight-bold">Total</td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>Documentation Required</td>
                      <td colspan="2" class="documentation">
                          <ul style="list-style-type: lower-alpha;" class="sb-small">
                              <ng-container *ngFor="let data of files; let index = index">
                                  <li class="text-left" colspan="2">{{data?.name}}</li>
                              </ng-container>
                          </ul>
                      </td>
                  </tr>

        </table>
    </div>
</div>

