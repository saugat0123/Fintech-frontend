<div *ngIf="proposalData?.data !==null ">
    <app-proposal-view *ngIf="loanDataHolder?.proposal"
                       [customerAllLoanList]="customerAllLoanList"
                       [proposalData]="proposalData"
                       [loanDataHolder]="loanDataHolder"></app-proposal-view>
</div>
<app-security-view *ngIf="loanHolder?.security?.data && (smallBusiness || consumerFinance)" [security]="loanHolder?.security"
                   [shareSecurityData]="loanHolder?.shareSecurity"
                   [securityId]="securityId"
                   [proposal]="proposalData"
                   [collateralData]="loanDataHolder?.collateralSiteVisits"
                   [docStatus]="loanDataHolder?.documentStatus"
                   (downloadSiteVisitDocument)="checkSiteVisitDocument($event)"></app-security-view>
<app-security-approved-view *ngIf="approvedSecurity && !approveSecurityAsProposed  && (smallBusiness || consumerFinance)" [security]="loanHolder?.security"
                            [shareSecurityData]="loanDataHolder?.shareSecurity"
                            [securityId]="securityId"
                            [docStatus]="loanDataHolder?.documentStatus"
                            [collateralData]="loanDataHolder?.collateralSiteVisits"
                            (downloadSiteVisitDocument)="checkSiteVisitDocument($event)"></app-security-approved-view>
<app-security-schedule *ngIf="smallBusiness || consumerFinance" [loanDataHolder]="loanDataHolder"></app-security-schedule>

<app-individual-view *ngIf="loanDataHolder?.loanCategory === 'INDIVIDUAL'"
                     [calendarType]="calendarType"
                     [loanDataHolder]="loanDataHolder"
                     [customerInfoData]="loanDataHolder?.loanHolder"
                     [individual]="loanDataHolder?.customerInfo"
                     [loanId]="loanId" [customerInfo]="loanHolder"></app-individual-view>

<app-company-info-view *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
                       [calendarType]="calendarType"
                       [formValue]="loanDataHolder?.companyInfo"
                       [loanId]="loanId"
                       [loanDataHolder]="loanDataHolder"
                       [customerInfo]="loanHolder"></app-company-info-view>
<div *ngIf="consumerFinance">
    <app-guarantor-view *ngIf="loanDataHolder?.taggedGuarantors?.length > 0"
                        [guarantorData]="loanDataHolder?.taggedGuarantors"></app-guarantor-view>
    <app-financial-view *ngIf="loanHolder?.financial && isIndividual && consumerFinance"
                        [customerType]="loanHolder?.customerType"
                        [formData]="loanHolder?.financial"></app-financial-view>
    <app-cicl-view *ngIf="loanDataHolder?.loanHolder?.cicl" [ciclValue]="loanDataHolder?.loanHolder?.cicl" [loanDataHolder]="loanDataHolder"></app-cicl-view>
    <app-dbr *ngIf="financial" [financialData] =  "financial" [proposalData]="proposalData"> </app-dbr>
    <ng-container *ngIf="checkedData?.waiverChecked">
        <tr class="text-white sb-bg-dark">
            <th>Waiver</th>
        </tr>
        <tr>
            <td class="text-left pl-1"><span [innerHTML]="proposalAllData?.waiverConclusionRecommendation || 'N/A' | safeHtml"></span></td>
        </tr>
    </ng-container>
    <ng-container *ngIf="checkedData?.deviationChecked">
        <tr class="text-white sb-bg-dark">
            <th>Deviation</th>
        </tr>
        <tr>
            <td class="text-left pl-1"><span [innerHTML]="proposalAllData?.deviationConclusionRecommendation || 'N/A' | safeHtml"></span></td>
        </tr>
    </ng-container>

</div><div *ngIf="smallBusiness">
    <app-guarantor-view *ngIf="loanDataHolder?.taggedGuarantors?.length > 0"
                        [guarantorData]="loanDataHolder?.taggedGuarantors"></app-guarantor-view>
    <app-cicl-view *ngIf="loanDataHolder?.loanHolder?.cicl" [ciclValue]="loanDataHolder?.loanHolder?.cicl" [loanDataHolder]="loanDataHolder"></app-cicl-view>
    <div *ngIf="financialKeys?.length > 0 && !isIndividual && smallBusiness">
        <ng-container  *ngFor="let title of financialKeys">
            <h6>{{title | financialPipe}}</h6>
            <hr>
            <div class="row">
                <app-financial-json-parser [financialJson]="financialData[title] | jsonParse"></app-financial-json-parser>
            </div>
        </ng-container>
    </div>
    <app-nta-mega-summary *ngIf="loanDataHolder?.loanHolder?.netTradingAssets && fiscalYearArray?.length > 0  && smallBusiness"
                          [fiscalYears]="fiscalYearArray"
                          [netTradingAssetsData]="loanDataHolder?.loanHolder?.netTradingAssets"></app-nta-mega-summary>

    <ng-container *ngIf="checkedData?.waiverChecked">
        <tr class="text-white sb-bg-dark">
            <th>Waiver</th>
        </tr>
        <tr>
            <td class="text-left pl-1"><span [innerHTML]="proposalAllData?.waiverConclusionRecommendation || 'N/A' | safeHtml"></span></td>
        </tr>
    </ng-container>
    <ng-container *ngIf="checkedData?.deviationChecked">
        <tr class="text-white sb-bg-dark">
            <th>Deviation</th>
        </tr>
        <tr>
            <td class="text-left pl-1"><span [innerHTML]="proposalAllData?.deviationConclusionRecommendation || 'N/A' | safeHtml"></span></td>
        </tr>
    </ng-container>

</div>
<app-cicl-view *ngIf="loanDataHolder?.loanHolder?.cicl && !consumerFinance && !smallBusiness" [ciclValue]="loanDataHolder?.loanHolder?.cicl" [loanDataHolder]="loanDataHolder"></app-cicl-view>

<div *ngIf="megaGroupEnabled && loanDataHolder?.loanHolder.mgroupInfo">
    <app-m-group-summary [mGroup]="loanDataHolder?.loanHolder.mgroupInfo"></app-m-group-summary>
</div>

<div *ngIf="productUtils.CBS_ENABLE">
    <div class="row mt-5">
        <div class="col-md-12">
            <p><strong>Group Details</strong>
            </p>
        </div>
        <div class="col-md-12">
            <app-cbs-table [customerInfo]="loanDataHolder.loanHolder"
                           *ngIf="loanDataHolder"></app-cbs-table>
        </div>
    </div>
</div>

<div *ngIf="!productUtils.CBS_ENABLE">
    <app-proposal-justification-summary *ngIf="loanDataHolder?.proposal"
                                        [customerAllLoanList]="customerAllLoanList"
                                        [proposalData]="proposalData"></app-proposal-justification-summary>
</div>

<app-security-view *ngIf="loanHolder?.security?.data && !consumerFinance && !smallBusiness" [security]="loanHolder?.security"
                   [shareSecurityData]="loanHolder?.shareSecurity"
                   [securityId]="securityId"
                   [proposal]="proposalData"
                   [collateralData]="loanDataHolder?.collateralSiteVisits"
                   [docStatus]="loanDataHolder?.documentStatus"
                   (downloadSiteVisitDocument)="checkSiteVisitDocument($event)"></app-security-view>
<app-security-approved-view *ngIf="approvedSecurity && !approveSecurityAsProposed  && !consumerFinance && !smallBusiness" [security]="loanHolder?.security"
                            [shareSecurityData]="loanDataHolder?.shareSecurity"
                            [securityId]="securityId"
                            [docStatus]="loanDataHolder?.documentStatus"
                            [collateralData]="loanDataHolder?.collateralSiteVisits"
                            (downloadSiteVisitDocument)="checkSiteVisitDocument($event)"></app-security-approved-view>
<app-security-schedule *ngIf="!smallBusiness && !consumerFinance" [loanDataHolder]="loanDataHolder"></app-security-schedule>

<app-financial-view *ngIf="loanHolder?.financial && isIndividual && !consumerFinance"
                    [customerType]="loanHolder?.customerType"
                    [formData]="loanHolder?.financial"></app-financial-view>
<div *ngIf="financialKeys?.length > 0 && !isIndividual && !smallBusiness">
    <ng-container  *ngFor="let title of financialKeys">
        <h6>{{title | financialPipe}}</h6>
        <hr>
        <div class="row">
            <app-financial-json-parser [financialJson]="financialData[title] | jsonParse"></app-financial-json-parser>
        </div>
    </ng-container>
</div>
<app-crg-gamma-detail-view
        *ngIf="loanDataHolder?.crgGamma"
        [formData]="loanDataHolder?.crgGamma">
</app-crg-gamma-detail-view>
<app-crg-alpha-detailed-view
        *ngIf="loanDataHolder?.creditRiskGradingAlpha"
        [loanTag]="loanDataHolder?.loan?.loanTag"
        [formData]="loanDataHolder?.creditRiskGradingAlpha">
</app-crg-alpha-detailed-view>
<app-crg-lambda-detail-view
        *ngIf="loanDataHolder?.creditRiskGradingLambda"
        [lambdaData]="loanDataHolder?.creditRiskGradingLambda">
</app-crg-lambda-detail-view>
<app-guarantor-view *ngIf="loanDataHolder?.taggedGuarantors?.length > 0 && !consumerFinance && !smallBusiness"
                    [guarantorData]="loanDataHolder?.taggedGuarantors"></app-guarantor-view>
<app-site-visit-view *ngIf="loanHolder?.siteVisit"
                     [siteVisit]="loanHolder?.siteVisit"></app-site-visit-view>
<!--    <app-net-trading-assets *ngIf="loanHolder?.netTradingAssets"
                            [fromProfile]="false"
                            [netTradingAssetsData]="loanHolder?.netTradingAssets"></app-net-trading-assets>
 -->
<ng-container *ngIf="(client === clientName?.ICFC) || (client === clientName?.LAXMIBANK); else otherBank">
    <app-nta-mega-summary *ngIf="loanHolder?.netTradingAssets && fiscalYearArray?.length > 0  && !smallBusiness"
                          [fiscalYears]="fiscalYearArray"
                          [netTradingAssetsData]="loanHolder?.netTradingAssets"></app-nta-mega-summary>
</ng-container>

<ng-template #otherBank>
    <app-nta-summary *ngIf="loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                     [fiscalYears]="fiscalYearArray"
                     [netTradingAssetsData]="loanHolder?.netTradingAssets"></app-nta-summary>
</ng-template>
<app-income-from-account-view *ngIf="!isIndividual" [individual]="isIndividual"
                              [data]="(bankingRelation)"></app-income-from-account-view>
<div *ngIf="loanDataHolder?.loanCategory.toLowerCase() === 'institution' && loanDataHolder.loanHolder?.data  !==null">
    <div class="col-md-12">
        <p><strong>Comments</strong>
        </p>
    </div>
    <app-comments
            [commentData]="loanDataHolder.loanHolder?.data"
            [fromProfile]="true"
            [view]="true">
    </app-comments>
<!--    <app-comments-summary-->
<!--            [formData]="dataFromComments"></app-comments-summary>-->
    <app-previous-security-summary *ngIf="previousSecuritySummary"
                                   [formData]="dataFromPreviousSecurity"></app-previous-security-summary>
</div>

<app-income-from-account-summery *ngIf="loanDataHolder?.loanHolder?.incomeFromAccount" [individual]="isIndividual"
                                 [formData]="loanDataHolder?.loanHolder?.incomeFromAccount"></app-income-from-account-summery>

<app-multi-banking-summary *ngIf="loanDataHolder?.loanHolder?.multiBanking"
                           [formData]="loanDataHolder?.loanHolder?.multiBanking"></app-multi-banking-summary>

<div *ngIf="loanDataHolder?.documentStatus?.toString()==='APPROVED'">

    <app-report-summary
            [approved]="true"
            *ngIf="loanDataHolder?.reportingInfoLog"
            [reportingInfoLevelLog]="loanDataHolder?.reportingInfoLog">
    </app-report-summary>
</div>
<div *ngIf="loanDataHolder?.documentStatus?.toString() !=='APPROVED'">
    <span><strong>Loan Reporting Information</strong></span>
    <app-report-summary
            [approved]="false"
            *ngIf="loanDataHolder?.reportingInfoLevels && loanDataHolder?.reportingInfoLevels?.length > 0; else noinfo"
            [reportingInfoLevels]="loanDataHolder?.reportingInfoLevels"></app-report-summary>
    <ng-template #noinfo>
        <p>No any information tagged</p>
    </ng-template>
</div>
<div *ngIf="loanDataHolder?.loanHolder?.reportingInfoLevels && loanDataHolder?.loanHolder?.reportingInfoLevels?.length > 0 && client !== clientName?.SHINE_RESUNGA">
    <span><strong>Customer Reporting Information</strong></span>
    <app-report-summary
            [approved]="false"
            [reportingInfoLevels]="loanDataHolder?.loanHolder?.reportingInfoLevels"></app-report-summary>
</div>

<app-insurance-view *ngIf="loanDataHolder?.loanHolder?.insurance && loanDataHolder?.loanHolder?.insurance.length > 0"
                    [insurance]="loanDataHolder?.loanHolder?.insurance"></app-insurance-view>
<!--<app-credit-checklist-general *ngIf="loanHolder?.creditChecklist" [formData]="loanHolder?.creditChecklist"
                              [fromProfile]="false" [customerType]="loanHolder?.customerType"></app-credit-checklist-general>-->
<app-credit-checklist-view *ngIf="loanDataHolder.loanHolder?.creditChecklist" [formData]="loanDataHolder.loanHolder?.creditChecklist"
                           [fromProfile]="false" [customerType]="loanDataHolder.loanHolder?.customerType"></app-credit-checklist-view>
<!--            <app-credit-risk-grading-gamma *ngIf="loanHolder?.crgGamma" [formData]="loanHolder?.crgGamma"-->
<!--                                           [fromProfile]="false"></app-credit-risk-grading-gamma>-->
<!--            <app-credit-grading *ngIf="loanHolder?.creditRiskGrading" [formData]="loanHolder?.creditRiskGrading"-->
<!--                                [fromProfile]="false"></app-credit-grading>-->

<app-all-document-view *ngIf="loanDataHolder" [loanDataHolder]="loanDataHolder" [siteVisitDocument]="siteVisitDocuments"></app-all-document-view>
