<app-individual-view *ngIf="loanDataHolder?.loanCategory === 'INDIVIDUAL'"
                     [calendarType]="calendarType"
                     [customerInfoData]="loanDataHolder?.loanHolder"
                     [individual]="loanDataHolder?.customerInfo"
                     [loanId]="loanId" [customerInfo]="loanHolder"></app-individual-view>
<app-company-info-view *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
                       [calendarType]="calendarType"
                       [formValue]="loanDataHolder?.companyInfo"
                       [loanId]="loanId" [customerInfo]="loanHolder"
                       [loanDataHolder]="loanDataHolder"
                       [customerAllLoanList]="customerAllLoanList"
                       [proposalData]="proposalData"></app-company-info-view>
<app-proposal-view *ngIf="loanDataHolder?.proposal"
                   [customerAllLoanList]="customerAllLoanList"
                   [proposalData]="proposalData"
                   [loanDataHolder]="loanDataHolder"></app-proposal-view>

<div *ngIf="productUtils.CBS_ENABLE">
    <div class="row mt-5">
        <div class="col-md-12">
            <p><strong>Group Details</strong>
            </p>
        </div>
        <div class="col-md-12">
            <app-cbs-table [customerInfo]="loanDataHolder.loanHolder"
                           *ngIf="loanDataHolder"></app-cbs-table>
        </div>
    </div>
</div>

<app-security-view *ngIf="loanHolder?.security" [security]="loanHolder?.security"
                   [shareSecurityData]="loanHolder?.shareSecurity"
                   [securityId]="securityId"
                   (downloadSiteVisitDocument)="checkSiteVisitDocument($event)"></app-security-view>

<app-site-visit-view *ngIf="loanHolder?.siteVisit"
                     [siteVisit]="loanHolder?.siteVisit"></app-site-visit-view>

<table *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
       class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <tr class="text-white sb-bg-dark">
        <th>Company Background</th>
    </tr>
    <tr>
        <td class="text-left pl-1"><span [innerHTML]="companyJsonData?.companyBackground | safeHtml"></span></td>
    </tr>
</table>

<table *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
       class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <tr class="text-white sb-bg-dark">
        <th>Business Objective</th>
    </tr>
    <tr class="text-left pl-1" [innerHTML]="companyJsonData?.businessObjective"></tr>
</table>

<table *ngIf="(summaryType === summaryTypeName?.GENERAL) || (summaryType === summaryTypeName?.ALPHA)"
       class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <tr class="text-white sb-bg-dark">
        <th>Groupâ€™s background</th>
    </tr>
    <tr>
        <td class="text-left pl-1" [innerHTML]="companyJsonData?.groupsBackGround | safeHtml"></td>
    </tr>
</table>

<table *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
       class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <tr>
        <td class="text-white sb-bg-dark"><b>Sister Concerns</b></td>
    </tr>
    <tr>
        <td colspan="2">{{companyJsonData?.sisterConcern || 'N/A'}}</td>
    </tr>
</table>

<table *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
       class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <thead>
    <tr class="text-white sb-bg-dark">
        <th colspan="100%">Information of Proprietor/Shareholder/Partner with holder %</th>
    </tr>
    </thead>
    <ng-container *ngFor="let holder of companyJsonData.proprietorList;let i =index">
        <tr class="text-white sb-bg-dark">
            <th class="sn">S.N</th>
            <th>Name</th>
            <th>Type</th>
            <th>Contact No</th>
            <th>Share %</th>
            <th>Address</th>
            <th>Ward No.</th>
            <th>Address Line 1</th>
            <th>Address Line 2</th>
            <th>Net Worth</th>
        </tr>
        <tr>
            <td>{{i + 1}}</td>
            <td class="text-left pl-1"><strong>{{holder?.name}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.type}}</strong></td>
            <td class="text-right pr-1"><strong>{{holder?.contactNo}}</strong></td>
            <td class="text-right pr-1"><strong>{{holder?.share}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.province?.name}}, {{holder?.district?.name}}
                , {{holder?.municipalityVdc?.name}}</strong></td>
            <td class="text-right pr-1"><strong>{{holder?.holderPercentWardNumber}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.addressLine1}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.addressLine2}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.netWorth}}</strong></td>
        </tr>
        <tr class="text-white sb-bg-dark" *ngIf="client !== clientName.MEGA">
            <th></th>
            <th>Father's Name</th>
            <th>Grandfather's Name</th>
            <th>Citizenship Number</th>
            <th>Issued date(AD/BS)</th>
            <th>Issued place</th>
            <th>Date of birth(AD/BS)</th>
        </tr>
        <tr *ngIf="client !== clientName.MEGA">
            <td></td>
            <td class="text-left pl-1"><strong>{{holder?.fatherName}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.grandFatherName}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.citizenshipNum}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.issuedDate | date}} ({{holder?.issuedDate|engNepDate: false}}
                )</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.issuedPlace}}</strong></td>
            <td class="text-left pl-1"><strong>{{holder?.dateOfBirth | date}} ({{holder?.dateOfBirth|engNepDate: false}}
                )</strong></td>
        </tr>

        <tr *ngIf="client != clientName.MEGA">
            <td colspan="9">
                <br>
                <table class="table border-dark">
                    <thead class="sb-bg-dark text-white">
                    <tr class="sb-bg-secondary text-white">
                        <th colspan="10">Family details of {{holder?.name}}</th>
                    </tr>
                    <tr>
                        <th class="sn">S.N</th>
                        <th>Owner Relationship</th>
                        <th>Relation Name</th>
                        <th *ngIf="client === clientName.SHINE_RESUNGA">Age</th>
                        <th>Citizenship Number</th>
                        <th>Issued Location</th>
                        <th>Issued Date(AD/BS)</th>
                        <th>Mobile Number</th>
                        <th>Address</th>
                        <th>Remarks</th>
                    </tr>
                    </thead>
                    <tbody>
                    <ng-container *ngFor="let d of holder?.kycInfo?.ownerKycDetails; let j = index">
                        <tr>
                            <td>{{j + 1}}</td>
                            <td class="text-left pl-1">{{d?.ownerRelationship ? d?.ownerRelationship : 'N/A' }}</td>
                            <td class="text-left pl-1">{{d?.relationName ? d?.relationName : 'N/A' }}</td>
                            <td *ngIf="client === clientName.SHINE_RESUNGA"
                                class="text-right pr-1">{{d?.age || 'N/A' }}</td>
                            <td class="text-right pr-1">{{d?.citizenshipNumber ? d?.citizenshipNumber : 'N/A' }}</td>
                            <td class="text-left pl-1">{{d?.issuedLocation ? d?.issuedLocation : 'N/A' }}</td>
                            <td class="text-left pl-1">{{d?.issuedDate ? (d?.issuedDate | date) : 'N/A'}}
                                ({{d?.issuedDate ? (d?.issuedDate | engNepDate: false) : 'N/A'}})
                            </td>
                            <td class="text-right pr-1">{{d?.mobileNumber ? d?.mobileNumber : 'N/A' }}</td>
                            <td class="text-left pl-1">{{d?.address ? d?.address : 'N/A'}}</td>
                            <td class="text-left pl-1">{{d?.remark ? d?.remark : 'N/A'}}</td>
                        </tr>
                    </ng-container>
                    </tbody>
                </table>
        </tr>
    </ng-container>
</table>

<app-guarantor-view *ngIf="loanDataHolder?.taggedGuarantors?.length > 0"
                    [guarantorData]="loanDataHolder?.taggedGuarantors"></app-guarantor-view>

<table *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
       class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <thead>
    <tr class="text-white sb-bg-dark">
        <th colspan="8">Management Team</th>
    </tr>
    <tr class="text-white sb-bg-dark">
        <th class="sn">S.N</th>
        <th>Name</th>
        <th>Designation</th>
        <th>Address as per Legal Document</th>
    </tr>
    </thead>
    <tbody *ngFor="let management of companyJsonData.managementTeamList; let i=index">
    <tr>
        <td>{{i + 1}}</td>
        <td class="text-left pl-1">{{management?.name}}</td>
        <td class="text-left pl-1">{{management?.designation}}</td>
        <td class="text-left pl-1">{{management?.companyLegalDocumentAddress}}</td>
    </tr>

    </tbody>
    <tr class="text-white sb-bg-dark">
        <th colspan="4">Note</th>
    </tr>
    <tr>
        <td colspan="4" class="text-left pl-1" [innerHTML]="companyJsonData?.managementTeamNote | safeHtml"></td>
    </tr>
</table>

<table
        class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <tr class="text-white sb-bg-dark">
        <th>Market Scenario</th>
    </tr>

    <tr class="text-white sb-bg-dark">
        <th>Competitors Overview</th>
    </tr>
    <tr>
        <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['competitorsOverview']"></td>
    </tr>

    <tr class="text-white sb-bg-dark">
        <th>Creditor Information</th>
    </tr>
    <tr>
        <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['keySupplier']"></td>
    </tr>

    <tr class="text-white sb-bg-dark">
        <th>Debtors information</th>
    </tr>
    <tr>
        <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['KeyBuyers']"></td>
    </tr>

       <tr class="text-white sb-bg-dark">
           <th>Market demand of product/service</th>
       </tr>
       <tr>
           <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['marketDemandService']"></td>
       </tr>

       <tr class="text-white sb-bg-dark">
           <th>Marketing Strategies</th>
       </tr>
       <tr>
           <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['marketingStrategies']"></td>
       </tr>

</table>

<app-financial-view *ngIf="loanHolder?.financial"
                    [customerType]="loanHolder?.customerType"
                    [formData]="loanHolder?.financial"></app-financial-view>

<ng-container *ngIf="(client === clientName?.ICFC) || (client === clientName?.MEGA); else otherBank">
    <app-nta-mega-summary *ngIf="loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                          [fiscalYears]="fiscalYearArray"
                          [netTradingAssetsData]="loanHolder?.netTradingAssets"></app-nta-mega-summary>
</ng-container>

<ng-template #otherBank>
    <app-nta-summary *ngIf="loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                     [fiscalYears]="fiscalYearArray"
                     [netTradingAssetsData]="loanHolder?.netTradingAssets"></app-nta-summary>
</ng-template>

<ng-container *ngIf="summaryType === summaryTypeName?.GENERAL">
    <table
            class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
        <tr class="text-white sb-bg-dark">
            <th>Industry/Market Risk & Mitigation</th>
        </tr>
        <tr>
            <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['BusinessIndustryOutlook']"></td>
        </tr>
    </table>

    <table
            class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
        <tr class="text-white sb-bg-dark">
        <tr class="text-white sb-bg-dark">
            <th>Business/Management Risk & Mitigation</th>
        </tr>
        <tr>
            <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['technicalAspect']"></td>
        </tr>
    </table>

    <table
            class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
        <tr class="text-white sb-bg-dark">
        <tr class="text-white sb-bg-dark">
            <th>Security Risk & Mitigation</th>
        </tr>
        <tr>
            <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['securityRisk']"></td>
        </tr>
    </table>

    <table *ngIf="summaryType === summaryTypeName.GENERAL"
           class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
        <tr class="text-white sb-bg-dark">
            <th>Succession Risk & Mitigation</th>
        </tr>
        <tr *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'">
            <td class="text-left pl-1"><span [innerHTML]="loanDataHolder?.companyInfo?.successionPlanning | safeHtml"></span></td>
        </tr>
    </table>

    <table
            class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
        <tr class="text-white sb-bg-dark">
            <th>Financial and Cash Flow Risk & Mitigation</th>
        </tr>
        <tr>
            <td class="text-left pl-1" [innerHTML]="companyJsonData?.marketScenario['financialAndCashFlowRisk']"></td>
        </tr>
    </table>
    <table
            class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
        <tr class="text-white sb-bg-dark">
            <th>Analysis of 5C</th>
        </tr>
        <tr>
            <td class="text-justify pl-1 pr-1" [innerHTML]="companyJsonData?.marketScenario['analysisOfFiveC'] || 'N/A' | safeHtml"></td>
        </tr>
    </table>

</ng-container>

<table *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
       class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <thead>
    <tr class="text-white sb-bg-dark">
        <th colspan="4">SWOT Analysis</th>
    </tr>
    <tr class="text-white sb-bg-dark">
        <th>Strength</th>
        <th>Weakness</th>
        <th>Opportunity</th>
        <th>Threats</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="text-left pl-1" [innerHTML]="companyJsonData?.swot?.strength | safeHtml"></td>
        <td class="text-left pl-1" [innerHTML]="companyJsonData?.swot?.weakness | safeHtml"></td>
        <td class="text-left pl-1" [innerHTML]="companyJsonData?.swot?.opportunity | safeHtml"></td>
        <td class="text-left pl-1" [innerHTML]="companyJsonData?.swot?.threats | safeHtml"></td>
    </tr>
    </tbody>
</table>



<app-income-from-account-summery *ngIf="loanHolder?.incomeFromAccount"
                                 [formData]="loanHolder?.incomeFromAccount"></app-income-from-account-summery>

<app-cicl-view *ngIf="loanHolder?.cicl" [ciclValue]="loanDataHolder?.loanHolder?.cicl"></app-cicl-view>

<table *ngIf="checkedData?.waiverChecked "
        class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
        <tr class="text-white sb-bg-dark">
            <th>Waiver/Deviation</th>
        </tr>
        <tr>
            <td class="text-left pl-1"><span
                    [innerHTML]="proposalAllData?.waiverConclusionRecommendation || 'N/A' | safeHtml"></span></td>
        </tr>
</table>

<table
        class="table table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
    <tr class="text-white sb-bg-dark">
        <th>Summary & Recommendation</th>
    </tr>
    <tr>
        <td class="text-left pl-1"><span
                [innerHTML]="proposalAllData?.summeryRecommendation || 'N/A' | safeHtml"></span></td>
    </tr>
</table>

<div *ngIf="loanDataHolder?.documentStatus?.toString() !=='APPROVED'">
    <span><strong>Loan Reporting Information</strong></span>
    <app-report-summary
            [approved]="false"
            *ngIf="loanDataHolder?.reportingInfoLevels && loanDataHolder?.reportingInfoLevels?.length > 0; else noinfo"
            [reportingInfoLevels]="loanDataHolder?.reportingInfoLevels"></app-report-summary>
    <ng-template #noinfo>
        <p>No any information tagged</p>
    </ng-template>
</div>

<app-insurance-view *ngIf="loanDataHolder?.loanHolder?.insurance && loanDataHolder?.loanHolder?.insurance.length > 0"
                    [insurance]="loanDataHolder?.loanHolder?.insurance"></app-insurance-view>

<app-collateral-summary
        *ngIf="customerAllLoanList?.length > 0 && loanDataHolder?.security && summaryType === summaryTypeName?.GENERAL"
        [customerAllLoanList]="customerAllLoanList"
        [security]="loanDataHolder?.security"></app-collateral-summary>


<app-credit-checklist-view *ngIf="loanHolder?.creditChecklist" [formData]="loanHolder?.creditChecklist"
                           [fromProfile]="false" [customerType]="loanHolder?.customerType"></app-credit-checklist-view>

<app-all-document-view *ngIf="loanDataHolder"
                       [loanDataHolder]="loanDataHolder" [siteVisitDocument]="siteVisitDocuments"></app-all-document-view>


<div *ngIf="megaGroupEnabled">
    <app-m-group-summary [mGroup]="loanDataHolder?.loanHolder.mgroupInfo"></app-m-group-summary>
</div>

<app-crg-gamma-detail-view
        *ngIf="loanDataHolder?.crgGamma"
        [formData]="loanDataHolder?.crgGamma">
</app-crg-gamma-detail-view>
<app-crg-alpha-detailed-view
        *ngIf="loanDataHolder?.creditRiskGradingAlpha"
        [loanTag]="loanDataHolder?.loan?.loanTag"
        [formData]="loanDataHolder?.creditRiskGradingAlpha">
</app-crg-alpha-detailed-view>
<app-crg-lambda-detail-view
        *ngIf="loanDataHolder?.creditRiskGradingLambda"
        [lambdaData]="loanDataHolder?.creditRiskGradingLambda">
</app-crg-lambda-detail-view>




<div *ngIf="client === clientName?.MEGA">
    <app-comments-summary
            [formData]="dataFromComments"></app-comments-summary>
    <app-previous-security-summary *ngIf="previousSecuritySummary"
                                   [formData]="dataFromPreviousSecurity"></app-previous-security-summary>
</div>

<div *ngIf="loanDataHolder?.documentStatus?.toString()==='APPROVED'">

    <app-report-summary
            [approved]="true"
            *ngIf="loanDataHolder?.reportingInfoLog"
            [reportingInfoLevelLog]="loanDataHolder?.reportingInfoLog">
    </app-report-summary>
</div>

<div *ngIf="loanDataHolder?.loanHolder?.reportingInfoLevels && loanDataHolder?.loanHolder?.reportingInfoLevels?.length > 0 && client !== clientName?.SHINE_RESUNGA">
    <span><strong>Customer Reporting Information</strong></span>
    <app-report-summary
            [approved]="false"
            [reportingInfoLevels]="loanDataHolder?.loanHolder?.reportingInfoLevels"></app-report-summary>
</div>
<!--            <app-credit-risk-grading-gamma *ngIf="loanHolder?.crgGamma" [formData]="loanHolder?.crgGamma"-->
<!--                                           [fromProfile]="false"></app-credit-risk-grading-gamma>-->
<!--            <app-credit-grading *ngIf="loanHolder?.creditRiskGrading" [formData]="loanHolder?.creditRiskGrading"-->
<!--                                [fromProfile]="false"></app-credit-grading>-->
<div *ngIf="!productUtils.CBS_ENABLE">
    <app-proposal-justification-summary *ngIf="loanDataHolder?.proposal"
                                        [customerAllLoanList]="customerAllLoanList"
                                        [proposalData]="proposalData"></app-proposal-justification-summary>
</div>
<app-proposal-terms-and-condition-summery
        *ngIf="loanDataHolder && customerAllLoanList && summaryType === summaryTypeName?.GENERAL"
        [customerAllLoanList]="customerAllLoanList"
        [loanDataHolder]="loanDataHolder"></app-proposal-terms-and-condition-summery>


