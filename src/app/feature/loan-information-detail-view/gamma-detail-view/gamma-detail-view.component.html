<div class="row">
    <div class="col-md-12">
        <ol>
            <li>
                <div>
                    <p><strong>Details of {{loanDataHolder?.loanCategory === 'INSTITUTION'
                        ? 'Authorized Company'
                        : 'Borrower'}}</strong></p>
                </div>
                <!--Start Individual Details-->
                <div *ngIf="loanDataHolder?.loanCategory === 'INDIVIDUAL'">
                    <app-individual-view
                            [calendarType]="calendarType"
                            [customerInfoData]="loanDataHolder?.loanHolder"
                            [individual]="loanDataHolder?.customerInfo"
                            [loanId]="loanId" [customerInfo]="loanHolder"></app-individual-view>
                </div>
                <!--End Individual Details-->
                <!--Start Company Details-->
                <div *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'">
                    <app-company-info-view [calendarType]="calendarType"
                                           [formValue]="loanDataHolder?.companyInfo"
                                           [loanId]="loanId" [customerInfo]="loanHolder"></app-company-info-view>
                </div>
                <!--End Company Details-->
            </li>
            <li *ngIf="loanDataHolder?.customerInfo?.introduction">
                <p><strong>Introduction</strong></p>
                <tr>
                    <td class="text-justify pl-1 pr-1"
                        [innerHTML]="loanDataHolder?.customerInfo?.introduction | safeHtml"></td>
                </tr>
            </li>
            <!-- Start Proposal Details-->
            <li *ngIf="loanDataHolder?.proposal">
                <app-proposal-view
                        [customerAllLoanList]="customerAllLoanList"
                        [proposalData]="proposalData"
                        [loanDataHolder]="loanDataHolder"
                        [loanCategory]="loanDataHolder?.loanCategory"></app-proposal-view>
            </li>
            <!-- End Proposal Details-->
            <!-- Start Group Exposure Details-->
            <li *ngIf="productUtils.CBS_ENABLE">
                <p><strong>Group Exposure</strong>
                </p>
                <app-cbs-table [customerInfo]="loanDataHolder.loanHolder"
                               *ngIf="loanDataHolder"></app-cbs-table>
            </li>
            <!-- End Group Exposure Details-->
            <li>
                <p><strong>Purpose of Loan</strong></p>
                <p class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.purposeOfLoan || 'N/A' | safeHtml"></p>
            </li>
            <li *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'">
                <p><strong>Group Background</strong></p>
                <p class="text-justify pl-1 pr-1"
                   [innerHTML]="companyJsonData?.groupsBackGround || 'N/A' | safeHtml"></p>
            </li>
            <!-- Start Income From Account Details-->
            <li *ngIf="loanHolder?.incomeFromAccount">
                <app-income-from-account-summery
                        [formData]="loanHolder?.incomeFromAccount"></app-income-from-account-summery>
            </li>
            <!-- End Income From Account Details-->
            <li>
                <p><strong>Disbursement Criteria</strong></p>
                <p class="text-justify pl-1 pr-1"
                   [innerHTML]="proposalAllData?.disbursementCriteria || 'N/A' | safeHtml"></p>
            </li>
            <li>
                <p><strong>Repayment {{client === clientName?.SHINE_RESUNGA ? 'Mode' : ''}}</strong></p>
                <p class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.repayment || 'N/A' | safeHtml"></p>
            </li>
            <!-- Start Reporting Information Details-->
            <li>
                <div *ngIf="loanDataHolder?.documentStatus?.toString()==='APPROVED'">
                    <span><strong>Reporting Information</strong></span>
                    <app-report-summary
                            [approved]="true"
                            *ngIf="loanDataHolder?.reportingInfoLog"
                            [reportingInfoLevelLog]="loanDataHolder?.reportingInfoLog">
                    </app-report-summary>
                </div>
                <div *ngIf="loanDataHolder?.documentStatus?.toString() !=='APPROVED'">
                    <span><strong>Loan Reporting Information</strong></span>
                    <app-report-summary
                            [approved]="false"
                            *ngIf="loanDataHolder?.reportingInfoLevels && loanDataHolder?.reportingInfoLevels?.length > 0; else noinfo"
                            [reportingInfoLevels]="loanDataHolder?.reportingInfoLevels"></app-report-summary>
                    <ng-template #noinfo>
                        <p>No any information tagged</p>
                    </ng-template>
                </div>
                <div *ngIf="loanDataHolder?.loanHolder?.reportingInfoLevels && loanDataHolder?.loanHolder?.reportingInfoLevels?.length > 0 && client !== clientName?.SHINE_RESUNGA">
                    <span><strong>Customer Reporting Information</strong></span>
                    <app-report-summary
                            [approved]="false"
                            [reportingInfoLevels]="loanDataHolder?.loanHolder?.reportingInfoLevels"></app-report-summary>
                </div>
            </li>
            <!-- End Reporting Information Details-->
            <!-- Start Security Details-->
            <li *ngIf="loanHolder?.security">
                <app-security-view [security]="loanHolder?.security"
                                   [shareSecurityData]="loanHolder?.shareSecurity"
                                   [securityId]="securityId"
                                   [collateralData]="loanDataHolder?.collateralSiteVisits"
                                   [docStatus]="loanDataHolder?.documentStatus"
                                   (downloadSiteVisitDocument)="checkSiteVisitDocument($event)"></app-security-view>
                <app-collateral-summary
                        *ngIf="customerAllLoanList?.length > 0 && loanDataHolder?.security"
                        [customerAllLoanList]="customerAllLoanList"
                        [security]="loanDataHolder?.security"></app-collateral-summary>
            </li>
            <!-- End Security Details-->
            <!-- Start SiteVisit Details-->
            <li *ngIf="loanHolder?.siteVisit">
                <app-site-visit-view
                        [loanDataHolder]="loanDataHolder"
                        [siteVisit]="loanHolder?.siteVisit"></app-site-visit-view>

            </li>
            <!-- End SiteVisit Details-->
            <!-- Start Single limit Obligor Details -->
            <li>
                <p><strong>Single limit Obligor Details</strong></p>
                <table class="table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
                    <thead>
                    <tr class="sb-bg-dark text-white">
                        <th class="sn">S.N</th>
                        <th>Client Name</th>
                        <th>Facility Type</th>
                        <th>Loan Limit(NPR)</th>
                        <th>O/S limit (NPR)</th>
                        <th>Proposed Limit(NPR)</th>
                        <th>FMV/DV</th>
                        <th>Exposure(%)</th>
                        <th>Remarks</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let groupExposure of proposalAllData?.groupExposure; let i = index">
                        <td>{{i + 1}}</td>
                        <td class="text-left pl-1">{{groupExposure?.clientName || 'N/A'}}</td>
                        <td class="text-left pl-1">{{groupExposure?.facilityType || 'N/A'}}</td>
                        <td class="text-right pr-1">{{groupExposure?.loanLimit || 'N/A'}}</td>
                        <td class="text-right pr-1">{{groupExposure?.osLimit || 'N/A'}}</td>
                        <td class="text-right pr-1">{{groupExposure?.proposedLimit || 'N/A'}}</td>
                        <td class="text-right pr-1">{{groupExposure?.fmvDv || 'N/A'}}</td>
                        <td class="text-right pr-1">{{groupExposure?.exposure || 'N/A'}}</td>
                        <td class="text-left pl-1">{{groupExposure?.remarks || 'N/A'}}</td>
                    </tr>
                    <tr class="text-white sb-bg-dark">
                        <th colspan="9">Single Obligor Limit</th>
                    </tr>
                    <tr>
                        <td colspan="9" class="text-justify pl-1 pr-1"
                            [innerHTML]="proposalAllData?.solConclusionRecommendation || 'N/A' | safeHtml"></td>
                    </tr>
                    </tbody>
                </table>
            </li>
            <pre></pre>
            <!-- End Single limit Obligor Details -->
            <!-- Start Financial Details-->
            <li *ngIf="loanHolder?.financial">
                <p><strong>Financial Details</strong></p>
                <app-financial-view
                        [customerType]="loanHolder?.customerType"
                        [formData]="loanHolder?.financial"></app-financial-view>
            </li>
            <!-- End Financial Details-->
            <!-- Start NTA Details-->

                <ng-container *ngIf="loanHolder?.customerType !== 'INDIVIDUAL' && client === clientName?.ICFC; else otherBank">
                    <li>
                        <p><b>Net Trading Assets</b></p>
                        <app-nta-mega-summary *ngIf="loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                                              [fiscalYears]="fiscalYearArray"
                                              [netTradingAssetsData]="loanHolder?.netTradingAssets"></app-nta-mega-summary>
                    </li>
                </ng-container>
                <ng-template #otherBank>
                    <li *ngIf="loanHolder?.customerType !== 'INDIVIDUAL'">
                        <p><b>Net Trading Assets</b></p>
                        <app-nta-summary *ngIf="loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                                         [fiscalYears]="fiscalYearArray"
                                         [netTradingAssetsData]="loanHolder?.netTradingAssets"></app-nta-summary>
                    </li>
                </ng-template>

            <!-- End NTA Details-->
            <!-- Start Cicl Details-->
            <li *ngIf="loanHolder?.cicl">
                <app-cicl-view
                        [ciclValue]="loanDataHolder?.loanHolder?.cicl"
                        [loanCategory]="loanDataHolder?.loanCategory"></app-cicl-view>
            </li>
            <!-- End Cicl Details-->
            <!-- Start Insurance Details-->
            <li *ngIf="loanDataHolder?.loanHolder?.insurance && loanDataHolder?.loanHolder?.insurance.length > 0">
                <app-insurance-view
                        [insurance]="loanDataHolder?.loanHolder?.insurance"
                        [loanCategory]="loanDataHolder?.loanCategory"></app-insurance-view>
            </li>
            <!-- End Insurance Details-->
            <!-- Start Guarantor Details-->
            <li *ngIf="loanDataHolder?.taggedGuarantors?.length > 0">
                <app-guarantor-view
                        [guarantorData]="loanDataHolder?.taggedGuarantors"
                        [loanCategory]="loanDataHolder?.loanCategory"></app-guarantor-view>
            </li>
            <!-- End Guarantor Details-->
            <!-- Start Gamma Details-->
            <li *ngIf="loanDataHolder?.crgGamma">
                <app-crg-gamma-detail-view
                        [formData]="loanDataHolder?.crgGamma"
                        [loanCategory]="loanDataHolder?.loanCategory"></app-crg-gamma-detail-view>
            </li>
            <!-- End Gamma Details-->

            <!--Start Risk and Mitigation-->
            <li>
                <p><strong>Risk & Mitigation</strong></p>
                <td class="text-justify pl-1 pr-1"
                    [innerHTML]="proposalAllData?.riskConclusionRecommendation || 'N/A' | safeHtml"></td>
                <table class="table table-sm table-condensed table-bordered table-responsive-md text-center table-sm sb-small">

                    <tr class="sb-bg-dark text-white">
                        <th>Succession Risk & Mitigation</th>
                    </tr>
                    <tr>
                        <td *ngIf="loanDataHolder.loanCategory === 'INDIVIDUAL' && !isJointCustomer"
                            class="text-justify pl-1 pr-1"
                            [innerHTML]="individualJsonData?.successionRisk || 'N/A' | safeHtml"></td>
                        <td *ngIf="loanDataHolder.loanCategory === 'INSTITUTION' && !isJointCustomer"
                            class="text-justify pl-1 pr-1"
                            [innerHTML]="loanDataHolder?.companyInfo?.successionPlanning || 'N/A' | safeHtml"></td>
                        <td *ngIf="isJointCustomer" class="text-justify pl-1 pr-1"
                            [innerHTML]="jointCustomerData?.successionRisk || 'N/A' | safeHtml"></td>
                    </tr>
                    <tr class="sb-bg-dark text-white">
                        <th>Security Risk & Mitigation</th>
                    </tr>
                    <tr>
                        <td *ngIf="loanDataHolder.loanCategory === 'INDIVIDUAL' && !isJointCustomer"
                            class="text-justify pl-1 pr-1"
                            [innerHTML]="individualJsonData?.securityRisk || 'N/A' | safeHtml"></td>
                        <td *ngIf="loanDataHolder.loanCategory === 'INSTITUTION' && !isJointCustomer"
                            class="text-justify pl-1 pr-1"
                            [innerHTML]="companyJsonData?.marketScenario?.securityRisk || 'N/A' | safeHtml"></td>
                        <td *ngIf="isJointCustomer" class="text-justify pl-1 pr-1"
                            [innerHTML]="jointCustomerData?.securityRisk || 'N/A' | safeHtml"></td>
                    </tr>
                    <ng-container *ngIf="loanDataHolder.loanCategory === 'INDIVIDUAL'">
                        <tr class="text-white sb-bg-dark">
                            <th>Income Risk & Mitigation</th>
                        </tr>
                        <tr>
                            <td *ngIf="!isJointCustomer" class="text-justify pl-1 pr-1"
                                [innerHTML]="individualJsonData?.incomeRisk || 'N/A' | safeHtml"></td>
                            <td *ngIf="isJointCustomer" class="text-justify pl-1 pr-1"
                                [innerHTML]="jointCustomerData?.incomeRisk || 'N/A' | safeHtml"></td>
                        </tr>
                    </ng-container>
                    <ng-container *ngIf="loanDataHolder.loanCategory === 'INSTITUTION'">
                        <tr class="text-white sb-bg-dark">
                            <th>Industry/Market Risk & Mitigation</th>
                        </tr>
                        <tr>
                            <td class="text-justify pl-1 pr-1"
                                [innerHTML]="companyJsonData?.marketScenario?.BusinessIndustryOutlook || 'N/A' | safeHtml"></td>
                        </tr>
                        <tr class="text-white sb-bg-dark">
                            <th>Business/Management Risk & Mitigation</th>
                        </tr>
                        <tr>
                            <td class="text-justify pl-1 pr-1"
                                [innerHTML]="companyJsonData?.marketScenario?.technicalAspect || 'N/A' | safeHtml"></td>
                        </tr>
                        <tr class="text-white sb-bg-dark">
                            <th>Financial and Cash Flow Risk & Mitigation</th>
                        </tr>
                        <tr>
                            <td class="text-justify pl-1 pr-1"
                                [innerHTML]="companyJsonData?.marketScenario?.financialAndCashFlowRisk || 'N/A' | safeHtml"></td>
                        </tr>
                    </ng-container>
                </table>

            </li>
            <!--End Risk and Mitigation-->
            <li>
                <p><strong>Waiver/Deviation</strong>
                </p>
                <tr>
                    <td class="text-justify pl-1 pr-1"
                        [innerHTML]="proposalAllData?.waiverConclusionRecommendation || 'N/A' | safeHtml"></td>
                </tr>
            </li>
            <!-- Start Credit Checklist Details-->
            <li *ngIf="loanHolder?.creditChecklist">
                <app-credit-checklist-view
                        [formData]="loanHolder?.creditChecklist"
                        [fromProfile]="false"
                        [loanCategory]="loanDataHolder?.loanCategory"></app-credit-checklist-view>
            </li>
            <!-- End Credit Checklist Details-->
            <!-- Start terms and conditions-->
            <li *ngIf="loanDataHolder && customerAllLoanList">
                <app-proposal-terms-and-condition-summery
                        [customerAllLoanList]="customerAllLoanList"
                        [loanDataHolder]="loanDataHolder"
                        [loanCategory]="loanDataHolder?.loanCategory"></app-proposal-terms-and-condition-summery>
            </li>
            <!-- End terms and conditions-->
            <li>
                <p><strong>Summary & Recommendation</strong>
                </p>
                <tr>
                    <td class="text-justify pl-1 pr-1"
                        [innerHTML]="proposalAllData?.summeryRecommendation || 'N/A' | safeHtml"></td>
                </tr>
            </li>
            <li>
                <p><strong>Account Strategy</strong></p>
                <tr>
                    <td class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.remark || 'N/A' | safeHtml"></td>
                </tr>
            </li>
            <!-- Start All Document Details-->
            <li *ngIf="loanDataHolder" >
                <app-all-document-view [loanDataHolder]="loanDataHolder"
                                       [loanCategory]="loanDataHolder?.loanCategory"
                                       [siteVisitDocument]="siteVisitDocuments"></app-all-document-view>
            </li>
            <!-- End All Document Details-->
        </ol>
    </div>
</div>
