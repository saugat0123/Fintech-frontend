<!--Start Individual Details-->
<app-individual-view *ngIf="loanDataHolder?.loanCategory === 'INDIVIDUAL'"
                     [calendarType]="calendarType"
                     [customerInfoData]="loanDataHolder?.loanHolder"
                     [individual]="loanDataHolder?.customerInfo"
                     [loanId]="loanId" [customerInfo]="loanHolder"></app-individual-view>
<div class="row" *ngIf="loanDataHolder?.loanCategory === 'INDIVIDUAL'">
    <div class="col-md-12" >
        <p><strong>2. Introduction</strong></p>
        <tr>
            <td class="text-justify pl-1 pr-1" [innerHTML]="loanDataHolder?.customerInfo?.introduction | safeHtml"></td>
        </tr>
    </div>
</div>
<!--End Individual Details-->

<!--Start Company Details-->
<app-company-info-view *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'"
                       [calendarType]="calendarType"
                       [formValue]="loanDataHolder?.companyInfo"
                       [loanId]="loanId" [customerInfo]="loanHolder"></app-company-info-view>
<!--End Company Details-->

<!-- Start Proposal Details-->
<app-proposal-view *ngIf="loanDataHolder?.proposal"
                   [customerAllLoanList]="customerAllLoanList"
                   [proposalData]="proposalData"
                   [loanDataHolder]="loanDataHolder"
                   [loanCategory]="loanDataHolder?.loanCategory"></app-proposal-view>
<!-- End Proposal Details-->

<!-- Start Group Exposure Details-->
<div *ngIf="productUtils.CBS_ENABLE">
    <div class="row mt-5">
        <div class="col-md-12">
            <p><strong>{{loanDataHolder?.loanCategory === 'INDIVIDUAL'  ? '4. ' : '3. '}} Group Exposure</strong>
            </p>
        </div>
        <div class="col-md-12">
            <app-cbs-table [customerInfo]="loanDataHolder.loanHolder"
                           *ngIf="loanDataHolder"></app-cbs-table>
        </div>
    </div>
</div>
<!-- End Group Exposure Details-->

<div class="row">
    <div class="col-md-12">
        <p><strong>{{loanDataHolder?.loanCategory === 'INDIVIDUAL'  ? '5. ' : '4. '}} Purpose of Loan</strong></p>
    </div>
    <div class="col-md-12">
        <p class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.purposeOfLoan || 'N/A' | safeHtml"></p>
    </div>
</div>

<div class="row" *ngIf="loanDataHolder?.loanCategory === 'INSTITUTION'">
    <div class="col-md-12">
        <p><strong>5. Group Background</strong></p>
    </div>
    <div class="col-md-12">
        <p class="text-justify pl-1 pr-1" [innerHTML]="companyJsonData?.groupsBackGround || 'N/A' | safeHtml"></p>
    </div>
</div>

<!-- Start Income From Account Details-->
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
<app-income-from-account-summery *ngIf="loanHolder?.incomeFromAccount"
                                 [count]="6"
                                 [formData]="loanHolder?.incomeFromAccount"></app-income-from-account-summery>
</div>
<!-- End Income From Account Details-->

<div class="row">
    <div class="col-md-12">
        <p><strong>7. Disbursement Criteria</strong></p>
    </div>
    <div class="col-md-12">
        <p class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.disbursementCriteria || 'N/A' | safeHtml"></p>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <p><strong>8. Repayment {{client === clientName?.SHINE_RESUNGA ? 'Mode' : ''}}</strong></p>
    </div>
    <div class="col-md-12">
        <p class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.repayment || 'N/A' | safeHtml"></p>
    </div>
</div>

<!-- Start Reporting Information Details-->
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
<div *ngIf="loanDataHolder?.documentStatus?.toString()==='APPROVED'">
    <span><strong>9. Reporting Information</strong></span>
    <app-report-summary
            [approved]="true"
            *ngIf="loanDataHolder?.reportingInfoLog"
            [reportingInfoLevelLog]="loanDataHolder?.reportingInfoLog">
    </app-report-summary>
</div>
<div *ngIf="loanDataHolder?.documentStatus?.toString() !=='APPROVED'">
    <span><strong>9. Loan Reporting Information</strong></span>
    <app-report-summary
            [approved]="false"
            *ngIf="loanDataHolder?.reportingInfoLevels && loanDataHolder?.reportingInfoLevels?.length > 0; else noinfo"
            [reportingInfoLevels]="loanDataHolder?.reportingInfoLevels"></app-report-summary>
    <ng-template #noinfo>
        <p>No any information tagged</p>
    </ng-template>
</div>
<div *ngIf="loanDataHolder?.loanHolder?.reportingInfoLevels && loanDataHolder?.loanHolder?.reportingInfoLevels?.length > 0 && client !== clientName?.SHINE_RESUNGA">
    <span><strong>9. Customer Reporting Information</strong></span>
    <app-report-summary
            [approved]="false"
            [reportingInfoLevels]="loanDataHolder?.loanHolder?.reportingInfoLevels"></app-report-summary>
</div>
</div>
<!-- End Reporting Information Details-->

<!-- Start Security Details-->
<app-security-view *ngIf="loanHolder?.security" [security]="loanHolder?.security"
                   [shareSecurityData]="loanHolder?.shareSecurity"
                   [securityId]="securityId"
                   [collateralData]="loanDataHolder?.collateralSiteVisits"
                   [docStatus]="loanDataHolder?.documentStatus"
                   (downloadSiteVisitDocument)="checkSiteVisitDocument($event)"></app-security-view>
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
    <app-collateral-summary
            *ngIf="customerAllLoanList?.length > 0 && loanDataHolder?.security"
            [customerAllLoanList]="customerAllLoanList"
            [security]="loanDataHolder?.security"></app-collateral-summary>
</div>

<!-- End Security Details-->

<!-- Start SiteVisit Details-->
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
<app-site-visit-view *ngIf="loanHolder?.siteVisit"
                     [siteVisit]="loanHolder?.siteVisit"></app-site-visit-view>
</div>
<!-- End SiteVisit Details-->

<!-- Start Single limit Obligor Details -->
<div class="row">
    <div class="col-md-12">
        <p><strong>12. Single limit Obligor Details</strong></p>
        <table class="table-condensed table-bordered table-sm table-responsive-md text-center sb-small">
            <thead>
            <tr class="sb-bg-dark text-white">
                <th class="sn">S.N</th>
                <th>Client Name</th>
                <th>Facility Type</th>
                <th>Loan Limit(NPR)</th>
                <th>O/S limit (NPR)</th>
                <th>Proposed Limit(NPR)</th>
                <th>FMV/DV</th>
                <th>Exposure(%)</th>
                <th>Remarks</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let groupExposure of proposalAllData?.groupExposure; let i = index">
                <td>{{i + 1}}</td>
                <td class="text-left pl-1">{{groupExposure?.clientName || 'N/A'}}</td>
                <td class="text-left pl-1">{{groupExposure?.facilityType || 'N/A'}}</td>
                <td class="text-right pr-1">{{groupExposure?.loanLimit || 'N/A'}}</td>
                <td class="text-right pr-1">{{groupExposure?.osLimit || 'N/A'}}</td>
                <td class="text-right pr-1">{{groupExposure?.proposedLimit || 'N/A'}}</td>
                <td class="text-right pr-1">{{groupExposure?.fmvDv || 'N/A'}}</td>
                <td class="text-right pr-1">{{groupExposure?.exposure || 'N/A'}}</td>
                <td class="text-left pl-1">{{groupExposure?.remarks || 'N/A'}}</td>
            </tr>
            <tr class="text-white sb-bg-dark">
                <th colspan="9">Single Obligor Limit</th>
            </tr>
            <tr>
                <td colspan="9" class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.solConclusionRecommendation || 'N/A' | safeHtml"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<!-- End Single limit Obligor Details -->
<!-- Start Financial Details-->
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
<app-financial-view *ngIf="loanHolder?.financial"
                    [customerType]="loanHolder?.customerType"
                    [formData]="loanHolder?.financial"></app-financial-view>
</div>
<!-- End Financial Details-->

<!-- Start NTA Details-->
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
<ng-container *ngIf="client === clientName?.ICFC; else otherBank">
    <app-nta-mega-summary *ngIf="loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                          [fiscalYears]="fiscalYearArray"
                          [netTradingAssetsData]="loanHolder?.netTradingAssets"></app-nta-mega-summary>
</ng-container>
<ng-template #otherBank>
    <app-nta-summary *ngIf="loanHolder?.netTradingAssets && fiscalYearArray?.length > 0"
                     [fiscalYears]="fiscalYearArray"
                     [netTradingAssetsData]="loanHolder?.netTradingAssets"
                     [count]="14"></app-nta-summary>
</ng-template>
</div>
<!-- End NTA Details-->

<!-- Start Cicl Details-->
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
<app-cicl-view *ngIf="loanHolder?.cicl"
               [ciclValue]="loanDataHolder?.loanHolder?.cicl"
               [loanCategory]="loanDataHolder?.loanCategory"></app-cicl-view>
</div>
<!-- End Cicl Details-->

<!-- Start Insurance Details-->
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
<app-insurance-view *ngIf="loanDataHolder?.loanHolder?.insurance && loanDataHolder?.loanHolder?.insurance.length > 0"
                    [insurance]="loanDataHolder?.loanHolder?.insurance"
                    [loanCategory]="loanDataHolder?.loanCategory"></app-insurance-view>
</div>
<!-- End Insurance Details-->

<!-- Start Guarantor Details-->
<div *ngIf ="loanDataHolder?.loanType !== 'FULL_SETTLEMENT_LOAN' && loanDataHolder?.loanType !== 'CLOSURE_LOAN'">
<app-guarantor-view *ngIf="loanDataHolder?.taggedGuarantors?.length > 0"
                    [guarantorData]="loanDataHolder?.taggedGuarantors"
                    [loanCategory]="loanDataHolder?.loanCategory"></app-guarantor-view>
</div>
<!-- End Guarantor Details-->

<!-- Start Gamma Details-->
<app-crg-gamma-detail-view
        *ngIf="loanDataHolder?.crgGamma"
        [formData]="loanDataHolder?.crgGamma" [loanCategory]="loanDataHolder?.loanCategory"></app-crg-gamma-detail-view>
<!-- End Gamma Details-->

<!--Start Risk and Mitigation-->
<div class="row">
    <div class="col-md-12">
        <p><strong>{{loanDataHolder?.loanCategory === 'INDIVIDUAL'  ? '18. ' : '19. '}} Risk & Mitigation</strong></p>
        <tr>
            <td class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.riskConclusionRecommendation || 'N/A' | safeHtml"></td>
        </tr>
    </div>
    <div class="col-md-12">
        <table class="table table-sm table-condensed table-bordered table-responsive-md text-center table-sm sb-small">

            <tr class="sb-bg-dark text-white">
                <th>Succession Risk & Mitigation</th>
            </tr>
            <tr>
                <td *ngIf="loanDataHolder.loanCategory === 'INDIVIDUAL'" class="text-justify pl-1 pr-1" [innerHTML]="individualJsonData?.successionRisk || 'N/A' | safeHtml"></td>
                <td *ngIf="loanDataHolder.loanCategory === 'INSTITUTION'" class="text-justify pl-1 pr-1" [innerHTML]="loanDataHolder?.companyInfo?.successionPlanning || 'N/A' | safeHtml"></td>
            </tr>
            <tr  class="sb-bg-dark text-white">
                <th>Security Risk & Mitigation</th>
            </tr>
            <tr>
                <td *ngIf="loanDataHolder.loanCategory === 'INDIVIDUAL'" class="text-justify pl-1 pr-1" [innerHTML]="individualJsonData?.securityRisk || 'N/A' | safeHtml"></td>
                <td *ngIf="loanDataHolder.loanCategory === 'INSTITUTION'" class="text-justify pl-1 pr-1" [innerHTML]="companyJsonData?.marketScenario?.securityRisk || 'N/A' | safeHtml"></td>
            </tr>
            <ng-container *ngIf="loanDataHolder.loanCategory === 'INDIVIDUAL'">
                <tr class="text-white sb-bg-dark">
                    <th>Income Risk & Mitigation</th>
                </tr>
                <tr>
                    <td class="text-justify pl-1 pr-1" [innerHTML]="individualJsonData?.incomeRisk || 'N/A' | safeHtml"></td>
                </tr>
            </ng-container>
            <ng-container *ngIf="loanDataHolder.loanCategory === 'INSTITUTION'">
                <tr class="text-white sb-bg-dark">
                    <th>Industry/Market Risk & Mitigation</th>
                </tr>
                <tr>
                    <td class="text-justify pl-1 pr-1" [innerHTML]="companyJsonData?.marketScenario?.BusinessIndustryOutlook || 'N/A' | safeHtml"></td>
                </tr>
                <tr class="text-white sb-bg-dark">
                    <th>Business/Management Risk & Mitigation</th>
                </tr>
                <tr>
                    <td class="text-justify pl-1 pr-1" [innerHTML]="companyJsonData?.marketScenario?.technicalAspect || 'N/A' | safeHtml"></td>
                </tr>
                <tr class="text-white sb-bg-dark">
                    <th>Financial and Cash Flow Risk & Mitigation</th>
                </tr>
                <tr>
                    <td class="text-justify pl-1 pr-1" [innerHTML]="companyJsonData?.marketScenario?.financialAndCashFlowRisk || 'N/A' | safeHtml"></td>
                </tr>
            </ng-container>
        </table>
    </div>
</div>
<!--End Risk and Mitigation-->

<div class="row">
    <div class="col-md-12">
        <p><strong>{{loanDataHolder?.loanCategory === 'INDIVIDUAL'  ? '19. ' : '20. '}} Waiver/Deviation</strong></p>
        <tr>
            <td class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.waiverConclusionRecommendation || 'N/A' | safeHtml"></td>
        </tr>
    </div>
</div>

<!-- Start Credit Checklist Details-->
<app-credit-checklist-view *ngIf="loanHolder?.creditChecklist"
                           [formData]="loanHolder?.creditChecklist"
                           [fromProfile]="false"
                           [loanCategory]="loanDataHolder?.loanCategory"></app-credit-checklist-view>
<!-- End Credit Checklist Details-->

<app-proposal-terms-and-condition-summery *ngIf="loanDataHolder && customerAllLoanList"
                                          [customerAllLoanList]="customerAllLoanList"
                                          [loanDataHolder]="loanDataHolder"
                                          [loanCategory]="loanDataHolder?.loanCategory"></app-proposal-terms-and-condition-summery>

<div class="row">
    <div class="col-md-12">
        <p><strong>{{loanDataHolder?.loanCategory === 'INDIVIDUAL'  ? '22. ' : '23. '}} Summary & Recommendation</strong></p>
        <tr>
            <td class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.summeryRecommendation || 'N/A' | safeHtml"></td>
        </tr>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <p><strong>{{(loanDataHolder?.loanCategory === 'INDIVIDUAL')  ? '23. ' : '24. '}}
            {{client === clientName?.SHINE_RESUNGA ? 'Account Strategy' : 'Remarks'}}</strong></p>
        <tr>
            <td class="text-justify pl-1 pr-1" [innerHTML]="proposalAllData?.remark || 'N/A' | safeHtml"></td>
        </tr>
    </div>
</div>

<!-- Start All Document Details-->
<app-all-document-view *ngIf="loanDataHolder" [loanDataHolder]="loanDataHolder"
                       [loanCategory]="loanDataHolder?.loanCategory" [siteVisitDocument]="siteVisitDocuments"></app-all-document-view>
<!-- End All Document Details-->
