<!--<nb-chat [title]="associateUser.name" size="small" status="primary" style="width: 300px !important;">-->
<!--    <nb-chat-message *ngFor="let message of messages"-->
<!--                     [avatar]="message.senderUser.avatar"-->
<!--                     [date]="associateUser.id.toString() === message.fromUserId-->
<!--                     || associateUser.id.toString() === message.toUserId? message.createdAt:message.createdAt"-->
<!--                     [message]="message.text"-->
<!--                     [reply]="message.reply"-->
<!--                     [sender]="message.senderUser.name"></nb-chat-message>-->
<!--    <nb-chat-form (send)="sendMessage($event)">-->
<!--    </nb-chat-form>-->
<!--</nb-chat>-->

<nb-card style="width:300px!important;height:400px;">
    <nb-card-header class="bank-header-color" style="color: white;height: 65px">
        {{associateUser.name}}
        <div style="margin-top: -8px"><span style="font-size: 12px">{{associateUser.role.name}}</span></div>
    </nb-card-header>
    <nb-card-body class="chat-discussion cursor">
        <div #msgList (scrolledUp)="onScrollUp()" [infiniteScrollDistance]="2"
             [infiniteScrollThrottle]="50"

             [infiniteScrollUpDistance]="1.5"
             [scrollWindow]="false"
             class="hide-scroll"
             infinite-scroll
             style="overflow-y: scroll; height: 350px;overflow-x: hidden;">

            <app-chat-spinner *ngIf="spinner"></app-chat-spinner>

            <div *ngFor="let message of messages">
                <div *ngIf="associateUser.id.toString()=== message.fromUserId || associateUser.id.toString()=== message.toUserId"
                >

                    <div>
                    <span *ngIf="message.senderUser.id === currentUserId" class="px-4"
                          style="font-size: 10px;"> {{message.sendDate | date}} </span>
                        <div class="chat-message left">
                            <div *ngIf="message.senderUser.id === currentUserId" class="message bk-receiver">
                                <div class="row">
                                    <span style="font-size: 10px"> You </span>
                                </div>

                                <div class="col-md-12">
                                    <div class="row"><span style="text-align: justify;">{{message.text}}</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                            <span class="d-flex justify-content-end"
                                                  style="font-size: 10px;">
                                                {{message.sendDate | date : 'shortTime'}}
                                                <span *ngIf="message.seenFlag" style="padding-left:5px"><i
                                                        class="fa fa-check-double"></i>
                                                </span>
                                            </span>

                                    </div>

                                </div>
                            </div>
                        </div>
                        <span *ngIf="message.senderUser.id !== currentUserId" class="px-4"
                              style="font-size: 10px;"> {{message.sendDate | date}} </span>
                        <div *ngIf="message.senderUser.id !== currentUserId" class="chat-message right">
                            <img alt="" class="message-avatar" src="../assets/img/avatar.png">
                            <div class="bk-sender">
                                <div class="row">
                                    <span style="font-size: 10px"> {{message.senderUser.name}}</span>
                                </div>
                                <div class="col-md-12">
                                    <div class="row"><span style="text-align: justify;">{{message.text}}</span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                            <span class="d-flex justify-content-end"
                                                  style="font-size: 10px;">
                                                {{message.sendDate | date : 'shortTime'}}
                                            </span>

                                    </div>

                                </div>
                            </div>

                        </div>


                    </div>
                </div>

            </div>

        </div>

    </nb-card-body>


    <form [formGroup]="chatForm">
        <div class="row">
            <div class="panel-footer">

                <textarea cols="0" formControlName="message" name="textMessage" rows="0"></textarea>

            </div>
            <div class="sendBtn">
                <button (click)="sendMessage(null)" class="btn btn-outline-primary btn-sm btn-flat"
                        style="height: 100%;"><i class="fas fa-location-arrow px-2"></i>
                </button>
            </div>
        </div>

    </form>

</nb-card>
