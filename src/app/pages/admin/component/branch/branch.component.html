<div class="row">
    <div class="col-md-4 col-sm-6 col-xs-12">
        <app-icon-card title="Branches" type="info" detail="{{branches}}">
            <i class="fa fa-bank"></i>
        </app-icon-card>
    </div>
    <div class="col-md-4 col-sm-6 col-xs-12">
        <app-icon-card title="Active" type="success" detail="{{activeCount}}">
            <i class="fa fa-briefcase"></i>
        </app-icon-card>
    </div>
    <div class="col-md-4 col-sm-6 col-xs-12">
        <app-icon-card title="Inactive" type="warning" detail="{{inactiveCount}}">
            <i class="fa fa-address-book-o"></i>
        </app-icon-card>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <nb-card>
            <nb-card-header>
                <div class=row>
                    <div class=" col-md-6">
                        <div class="row">
                            <div class="col-md-5">
                                <input nbInput type="text" [(ngModel)]="search.name"
                                       fieldSize="medium"
                                       name="name"
                                       placeholder="name...">
                            </div>
                            <div class="col-md-4">
                                <button data-toggle="collapse" data-target="#searchModel"
                                        nbButton outline status="primary">
                                    <i class="fa fa-filter"> Filter</i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- <h3 class="box-title">Hover Data Table</h3> -->
                    <div class="col-md-6">
                        <button *ngIf='addViewBranch' class="skin-blue pull-right" data-toggle="modal"
                                (click)="addBranch()">
                            <i class="skin-blue fa fa-plus"></i>
                        </button>
                        <a *ngIf='downloadCsv' class="pull-right btn btn-transparent-primary"
                           (click)="getCsv()">
                            <i class="fa fa-download" aria-hidden="true"></i> Download</a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div id="searchModel" class="collapse">

                            <fieldset>

                                <div class="col-md-12" style="padding-top: 20px">

                                    <div class="row" style="padding-top: 20px">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <select name="province" id="province"
                                                        class="form-control-sm col-md-9 justify-content-sm-center"
                                                        (change)="getDistricts($event.target.value)">
                                                    <option [ngValue]="undefined" hidden>Province</option>
                                                    <option value="All">All</option>
                                                    <option *ngFor="let province of provinces"
                                                            value="{{province.id}}">
                                                        {{province.name}}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <select name="district" id="district"
                                                    class="form-control-sm col-md-9 justify-content-sm-center"
                                                    (change)="getMunicipalities($event.target.value)">
                                                <option [ngValue]="undefined" hidden>District</option>
                                                <option *ngFor="let district of districts"
                                                        value="{{district.id}}"
                                                >
                                                    {{district.name}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <select name="municipality" id="municipality"
                                                    class="form-control-sm col-md-9 justify-content-sm-center"
                                                    (change)="getMunicipality($event.target.value)">
                                                <option [ngValue]="undefined" hidden>Municipality</option>
                                                <option *ngFor="let municipality of municipalities"
                                                        value="{{municipality.id}}">
                                                    {{municipality.name}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12" style="padding-top: 20px">
                                    <button (click)="clearSearch()" data-toggle="collapse" data-target="#searchModel"
                                            class="btn btn-sm btn-flat btn-outline-secondary">Cancel
                                    </button>
                                    <button class="btn btn-primary btn-sm btn-flat pull-right" (click)="onSearch()">
                                        Advance Search
                                    </button>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </nb-card-header>
            <nb-card-body>
                <div class="box-body" *ngIf='viewBranch'>
                    <table id="add-branch-table" class="table table-striped table-bordered table-hover ">
                        <thead>
                        <tr>
                            <th>S.N</th>
                            <th>Branch Name</th>
                            <th>Code</th>
                            <th>Province</th>
                            <th>District</th>
                            <th>Municipality</th>
                            <th>Street</th>
                            <th>Ward</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let allList of dataList; let i=index">
                            <div *ngIf="!dataList?.length > 0">
                                <p>No Content Found</p>
                            </div>
                            <td>{{(pageable.number - 1) * pageable.size + i + 1}}</td>
                            <td>{{allList.name}}</td>
                            <td>{{allList.branchCode}}</td>
                            <td>{{allList.province?.name}}</td>
                            <td>{{allList.district?.name}}</td>
                            <td>{{allList.municipalityVdc?.name}}</td>
                            <td>{{allList.streetName}}</td>
                            <td>{{allList.wardNumber}}</td>
                            <td>
                                <select class="select-borderless" [(ngModel)]="allList.status" name="status"
                                        (change)="onChange($event.target.value,allList)">
                                    <option value="ACTIVE">ACTIVE</option>
                                    <option value="INACTIVE">INACTIVE</option>
                                </select>
                            </td>
                            <td>
                                <a *ngIf='editViewBranch' (click)="openEdit(allList)"
                                   data-toggle="tooltip"
                                   data-placement="top" title="EDIT" class="cursor">
                                    <i class="fa fa-edit" style="color:#3c8dbc;"></i>
                                </a>
                                <!-- <a class="btn btn-danger btn-sm" data-toggle="tooltip"  data-placement="top" (click)="delete(allList)"  title="DELETE" style="margin-left:10px">
                                  <i class="fa fa-trash" style="color:white;"></i>
                                </a> -->
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <app-spinner *ngIf="spinner" class="d-flex justify-content-center"></app-spinner>
                    <!-- ===================table-pagination==================== -->
                    <app-pagination *ngIf="!spinner"></app-pagination>
                    <!-- ===================table-pagination==================== -->
                    <!-- /.box-body -->
                    <!-- /.box -->

                </div>
            </nb-card-body>
        </nb-card>
    </div>
</div>
